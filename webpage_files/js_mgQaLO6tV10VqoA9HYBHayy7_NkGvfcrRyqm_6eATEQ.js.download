/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
((Drupal,drupalSettings)=>{Drupal.behaviors.ctaNewsletterAjax={attach:(context)=>{const form=context.querySelector('form#email-collection-form');if(!form)return;const mtcaptchaContainer=form.querySelector('.mtcaptcha-container');if(mtcaptchaContainer&&window.mtcaptchaConfig)window.mtcaptchaConfig.renderQueue.push(mtcaptchaContainer.id);form.addEventListener('submit',(event)=>{event.preventDefault();const submitButton=form.querySelector('input[type="submit"]');submitButton.disabled=true;fetch('/cta_newsletter/ajax/submit',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams(new FormData(form))}).then((response)=>response.json()).then((successResponse)=>{const command=successResponse[0];if(command.command==='insert'&&command.method==='html'&&command.selector==='.block-content'){const contentWrapper=form.closest('.block-wrapper').querySelector('.block-content');contentWrapper.innerHTML=command.data;}else{const errorMessage=`<p>${Drupal.t('An error occurred. Please try again later.')}</p>`;form.insertAdjacentHTML('afterbegin',errorMessage);}}).catch(()=>{const errorMessage=`<p>${Drupal.t('An error occurred. Please try again later.')}</p>`;form.insertAdjacentHTML('afterbegin',errorMessage);}).finally(()=>{submitButton.disabled=false;});});}};})(Drupal,drupalSettings);;
const modal=document.getElementById('cta-modal-block');modal.addEventListener('show.cta-modal',(event)=>{const userPlusContentGate=(window.CSM&&window.CSM.UserPlusContentGate)??null;if(userPlusContentGate&&userPlusContentGate.isGateFull())event.preventDefault();});;
window.dataLayer=window.dataLayer||[];var els=document.getElementById("cta-modal-block");if(els)dataLayer.push({'event':'marketWidgetRendered'});;
if(!window.mtcaptchaConfig&&typeof window.drupalSettings.config!="undefined"){var script=document.createElement('script');script.type='text/javascript';script.text="var mtcaptchaConfig = "+window.drupalSettings.config;(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(script);};
