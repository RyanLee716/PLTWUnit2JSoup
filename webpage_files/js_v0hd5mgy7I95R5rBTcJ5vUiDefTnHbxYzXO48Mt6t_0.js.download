/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
window.Drupal={behaviors:{},locale:{}};(function(Drupal,drupalSettings,drupalTranslations,console,Proxy,Reflect){Drupal.throwError=function(error){setTimeout(()=>{throw error;},0);};Drupal.attachBehaviors=function(context,settings){context=context||document;settings=settings||drupalSettings;const behaviors=Drupal.behaviors;Object.keys(behaviors||{}).forEach((i)=>{if(typeof behaviors[i].attach==='function')try{behaviors[i].attach(context,settings);}catch(e){Drupal.throwError(e);}});};Drupal.detachBehaviors=function(context,settings,trigger){context=context||document;settings=settings||drupalSettings;trigger=trigger||'unload';const behaviors=Drupal.behaviors;Object.keys(behaviors||{}).forEach((i)=>{if(typeof behaviors[i].detach==='function')try{behaviors[i].detach(context,settings,trigger);}catch(e){Drupal.throwError(e);}});};Drupal.checkPlain=function(str){str=str.toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');return str;};Drupal.formatString=function(str,args){const processedArgs={};Object.keys(args||{}).forEach((key)=>{switch(key.charAt(0)){case '@':processedArgs[key]=Drupal.checkPlain(args[key]);break;case '!':processedArgs[key]=args[key];break;default:processedArgs[key]=Drupal.theme('placeholder',args[key]);break;}});return Drupal.stringReplace(str,processedArgs,null);};Drupal.stringReplace=function(str,args,keys){if(str.length===0)return str;if(!Array.isArray(keys)){keys=Object.keys(args||{});keys.sort((a,b)=>a.length-b.length);}if(keys.length===0)return str;const key=keys.pop();const fragments=str.split(key);if(keys.length){for(let i=0;i<fragments.length;i++)fragments[i]=Drupal.stringReplace(fragments[i],args,keys.slice(0));}return fragments.join(args[key]);};Drupal.t=function(str,args,options){options=options||{};options.context=options.context||'';if(typeof drupalTranslations!=='undefined'&&drupalTranslations.strings&&drupalTranslations.strings[options.context]&&drupalTranslations.strings[options.context][str])str=drupalTranslations.strings[options.context][str];if(args)str=Drupal.formatString(str,args);return str;};Drupal.url=function(path){return drupalSettings.path.baseUrl+drupalSettings.path.pathPrefix+path;};Drupal.url.toAbsolute=function(url){const urlParsingNode=document.createElement('a');try{url=decodeURIComponent(url);}catch(e){}urlParsingNode.setAttribute('href',url);return urlParsingNode.cloneNode(false).href;};Drupal.url.isLocal=function(url){let absoluteUrl=Drupal.url.toAbsolute(url);let {protocol}=window.location;if(protocol==='http:'&&absoluteUrl.startsWith('https:'))protocol='https:';let baseUrl=`${protocol}//${window.location.host}${drupalSettings.path.baseUrl.slice(0,-1)}`;try{absoluteUrl=decodeURIComponent(absoluteUrl);}catch(e){}try{baseUrl=decodeURIComponent(baseUrl);}catch(e){}return absoluteUrl===baseUrl||absoluteUrl.startsWith(`${baseUrl}/`);};Drupal.formatPlural=function(count,singular,plural,args,options){args=args||{};args['@count']=count;const pluralDelimiter=drupalSettings.pluralDelimiter;const translations=Drupal.t(singular+pluralDelimiter+plural,args,options).split(pluralDelimiter);let index=0;if(typeof drupalTranslations!=='undefined'&&drupalTranslations.pluralFormula)index=count in drupalTranslations.pluralFormula?drupalTranslations.pluralFormula[count]:drupalTranslations.pluralFormula.default;else{if(args['@count']!==1)index=1;}return translations[index];};Drupal.encodePath=function(item){return window.encodeURIComponent(item).replace(/%2F/g,'/');};Drupal.deprecationError=({message})=>{if(drupalSettings.suppressDeprecationErrors===false&&typeof console!=='undefined'&&console.warn)console.warn(`[Deprecation] ${message}`);};Drupal.deprecatedProperty=({target,deprecatedProperty,message})=>{if(!Proxy||!Reflect)return target;return new Proxy(target,{get:(target,key,...rest)=>{if(key===deprecatedProperty)Drupal.deprecationError({message});return Reflect.get(target,key,...rest);}});};Drupal.theme=function(func,...args){if(func in Drupal.theme)return Drupal.theme[func](...args);};Drupal.theme.placeholder=function(str){return `<em class="placeholder">${Drupal.checkPlain(str)}</em>`;};Drupal.elementIsVisible=function(elem){return !!(elem.offsetWidth||elem.offsetHeight||elem.getClientRects().length);};Drupal.elementIsHidden=function(elem){return !Drupal.elementIsVisible(elem);};})(Drupal,window.drupalSettings,window.drupalTranslations,window.console,window.Proxy,window.Reflect);;
if(window.jQuery)jQuery.noConflict();document.documentElement.className+=' js';(function(Drupal,drupalSettings){const domReady=(callback)=>{const listener=()=>{callback();document.removeEventListener('DOMContentLoaded',listener);};if(document.readyState!=='loading')setTimeout(callback,0);else document.addEventListener('DOMContentLoaded',listener);};domReady(()=>{Drupal.attachBehaviors(document,drupalSettings);});})(Drupal,window.drupalSettings);;
((Drupal,drupalSettings)=>{var ctaAjax=class{constructor(element){this.element=element;}ajax(url){const result=fetch(url,{}).then((response)=>response.json()).then((data)=>{data.forEach((row)=>{if(row&&row.command)if(row.command==='settings')this.handleSettings(row);else if(row.command==='add_css')this.handleAddCss(row);else if(row.command==='add_js')this.handleInsertLibrary(row);else{if(row.command==='insert')this.handleInsert(row);}});});return result;}handleSettings(data){if(data.merge)window.drupalSettings=this.objectMerge(window.drupalSettings,data.settings);}handleAddCss(data){this.doAppend(document.body,'link',data.data);}handleInsertLibrary(data){this.doAppend(document.body,'script',data.data);}handleInsert(data){var content=new DOMParser().parseFromString(data.data,'text/html');this.doReplace(this.element,content.body);}doAppend(parent,tag,data){data.forEach((dataScript)=>{var script=document.createElement(tag);Object.keys(dataScript).forEach((key)=>{script[key]=dataScript[key];});parent.appendChild(script);});}doReplace(selector,content){while(content.firstChild&&content.firstChild instanceof Element){if(selector instanceof Element&&content.firstChild instanceof Element)selector.insertAdjacentElement('beforebegin',content.firstChild);if(content.removeChild&&content.firstChild)content.removeChild(content.firstChild);}if(selector.parentNode instanceof Element)selector.parentNode.removeChild(selector);}objectMerge(target,...sources){if(!sources.length)return target;const source=sources.shift();if(this.isObject(target)&&this.isObject(source))Object.keys(source).forEach((key)=>{if(this.isObject(source[key])){if(!target[key])Object.assign(target,{[key]:{}});this.objectMerge(target[key],source[key]);}else Object.assign(target,{[key]:source[key]});});return this.objectMerge(target,...sources);}isObject(value){return value&&typeof value==='object'&&!Array.isArray(value);}};var loaded=false;Drupal.behaviors.ctaCampaign={attach:(context)=>{if(!loaded){loaded=true;var element=document.getElementById('cta-main');var id=element.getAttribute('data-campaign');var ajax=new ctaAjax(element);let url='/ajax/cta/campaign/'+id;url+='?ajax_page_state[libraries]='+window.drupalSettings.ajaxPageState.libraries;ajax.ajax(url).then(()=>{var tries=0;var interval=setInterval(()=>{if(tries<10){tries+=1;if(Drupal.behaviors.cta){clearInterval(interval);Drupal.attachBehaviors(document.getElementById('cta-main'),drupalSettings);}}else clearInterval(interval);},100);});}}};})(Drupal,drupalSettings);;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class FooterNewsletter{setup(){const footerNewsletter=document.getElementById('footer-newsletter');if(footerNewsletter){const emailInput=footerNewsletter.querySelector('input');emailInput.addEventListener('keydown',(event)=>{if(event.key==='Enter')this.doSignEmail(emailInput.value);});const emailButton=footerNewsletter.querySelector('button');emailButton.addEventListener('click',()=>{this.doSignEmail(emailInput.value);});}}doSignEmail(email=''){let newsletterLocation=`/${drupalSettings.path.pathPrefix}newsletters`;if(email)newsletterLocation+=`?email=${email}`;window.location.href=newsletterLocation;}static init(){const footerNewsletter=new FooterNewsletter();footerNewsletter.setup();}}FooterNewsletter.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class FooterSearch{setup(){const footerSearch=document.getElementById('footer-search');if(footerSearch){const searchInput=footerSearch.querySelector('input');searchInput.addEventListener('keydown',(event)=>{if(event.key==='Enter')this.doSearch(searchInput.value);});const searchButton=footerSearch.querySelector('button');searchButton.addEventListener('click',()=>{this.doSearch(searchInput.value);});}}doSearch(search){let searchLocation=`/${drupalSettings.path.pathPrefix}search`;if(search)searchLocation+=`/${search}`;window.location.href=searchLocation;}static init(){const footerSearch=new FooterSearch();footerSearch.setup();}}FooterSearch.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class ElementManager{create(tag,attributes={}){const element=document.createElement(tag);this.process(element,attributes);return element;}update(element,attributes={}){this.process(element,attributes);return element;}remove(element){element.remove();}process(element,attributes){if(attributes.content){element.innerHTML=attributes.content;delete attributes.content;}if(attributes.reset&&attributes.reset===true){this.removeAttributes(element);delete attributes.reset;}this.setAttributes(element,attributes);}setAttributes(element,attributes={}){Object.keys(attributes).forEach((attribute)=>{if(attributes[attribute]){let val=attributes[attribute];if(Array.isArray(val))val=val.join(' ');element.setAttribute(attribute,val);}});}removeAttributes(element){Object.keys(element.attributes).forEach((item)=>{element.removeAttribute(element.attributes[item].name);});}}((CustomEvent)=>{if(typeof CustomEvent==='function')return false;function CustomEventPolyfill(event,eventParams){const params=eventParams||{bubbles:false,cancelable:false,detail:'undefined'};const _event=document.createEvent('CustomEvent');_event.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return _event;}CustomEventPolyfill.prototype=window.Event.prototype;window.CustomEvent=CustomEventPolyfill;return true;})(window.CustomEvent);((ElementProto)=>{if(typeof ElementProto.matches!=='function')ElementProto.matches=ElementProto.msMatchesSelector||ElementProto.mozMatchesSelector||ElementProto.webkitMatchesSelector||function matches(selector){const element=this;const elements=(element.document||element.ownerDocument).querySelectorAll(selector);let index=0;while(elements[index]&&elements[index]!==element)index+=1;return Boolean(elements[index]);};if(typeof ElementProto.closest!=='function')ElementProto.closest=function closest(selector){let element=this;while(element&&element.nodeType===1){if(element.matches(selector))return element;element=element.parentNode;}return null;};})(window.Element.prototype);const TRANSITION_END='transitionend';const MAX_UID=1000000;const MILLISECONDS_MULTIPLIER=1000;class EventListener{constructor(){this.namespaces={};}on(events,elem,handler,opts){const element=elem||window;const options=opts||{};const eventHandler=(evnt)=>{if(typeof handler==='function')handler(evnt);};[].slice.call(events.split(' ')).forEach((event)=>{if(!(event in this.namespaces))this.namespaces[event]=[];this.namespaces[event].push({element,options,eventHandler});element.addEventListener(event.split('.')[0],eventHandler,options);});}off(events,elem){[].slice.call(events.split(' ')).forEach((event)=>{if(!(event in this.namespaces))return;this.namespaces[event].forEach((evt,index)=>{if(evt.element===elem){const eventName=event.split('.')[0];const {element,eventHandler,options}=evt;element.removeEventListener(eventName,eventHandler,options);this.namespaces[event].splice(index,1);}});if(!this.namespaces[event].length)delete this.namespaces[event];});}}const listen=new EventListener();const debounce=(func,wait,immediate)=>{let timeout;return (...args)=>{const that=window;function later(){timeout=null;if(!immediate)func.apply(that,args);}const callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait||0);if(callNow)func.apply(that,args);};};const createEvent=(event,data)=>{let _event=null;if(window.CustomEvent)_event=new CustomEvent(event,{bubbles:true,cancelable:true,detail:data});else{_event=document.createEvent('CustomEvent');_event.initCustomEvent(event,true,true,data);}return _event;};const addClass=(el,className)=>{if(className.length===0)return;let elements=el;if(!Array.isArray(el))elements=[el];elements.forEach((element)=>{if(element.classList)element.classList.add(className);else element.className+=` ${className}`;});};const removeClass=(el,className)=>{let elements=el;if(!Array.isArray(el))elements=[el];elements.forEach((element)=>{if(element.classList)element.classList.remove(className);else{const regex=new RegExp(`(^|\\b)${className.split(' ').join('|')}(\\b|$)`,'gi');element.className=element.className.replace(regex,' ');}});};const hasClass=(el,className)=>{if(el.classList)return el.classList.contains(className);return new RegExp(`(^| )${className}( |$)`,'gi').test(el.className);};const isFunction=(val)=>val&&{}.toString.call(val)==='[object Function]';const isElement=(obj)=>obj instanceof HTMLElement||obj instanceof SVGElement;const isNumber=(value)=>{if(typeof value!=='number')return false;if(value!==Number(value))return false;if(value===Infinity||value===!Infinity)return false;return true;};const on=(event,selector,handler,opts={})=>{if(typeof handler!=='function')return;const eventHandler=(evt)=>{let $trigger=selector===document?selector:null;if(typeof selector==='string')$trigger=evt.target.closest(selector);else if(isElement(selector)&&evt.target===selector)$trigger=evt.target;else{if(isElement(selector)&&evt.currentTarget===selector)$trigger=evt.currentTarget;}if(!$trigger)return;if($trigger.nodeName==='A'){const preventDefault=typeof opts.preventDefault!=='undefined'?opts.preventDefault:true;const stopPropagation=typeof opts.stopPropagation!=='undefined'?opts.stopPropagation:true;if(preventDefault)evt.preventDefault();if(stopPropagation)evt.stopPropagation();}handler(evt);};listen.on(event,document,eventHandler,{capture:true,...opts});};const off=(event,element=document)=>{listen.off(event,element);};const ready=(fn)=>{if(document.readyState!=='loading')fn();else if(document.addEventListener)document.addEventListener('DOMContentLoaded',fn);else document.attachEvent('onreadystatechange',()=>{if(document.readyState!=='loading')fn();});};const getSelectorFromElement=(element)=>{let selector=element.getAttribute('data-target');if(!selector||selector==='#'){const hrefAttr=element.getAttribute('href');selector=hrefAttr&&hrefAttr!=='#'?hrefAttr.trim():'';}return selector;};const getTransitionDurationFromElement=(element)=>{if(!element)return 0;if(element.getAttribute('data-transition-duration'))return Number(element.getAttribute('data-transition-duration'));let transitionDuration=getComputedStyle(element)['transition-duration'];const floatTransitionDuration=parseFloat(transitionDuration);if(!floatTransitionDuration)return 0;transitionDuration=transitionDuration.split(',')[0];return parseFloat(transitionDuration)*MILLISECONDS_MULTIPLIER;};const once=(element,eventType,callback)=>{element.addEventListener(eventType,(event)=>{callback(event);},{once:true});};const emulateTransitionEnd=(element,duration)=>{let called=false;once(element,'csTransitionEnd',()=>{called=true;});function callback(){if(!called){const event=createEvent('transitionend');element.dispatchEvent(event);}}setTimeout(callback,duration);};const reflow=(element)=>element.offsetHeight;const mutationObserver={elements:[],observing:false};const mutateObserve=(element,callback,options={})=>{const MutationObserver=window.MutationObserver||window.WebKitMutationObserver;if(!MutationObserver||!element)return;const observerCheck=debounce((mutation)=>{mutationObserver.elements.forEach((elementData)=>{let _element=elementData[0];if(typeof _element==='string')_element=mutation.target.querySelectorAll(_element);const _callback=elementData[1];if(typeof _callback==='function')_callback(_element);});mutationObserver.selectors=mutationObserver.elements.filter((elementData)=>{const _options=elementData[2];return !_options.once;});if(!mutationObserver.elements.length){mutationObserver.observer.disconnect();mutationObserver.observing=false;}},100);const observerCallback=(mutationList)=>{const mutation=mutationList.find((elem)=>elem.target.isEqualNode(document.body));if(mutation&&mutation.type==='childList')observerCheck(mutation);};if(!mutationObserver.observer)mutationObserver.observer=new MutationObserver(observerCallback);if(!mutationObserver.observing){mutationObserver.observing=true;mutationObserver.observer.observe(document.body,{subtree:true,attributes:false,childList:true,characterData:false});}mutationObserver.elements.push([element,callback,options]);};const mutateObserveSelectors=(selectors,callback)=>{const _selectors=typeof selectors==='string'?[selectors]:selectors;_selectors.forEach((selector)=>{const element=document.getElementById(selector);mutateObserve(element,callback,{once:true});});};const intersectionObserver={elements:new Map()};const intersectObserve=(element,callback,options={})=>{if(!element)return;const IntersectionObserver=window.IntersectionObserver;if(!IntersectionObserver){mutateObserve(element,callback,options);return;}const observerCallback=(entries,observer)=>{entries.forEach((entry)=>{if(!entry.isIntersecting)return;const entryElement=entry.target;const entryElementConfig=intersectionObserver.elements.get(entryElement);if(!entryElementConfig)return;if(entryElementConfig.options.once){observer.unobserve(entryElement);intersectionObserver.elements.delete(entryElement);}entryElementConfig.callback(entryElement);});};if(!intersectionObserver.observer)intersectionObserver.observer=new IntersectionObserver(observerCallback,{rootMargin:'50px 0px 50px 0px'});intersectionObserver.elements.set(element,{callback,options});intersectionObserver.observer.observe(element);};const intersectObserveSelectors=(selectors,callback)=>{const _selectors=typeof selectors==='string'?[selectors]:selectors;_selectors.forEach((selector)=>{const element=document.getElementById(selector);intersectObserve(element,callback,{once:true});});};const getUUID=(prefix)=>{do prefix+=~~(Math.random()*MAX_UID);while(document.getElementById(prefix));return prefix;};const unescape=(html)=>{let returnText=html;returnText=returnText.replace(/&nbsp;/gi,' ');returnText=returnText.replace(/&amp;/gi,'&');returnText=returnText.replace(/&quot;/gi,`"`);returnText=returnText.replace(/&lt;/gi,'<');returnText=returnText.replace(/&gt;/gi,'>');return returnText;};const element=new ElementManager();var Util=Object.freeze({__proto__:null,EventListener,MAX_UID,MILLISECONDS_MULTIPLIER,TRANSITION_END,addClass,createEvent,debounce,element,emulateTransitionEnd,getSelectorFromElement,getTransitionDurationFromElement,getUUID,hasClass,intersectObserve,intersectObserveSelectors,isElement,isFunction,isNumber,listen,mutateObserve,mutateObserveSelectors,off,on,once,ready,reflow,removeClass,unescape});const DELAY=100;const DEFAULT={tries:10};const isObject=(value)=>value&&typeof value==='object'&&!Array.isArray(value);const merge=(target,...sources)=>{if(!sources.length)return target;const source=sources.shift();if(isObject(target)&&isObject(source))Object.keys(source).forEach((key)=>{if(isObject(source[key])){if(!target[key])Object.assign(target,{[key]:{}});merge(target[key],source[key]);}else Object.assign(target,{[key]:source[key]});});return merge(target,...sources);};const additionalUtils={DEBOUNCE_DELAY:100,merge,waitFor:(handler,check,delay=DELAY,options={})=>{const updatedOptions={...DEFAULT,...options};let tries=0;const interval=setInterval(()=>{if(tries>updatedOptions.tries){clearInterval(interval);return;}tries+=1;if(check()){clearInterval(interval);handler();}},delay);}};const updatedUtil={...Util,...additionalUtils};window.CommonKit=window.CommonKit||{};window.CommonKit.Util=updatedUtil;}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);const Breakpoints={xs:0,sm:481,md:768,lg:970,xl:1200};const BreakpointsUp={xs:480,sm:767,md:969,lg:1199,xl:2999};const BreakpointsOrder=Object.keys(Breakpoints);const subscribers={xs:[],sm:[],md:[],lg:[],xl:[]};class Breakpoint{static on(breakpoints,callbackFn,once=false){if(breakpoints&&typeof callbackFn==='function'){const _breakpoints=typeof breakpoints==='string'?[breakpoints]:breakpoints;_breakpoints.forEach((breakpoint)=>{subscribers[breakpoint].push({callback:callbackFn,once});});}}static getCurrentBreakpoint(){const bodyElement=document.getElementsByTagName('body')[0];const breakpointInfo=getComputedStyle(bodyElement).content.replace(/['"]+/g,'');const breakpoint=breakpointInfo.split(' ')[0];return breakpoint;}static getCurrentOrientation(){const bodyElement=document.getElementsByTagName('body')[0];const breakpointInfo=getComputedStyle(bodyElement).content.replace(/['"]+/g,'');const orientation=breakpointInfo.split(' ')[1]?breakpointInfo.split(' ')[1]:'portrait';return orientation;}static getBreakpoints(breakpoint){if(typeof breakpoint!=='undefined')return Breakpoints[breakpoint]||false;return Breakpoints;}static getBreakpointsUp(breakpoint){if(typeof breakpoint!=='undefined')return BreakpointsUp[breakpoint]||false;return BreakpointsUp;}static isLessThan(breakpoint){const breakpointIndex=BreakpointsOrder.indexOf(breakpoint);const currentBreakpointIndex=BreakpointsOrder.indexOf(this.getCurrentBreakpoint());return currentBreakpointIndex<breakpointIndex;}static isBiggerThan(breakpoint){const breakpointIndex=BreakpointsOrder.indexOf(breakpoint);const currentBreakpointIndex=BreakpointsOrder.indexOf(this.getCurrentBreakpoint());return currentBreakpointIndex>breakpointIndex;}}window.CommonKit=window.CommonKit||{};window.CommonKit.Breakpoint=Breakpoint;let breakpointCache=null;function handleLoadResizeEvent(){const breakpoint=Breakpoint.getCurrentBreakpoint();const breakpointSubscribers=subscribers[breakpoint];breakpointSubscribers&&breakpointSubscribers.forEach((subscriber)=>{if(breakpoint===breakpointCache&&subscriber.once)return;subscriber.callback();});breakpointCache=breakpoint;}window.addEventListener('load',Util__namespace.debounce(handleLoadResizeEvent,100));window.addEventListener('resize',Util__namespace.debounce(handleLoadResizeEvent,100));window.addEventListener('orientationchange',Util__namespace.debounce(handleLoadResizeEvent,100));}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class MenuHierarchical{constructor(menu){this.menu=menu;}setup(){const setupMenu=window.CommonKit.Util.debounce(()=>{if(window.CommonKit.Breakpoint.isBiggerThan('md')){const menuItems=this.menu.querySelectorAll('.menu-item--depth-1.menu-item--expanded');let subMenuItems=[];menuItems.forEach((element)=>{const elementsubMenuItems=element.querySelectorAll('li.menu-item--expanded:not(.menu-item--mobile-hidden)');if(elementsubMenuItems.length)subMenuItems=[...subMenuItems,...[].slice.call(elementsubMenuItems)];});subMenuItems.forEach((element)=>{element.querySelector('a').addEventListener('click',(event)=>{event.preventDefault();return false;});});window.removeEventListener('resize',setupMenu);window.removeEventListener('orientationchange',setupMenu);}},window.CommonKit.Util.DEBOUNCE_DELAY);window.addEventListener('resize',setupMenu);window.addEventListener('orientationchange',setupMenu);setupMenu();}static init(menu){const menuHierarchical=new MenuHierarchical(menu);menuHierarchical.setup();}}window.CS=window.CS||{};window.CS.MenuHierarchical={init:MenuHierarchical.init};}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.collapse';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const Event={SHOW:`show${EVENT_KEY}`,SHOWN:`shown${EVENT_KEY}`,HIDE:`hide${EVENT_KEY}`,HIDDEN:`hidden${EVENT_KEY}`,CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`};const ClassName={SHOW:'show',COLLAPSE:'collapse',COLLAPSING:'collapsing'};const Selector={DATA_TOGGLE:'[data-toggle="collapse"]',DATA_HIDDEN:'[data-hidden="true"]'};const Dimension={WIDTH:'width',HEIGHT:'height'};class Collapse extends ElementBase{constructor(element,config={}){super(element,config);this._setup();}static get ClassName(){return ClassName;}toggle(options={}){if(Util__namespace.hasClass(this._element,ClassName.SHOW))this.hide(options);else this.show(options);}show(options={}){if(this._isTransitioning||Util__namespace.hasClass(this._element,ClassName.SHOW))return false;this._trigger=options.trigger||this._trigger;this._beforeShow();const showEvent=Util__namespace.createEvent(Event.SHOW);this._element.dispatchEvent(showEvent);if(showEvent.defaultPrevented)return false;Util__namespace.addClass(this._element,ClassName.COLLAPSING);const maxDimension=this._getDimensionValue();this._element.style[`max-${this._config.dimension}`]=`${maxDimension}px`;this._trigger.setAttribute('aria-expanded',true);this._isTransitioning=true;const complete=()=>{Util__namespace.removeClass(this._element,ClassName.COLLAPSING);Util__namespace.addClass(this._element,ClassName.SHOW);this._isTransitioning=false;this._beforeShown();const shownEvent=Util__namespace.createEvent(Event.SHOWN);this._element.dispatchEvent(shownEvent);};const transitionDuration=Util__namespace.getTransitionDurationFromElement(this._element);Util__namespace.once(this._element,Util__namespace.TRANSITION_END,complete);Util__namespace.emulateTransitionEnd(this._element,transitionDuration);return true;}hide(options={}){if(this._isTransitioning||!Util__namespace.hasClass(this._element,ClassName.SHOW))return false;this._trigger=options.trigger||this._trigger;this._beforeHide();const hideEvent=Util__namespace.createEvent(Event.HIDE);this._element.dispatchEvent(hideEvent);if(hideEvent.defaultPrevented)return false;Util__namespace.addClass(this._element,ClassName.COLLAPSING);Util__namespace.removeClass(this._element,ClassName.SHOW);setTimeout(()=>{this._element.style[`max-${this._config.dimension}`]='';},0);this._trigger.setAttribute('aria-expanded',false);this._isTransitioning=true;const complete=()=>{Util__namespace.removeClass(this._element,ClassName.COLLAPSING);this._isTransitioning=false;this._beforeHidden();const hiddenEvent=Util__namespace.createEvent(Event.HIDDEN);this._element.dispatchEvent(hiddenEvent);};const transitionDuration=Util__namespace.getTransitionDurationFromElement(this._element);Util__namespace.once(this._element,Util__namespace.TRANSITION_END,complete);Util__namespace.emulateTransitionEnd(this._element,transitionDuration);return true;}dispose(){delete this._element[DATA_KEY];this._config=null;this._element=null;this._isTransitioning=null;}_getConfig(config){const _config=super._getConfig(config);const hasWidth=this._element.classList.contains(Dimension.WIDTH);_config.dimension=hasWidth?Dimension.WIDTH:Dimension.HEIGHT;return _config;}_setup(){if(Util__namespace.hasClass(this._element,ClassName.SHOW)){const maxDimension=this._getDimensionValue();this._element.style[`max-${this._config.dimension}`]=`${maxDimension}px`;}this._trigger=this._config.trigger||null;}_beforeShow(){}_beforeShown(){}_beforeHidden(){}_beforeHide(){}_getDimensionValue(type='scroll'){const dimension=this._config.dimension[0].toUpperCase()+this._config.dimension.slice(1);const typeDimension=`${type}${dimension}`;return this._element[typeDimension];}}Util__namespace.on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,(event)=>{const trigger=event.target.closest(Selector.DATA_TOGGLE);const selector=trigger.getAttribute('data-target');const selectors=selector.split(',');selectors.forEach((target)=>{const element=document.getElementById(target);Collapse.get(element).toggle({trigger});});});window.CommonKit=window.CommonKit||{};window.CommonKit.Collapse=Collapse;}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/collapse'),require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/collapse','../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Collapse,global.window.CommonKit.Util));})(this,(function(Collapse,Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);const DATA_KEY='cs.collapse';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const Default={toggle:true,group:''};const Event={CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`};const ClassName={SHOW:'show',COLLAPSE:'collapse',COLLAPSED:'collapsed'};const Selector={ACTIVES:'.show, .collapsing',DATA_TOGGLE:'[data-toggle="accordion"]'};class Accordion extends Collapse{dispose(){super.dispose();this._group=null;this._triggerArray=null;}static get Default(){return Default;}_setup(){super._setup();this._isTransitioning=false;this._triggerArray=[].slice.call(document.querySelectorAll(`${Selector.DATA_TOGGLE}[href="#${this._element.id}"],`+`${Selector.DATA_TOGGLE}[data-target="${this._element.id}"]`));const toggleList=[].slice.call(document.querySelectorAll(Selector.DATA_TOGGLE));for(let i=0,len=toggleList.length;i<len;i++){const elem=toggleList[i];const selector=Util__namespace.getSelectorFromElement(elem);const filterElement=[].slice.call(document.querySelectorAll(selector)).filter((foundElem)=>foundElem===this._element);if(selector!==null&&filterElement.length>0){this._selector=selector;this._triggerArray.push(elem);}}this._group=this._config.group?this._getParent():null;if(!this._config.group)this._addAriaAndCollapsedClass(this._element,this._triggerArray);}_getConfig(config){const _config=super._getConfig(config);_config.toggle=Boolean(_config.toggle);return _config;}_beforeShow(){let actives=[];let activesData;if(this._group)actives=[].slice.call(this._group.querySelectorAll(Selector.ACTIVES)).filter((elem)=>{if(typeof this._config.group==='string')return elem.getAttribute('data-group')===this._config.group;return elem.classList.contains(ClassName.COLLAPSE);});if(actives.length){activesData=actives.find((elem)=>elem.id!==this._selector)[DATA_KEY];if(activesData&&activesData._isTransitioning)return;}if(actives.length){actives.filter((elem)=>elem.id!==this._selector).forEach((selector)=>{Accordion.get(selector).hide();});if(!activesData)actives.forEach((selector)=>{selector[DATA_KEY]=null;});}if(this._triggerArray.length)this._triggerArray.forEach((elem)=>{Util__namespace.removeClass(elem,ClassName.COLLAPSED);elem.setAttribute('aria-expanded',true);});}_beforeHide(){if(this._triggerArray.length>0){for(let i=0;i<this._triggerArray.length;i++){const trigger=this._triggerArray[i];const selector=Util__namespace.getSelectorFromElement(trigger);if(selector!==null){const $elem=[].slice.call(document.querySelectorAll(selector));if(!Util__namespace.hasClass($elem,ClassName.SHOW)){Util__namespace.addClass(trigger,ClassName.COLLAPSED);trigger.setAttribute('aria-expanded',false);}}}}}_getParent(){let parent;if(Util__namespace.isElement(this._config.group))parent=this._config.group;else parent=document.querySelector(this._config.group);const selector=`[data-toggle="collapse"][data-group="${this._config.group}"]`;const children=[].slice.call(parent.querySelectorAll(selector));children.forEach((i,element)=>{this._addAriaAndCollapsedClass(this._getTargetFromElement(element),[element]);});return parent;}_addAriaAndCollapsedClass(element,triggerArray){const isOpen=Util__namespace.hasClass(element,ClassName.SHOW);if(triggerArray.length)triggerArray.forEach((trigger)=>{trigger.classList.toggle(ClassName.COLLAPSED,!isOpen);trigger.setAttribute('aria-expanded',isOpen);});}_getTargetFromElement(element){const selector=Util__namespace.getSelectorFromElement(element);return selector?document.querySelector(selector):null;}}Util__namespace.on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,(event)=>{const trigger=event.target.closest(Selector.DATA_TOGGLE);const selector=trigger.getAttribute('data-target');const selectors=selector.split(',');selectors.forEach((target)=>{const element=document.getElementById(target);Accordion.get(element).toggle({trigger});});});window.CommonKit=window.CommonKit||{};window.CommonKit.Accordion=Accordion;}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class MobileMenu{constructor(menuId){this.menuId=menuId;this.menus=[];}setupMenu(){this.mobileMenu=document.createElement('div');this.mobileMenu.id=this.menuId;this.mobileMenu.classList.add('mobile-menu','accordion','accordion--group');this.setupTypeState();this.addMenuItems();return this.mobileMenu;}addMenu(menu,options={}){if(!menu.id)return;const menuData={menu:menu.cloneNode(true),options};this.menus.push(menuData);this.menus.sort((a,b)=>{const aWeight=a.options.weight||0;const bWeight=b.options.weight||0;return aWeight-bWeight;});}setupTypeState(){const config={elements:[]};window.CS.PageState.addStateType('mobile-menu-items-ready',config,this.menuId);}addMenuItems(){const delay=100;setTimeout(()=>{this.menus.forEach((menuData)=>{const menuItems=menuData.menu.querySelectorAll('.menu-item--depth-1');if(menuItems){const wrapper=document.createElement('div');wrapper.classList.add('mobile-menu-group',`mobile-${menuData.menu.id}`);menuItems.forEach((element,index)=>{const menuId=`${menuData.menu.id}-${index}`;const accordionItem=this.buildAccordionItem(element,menuId,this.menuId);wrapper.appendChild(accordionItem);});this.mobileMenu.appendChild(wrapper);}if(menuData.options.callback)menuData.options.callback(this.mobileMenu);});window.CS.PageState.triggerUpdate('mobile-menu-items-ready',{},this.menuId);},delay);}buildAccordionItem(element,menuId,parentMenu,depth=0){element.classList.remove('col-lg-3');const accordionItem=document.createElement('div');accordionItem.classList.add('accordion__item');accordionItem.classList.add(...element.classList);const accordionHeader=document.createElement('div');accordionHeader.classList.add('accordion__header','collapsed');accordionHeader.setAttribute('data-toggle','accordion');accordionHeader.setAttribute('data-target',`${menuId}`);accordionItem.appendChild(accordionHeader);const accordionHeaderTitle=document.createElement('h4');accordionHeader.appendChild(accordionHeaderTitle);if(element.classList.contains('menu-item--expanded')){accordionHeaderTitle.innerHTML=element.firstElementChild.innerHTML;const accordionHeaderArrow=document.createElement('span');accordionHeaderArrow.classList.add('accordion__header-arrow');accordionHeader.appendChild(accordionHeaderArrow);const accordionBody=document.createElement('div');accordionBody.id=`${menuId}`;accordionBody.setAttribute('data-group',`#${parentMenu}`);accordionBody.classList.add('accordion__body','collapse');accordionItem.appendChild(accordionBody);if(depth===0){const elementSubMenuVisible=element.querySelectorAll('.menu-item--depth-2.menu-item--expanded:not(.menu-item--mobile-hidden)');if(elementSubMenuVisible.length>0){const subMenuAccordion=document.createElement('div');subMenuAccordion.id=`${menuId}-submenu`;subMenuAccordion.classList.add('accordion','accordion--group');elementSubMenuVisible.forEach((subElement,subIndex)=>{const subMenuId=`${subMenuAccordion.id}-${subIndex}`;const subMenuAccordionItem=this.buildAccordionItem(subElement,subMenuId,subMenuAccordion.id,1);subMenuAccordion.appendChild(subMenuAccordionItem);const parentAccordion=window.CommonKit.Accordion.get(accordionBody);const parentConfig='_config';const parentDimensionValue='_getDimensionValue';const parentDimension=parentAccordion[parentConfig].dimension;const body=subMenuAccordionItem.querySelector('.accordion__body');body.addEventListener('show.cs.collapse',()=>{accordionBody.style[`max-${parentDimension}`]='';});body.addEventListener('shown.cs.collapse',()=>{const maxDimension=parentAccordion[parentDimensionValue]();accordionBody.style[`max-${parentDimension}`]=`${maxDimension}px`;});});accordionBody.appendChild(subMenuAccordion);}const elementSubMenu=element.querySelectorAll('.menu-item--depth-2.menu-item--expanded.menu-item--mobile-hidden .menu');elementSubMenu.forEach((subMenu)=>{accordionBody.appendChild(subMenu);});}else{const elementSubMenu=element.querySelectorAll('.menu');elementSubMenu.forEach((subMenu)=>{accordionBody.appendChild(subMenu);});}}else{if(element.classList.contains('menu-item--account-group')){const accordionHeaderArrow=document.createElement('span');accordionHeaderArrow.classList.add('accordion__header-arrow');accordionHeader.appendChild(accordionHeaderArrow);}accordionHeaderTitle.appendChild(element.firstElementChild);}return accordionItem;}static init(menuId){const mobileMenu=new MobileMenu(menuId);return mobileMenu;}}window.CS=window.CS||{};window.CS.MobileMenu={init:MobileMenu.init};}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class FooterMenu{constructor(){this.menu=document.getElementById('footer-menu');}setup(){this.setupMobileMenu();CS.MenuHierarchical.init(this.menu);}setupMobileMenu(){this.mobileMenu=CS.MobileMenu.init('footer-mobile-menu');const setupMenu=window.CommonKit.Util.debounce(()=>{if(window.CommonKit.Breakpoint.isLessThan('lg')){this.mobileMenuWrapper=document.createElement('div');this.mobileMenuWrapper.classList.add('footer-mobile-menu-wrapper');this.menu.appendChild(this.mobileMenuWrapper);const mobileMenuElement=this.mobileMenu.setupMenu();this.mobileMenuWrapper.appendChild(mobileMenuElement);this.mobileMenu.addMenu(this.menu);window.removeEventListener('resize',setupMenu);window.removeEventListener('orientationchange',setupMenu);}},window.CommonKit.Util.DEBOUNCE_DELAY);window.addEventListener('resize',setupMenu);window.addEventListener('orientationchange',setupMenu);setupMenu();}static init(){const footerMenu=new FooterMenu();footerMenu.setup();}}FooterMenu.init();}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.modal';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const ESCAPE_KEYCODE=27;const Default={backdrop:true,keyboard:true,focus:true,show:true};const Event={HIDE:`hide${EVENT_KEY}`,HIDDEN:`hidden${EVENT_KEY}`,SHOW:`show${EVENT_KEY}`,SHOWN:`shown${EVENT_KEY}`,FOCUSIN:`focusin${EVENT_KEY}`,RESIZE:`resize${EVENT_KEY}`,CLICK_DISMISS:`click.dismiss${EVENT_KEY}`,KEYDOWN_DISMISS:`keydown.dismiss${EVENT_KEY}`,MOUSEUP_DISMISS:`mouseup.dismiss${EVENT_KEY}`,MOUSEDOWN_DISMISS:`mousedown.dismiss${EVENT_KEY}`,CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`};const ClassName={SCROLLBAR_MEASURER:'modal-scrollbar-measure',BACKDROP:'modal-backdrop',OPEN:'modal-open',FADE:'fade',SHOW:'show'};const Selector={DIALOG:'.modal__dialog',CLOSE:'.close',DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',STICKY_BOTTOM:'sticky-bottom',MODAL__CONTENT:'.modal__content',MODAL__HEADER:'.modal__header',MODAL__SUBTITLE:'.modal__sub-title',MODAL__TITLE:'.modal__title',MODAL__BODY:'.modal__body',MODAL__ACTIONS:'.modal__actions',MODAL__BOTTOM_CONTENT:'.modal__bottom-content',MODAL__SHARE:'.modal__share',MODAL_MEDIA_WRAPPER:'.modal__media-wrapper',MODAL_MEDIA_VIDEO:'.video-js',MODAL_MEDIA_SLIDER:'.slider',MODAL_MEDIA:'.modal__media',MODAL_MEDIA_INFO:'.modal__media-info',MODAL_MEDIA_INFO_TEXT:'.modal__media-info-text',MODAL_MEDIA_INFO_ACTION:'.modal__media-info-action',MODAL_POPOVER_CONTENT:'.popover-content'};class Modal extends ElementBase{constructor(element,config={}){super(element,config);this._dialog=element.querySelector(Selector.DIALOG);this._header=this._dialog?this._dialog.querySelector(Selector.MODAL__HEADER)||null:null;this._body=this._dialog?this._dialog.querySelector(Selector.MODAL__BODY)||null:null;this._close=null;this._media_wrapper=null;this._backdrop=null;this._isShown=false;this._ignoreBackdropClick=false;this._isTransitioning=false;this._setupReady=false;}getTrigger(){return this._trigger;}toggle(){return this._isShown?this.hide():this.show();}show(options={}){this._setup(options);if(this._isShown||this._isTransitioning)return;this._trigger=options.trigger||this._trigger;if(Util__namespace.hasClass(this._element,ClassName.FADE))this._isTransitioning=true;const showEvent=Util__namespace.createEvent(Event.SHOW);showEvent.relatedTarget=this._trigger;this._element.dispatchEvent(showEvent);if(this._isShown||showEvent.defaultPrevented)return;this._isShown=true;Util__namespace.addClass(document.body,ClassName.OPEN);this._setEscapeEvent();Util__namespace.on(Event.CLICK_DISMISS,Selector.DATA_DISMISS,(event)=>this.hide(event));setTimeout(()=>{this._triggerResizeEvent();},100);this._showBackdrop(()=>this._showElement());}hide(event){if(event)event.preventDefault();if(!this._isShown||this._isTransitioning)return;const hideEvent=Util__namespace.createEvent(Event.HIDE);this._element.dispatchEvent(hideEvent);if(!this._isShown||hideEvent.defaultPrevented)return;this._isShown=false;const transition=Util__namespace.hasClass(this._element,ClassName.FADE);if(transition)this._isTransitioning=true;this._setEscapeEvent();Util__namespace.listen.off(Event.FOCUSIN,document);Util__namespace.removeClass(this._element,ClassName.SHOW);Util__namespace.listen.off(Event.CLICK_DISMISS,this._element);Util__namespace.listen.off(Event.MOUSEDOWN_DISMISS,this._element);if(transition){const transitionDuration=Util__namespace.getTransitionDurationFromElement(this._element);Util__namespace.once(this._element,Util__namespace.TRANSITION_END,(evnt)=>this._hideModal(evnt));Util__namespace.emulateTransitionEnd(this._element,transitionDuration);}else this._hideModal();}static get Default(){return Default;}_setup(){if(!this._setupReady){this._setupReady=true;this._setupMedia();this._setupEventListeners();}}_getConfig(config){const _config=super._getConfig(config);this._trigger=_config.trigger?_config.trigger:null;return _config;}_setupMedia(){this._media_wrapper=this._body.querySelector(Selector.MODAL_MEDIA_WRAPPER);if(this._media_wrapper)return;this._checkMediaSlider();}_checkSpacing(){const checkSpacing=()=>{Util__namespace.removeClass(this._element,'modal-fix-height');Util__namespace.removeClass(this._element,'modal-centered');const dialogHeight=this._dialog.clientHeight;const windowHeight=window.innerHeight;if(windowHeight-dialogHeight<64){Util__namespace.addClass(this._element,'modal-fix-height');this._checkMedia(true);}if(windowHeight-dialogHeight<300)Util__namespace.addClass(this._element,'modal-centered');};window.CommonKit.Breakpoint.on(['sm','md','lg','xl'],checkSpacing);}_checkMediaSlider(){this._mediaSlider=this._body.querySelector(Selector.MODAL_MEDIA_SLIDER);if(!this._mediaSlider)return;window.CommonKit.Slider.get(this._mediaSlider).load();Util__namespace.addClass(this._element,'modal--media-slider');}_checkMedia(checkOnly=false){if(this._media_wrapper!==null&&!this._element.contains(this._media_wrapper))return;this._dialog.style['max-width']='';this._checkMediaVideo(this._media_wrapper,checkOnly);this._checkMediaInfo(this._media_wrapper,checkOnly);this._checkMediaSpace(checkOnly);}_checkMediaSpace(checkOnly=false){const checkMediaSpace=()=>{if(!this._media_wrapper)return;this._dialog.style['max-width']='';const xsSize=window.CommonKit.Breakpoint.getBreakpointsUp('xs');if(window.innerHeight<xsSize)return;let smallestMedia;const media=this._media_wrapper.querySelector(Selector.MODAL_MEDIA);if(media){const mediaChild=media.children[0];const mediaChildW=mediaChild.clientWidth;if(!smallestMedia||mediaChildW<smallestMedia){smallestMedia=mediaChildW;const mediaInfo=this._media_wrapper.querySelector(Selector.MODAL_MEDIA_INFO);const mediaInfoW=mediaInfo?mediaInfo.clientWidth:0;const smallestWidth=smallestMedia+mediaInfoW;if(smallestWidth>0&&this._dialog.clientWidth>smallestWidth+2)this._dialog.style['max-width']=`${smallestWidth}px`;}}};if(checkOnly)checkMediaSpace();else window.CommonKit.Breakpoint.on(['xs','sm','md','lg','xl'],checkMediaSpace);}_checkMediaVideo(element,checkOnly=false){if(!element)return;const mediaVideo=element.querySelector(Selector.MODAL_MEDIA_VIDEO);if(!mediaVideo)return;Util__namespace.addClass(element,'modal--media-video');const media=element.querySelector(Selector.MODAL_MEDIA);const checkVideo=()=>{media.style['max-width']='';media.style['margin-left']='';const mediaHeight=media.clientHeight;const updateMediaWidth=mediaHeight*(16/9);if(updateMediaWidth>0)media.style['max-width']=`${updateMediaWidth}px`;const xsSize=window.CommonKit.Breakpoint.getBreakpointsUp('xs');if(window.innerHeight<xsSize){const elementWidth=element.clientWidth;if(elementWidth>updateMediaWidth)media.style['margin-left']=`${(elementWidth-updateMediaWidth)/2}px`;}};if(checkOnly)checkVideo();else window.CommonKit.Breakpoint.on(['xs','sm','md','lg','xl'],checkVideo);}_checkMediaInfo(element,checkOnly=false){if(!element)return;const mediaInfo=element.querySelector(Selector.MODAL_MEDIA_INFO);if(!mediaInfo)return;Util__namespace.addClass(element,'modal--media-info');const media=element.querySelector(Selector.MODAL_MEDIA);const mediaInfoText=mediaInfo.querySelector(Selector.MODAL_MEDIA_INFO_TEXT);const mediaInfoAction=mediaInfo.querySelector(Selector.MODAL_MEDIA_INFO_ACTION);const checkRegularFull=()=>{Util__namespace.removeClass(mediaInfo,'scroll-box');mediaInfoText.style['max-height']='';const dialogHeight=this._dialog.clientHeight;const headerHeight=this._header.clientHeight;let availableHeight=dialogHeight-headerHeight-media.clientHeight-24;if(availableHeight<mediaInfo.clientHeight){let mediaInfoActionHeight=0;if(mediaInfoAction)mediaInfoActionHeight=mediaInfoAction.clientHeight;availableHeight=availableHeight-mediaInfoActionHeight-25;Util__namespace.addClass(mediaInfo,'scroll-box');mediaInfoText.style['max-height']=`${availableHeight}px`;}};const checkRegular=()=>{Util__namespace.removeClass(mediaInfo,'scroll-box');mediaInfoText.style['max-height']='';if(mediaInfoText.clientHeight>120){Util__namespace.addClass(mediaInfo,'scroll-box');mediaInfoText.style['max-height']='120px';}};const checkHorizontal=()=>{Util__namespace.removeClass(mediaInfo,'scroll-box');mediaInfoText.style['max-height']='';const mediaInfoTextHeight=mediaInfoText.clientHeight;let mediaInfoActionHeight=0;if(mediaInfoAction)mediaInfoActionHeight=mediaInfoAction.clientHeight;const availableHeight=media.clientHeight-mediaInfoActionHeight-24;if(availableHeight<mediaInfoTextHeight){Util__namespace.addClass(mediaInfo,'scroll-box');mediaInfoText.style['max-height']=`${availableHeight}px`;}};const checkMediaInfoMobile=()=>{checkRegularFull();};const checkMediaInfoTablet=()=>{if(window.CommonKit.Breakpoint.getCurrentOrientation()==='landscape')checkHorizontal();else checkRegular();};const checkMediaInfoDesktop=()=>{checkHorizontal();};if(checkOnly)switch(window.CommonKit.Breakpoint.getCurrentBreakpoint()){case 'xs':checkMediaInfoMobile();break;case 'sm':case 'md':checkMediaInfoTablet();break;default:checkMediaInfoDesktop();break;}else{window.CommonKit.Breakpoint.on('xs',checkMediaInfoMobile);window.CommonKit.Breakpoint.on(['sm','md'],checkMediaInfoTablet);window.CommonKit.Breakpoint.on(['lg','xl'],checkMediaInfoDesktop);}}_showElement(){const transition=Util__namespace.hasClass(this._element,ClassName.FADE);if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)document.body.appendChild(this._element);this._element.style.display='flex';this._element.removeAttribute('aria-hidden');this._element.scrollTop=0;if(transition)Util__namespace.reflow(this._element);Util__namespace.addClass(this._element,ClassName.SHOW);if(this._config.focus)this._enforceFocus();const shownEvent=Util__namespace.createEvent(Event.SHOWN);shownEvent.relatedTarget=this._trigger;const transitionComplete=()=>{if(this._config.focus)this._element.focus();this._isTransitioning=false;this._element.dispatchEvent(shownEvent);};if(transition){const transitionDuration=Util__namespace.getTransitionDurationFromElement(this._dialog);Util__namespace.once(this._dialog,Util__namespace.TRANSITION_END,transitionComplete);Util__namespace.emulateTransitionEnd(this._dialog,transitionDuration);}else transitionComplete();}_enforceFocus(){Util__namespace.listen.off(Event.FOCUSIN,document);Util__namespace.listen.on(Event.FOCUSIN,document,(event)=>{if(document!==event.target&&this._element!==event.target&&!this._element.hasChildNodes(event.target))this._element.focus();});}_setEscapeEvent(){if(this._isShown&&this._config.keyboard)Util__namespace.listen.on(Event.KEYDOWN_DISMISS,this._element,(event)=>{if(event.which===ESCAPE_KEYCODE){event.preventDefault();this.hide();}});else{if(!this._isShown)Util__namespace.listen.off(Event.KEYDOWN_DISMISS,this._element);}}_hideModal(){this._element.style.display='none';this._element.setAttribute('aria-hidden',true);this._isTransitioning=false;this._showBackdrop(()=>{Util__namespace.removeClass(document.body,ClassName.OPEN);const hiddenEvent=Util__namespace.createEvent(Event.HIDDEN);this._element.dispatchEvent(hiddenEvent);});}_removeBackdrop(){if(this._backdrop){this._backdrop.parentNode.removeChild(this._backdrop);this._backdrop=null;}}_showBackdrop(callback){const animate=Util__namespace.hasClass(this._element,ClassName.FADE)?ClassName.FADE:'';if(this._isShown&&this._config.backdrop){this._backdrop=document.createElement('div');this._backdrop.className=ClassName.BACKDROP;Util__namespace.addClass(this._backdrop,animate);document.body.appendChild(this._backdrop);Util__namespace.listen.on(Event.CLICK_DISMISS,this._element,(event)=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=false;return;}if(event.target!==event.currentTarget)return;if(this._config.backdrop==='static')this._element.focus();else this.hide();});if(animate)Util__namespace.reflow(this._backdrop);Util__namespace.addClass(this._backdrop,ClassName.SHOW);if(!callback)return;if(!animate){callback();return;}const backdropTransitionDuration=Util__namespace.getTransitionDurationFromElement(this._backdrop);Util__namespace.once(this._backdrop,Util__namespace.TRANSITION_END,callback);Util__namespace.emulateTransitionEnd(this._backdrop,backdropTransitionDuration);}else if(!this._isShown&&this._backdrop){Util__namespace.removeClass(this._backdrop,ClassName.SHOW);const callbackRemove=()=>{this._removeBackdrop();if(callback)callback();};if(Util__namespace.hasClass(this._element,ClassName.FADE)){const backdropTransitionDuration=Util__namespace.getTransitionDurationFromElement(this._backdrop);Util__namespace.once(this._backdrop,Util__namespace.TRANSITION_END,callbackRemove);Util__namespace.emulateTransitionEnd(this._backdrop,backdropTransitionDuration);}else callbackRemove();}else{if(callback)callback();}}_setupEventListeners(){this._checkMedia();this._checkSpacing();}_triggerResizeEvent(){const resizeEvent=document.createEvent('UIEvents');resizeEvent.initUIEvent('resize',true,false,window,0);window.dispatchEvent(resizeEvent);}build(config={}){this.buildSetup();this.buildElement(config);this.buildContainers(config);this.buildHeader(config);this.buildBody(config);this.buildActions(config);return this._element;}update(config={attributes:null,title:null,subtitle:null,share:null,popover_content:null,media:null,info:null}){this.buildElement(config);this.buildContainers(config);this.buildHeader(config);this.buildBody(config);this.triggerResizeEvents(config);}buildSetup(){this._element.setAttribute('class','');this._element.classList.add('modal','fade');this._dialog=null;this._body=null;this._close=null;this._header=null;this._subtitle=null;this._share=null;this._popover_content=null;this._media_wrapper=null;this._media=null;this._media_info=null;this._title=null;}buildElement(config){if(config.attributes)if(config.attributes.class)this._element.classList.add(...config.attributes.class);}buildContainers(config){this._dialog=this._element.querySelector(Selector.DIALOG);if(!this._dialog||config.dialog&&config.dialog.rebuild&&config.dialog.rebuild===true){this._dialog=Util__namespace.element.create('div',{class:'modal__dialog'});this._element.innerHTML='';this._element.prepend(this._dialog);}else{this._header=this._dialog.querySelector(Selector.MODAL__HEADER);this._close=this._dialog.querySelector(Selector.CLOSE);this._body=this._dialog.querySelector(Selector.MODAL__BODY);this._actions=this._dialog.querySelector(Selector.MODAL__ACTIONS);}if(!this._close){this._close=Util__namespace.element.create('button',{class:['close'],'data-dismiss':'modal'});this._dialog.prepend(this._close);}if(!this._header){this._header=Util__namespace.element.create('div',{class:'modal__header'});this._dialog.insertBefore(this._header,this._close.nextSibling);}if(!this._body){this._body=Util__namespace.element.create('div',{class:'modal__body'});this._dialog.insertBefore(this._body,this._header.nextSibling);}if(!this._actions&&config.actions){this._actions=Util__namespace.element.create('div',{class:'modal__actions'});this._dialog.insertBefore(this._actions,this._body.nextSibling);}this._header.innerHTML='';this._body.innerHTML='';if(config.media)if(config.info&&config.info!==false){this._media_wrapper=Util__namespace.element.create('div',{class:'modal__media-wrapper'});this._body.prepend(this._media_wrapper);}else this._media_wrapper=null;}buildHeader(config={}){if(config.title&&config.title!==false){if(config.title.replace&&config.title.replace instanceof Element)this._title=config.title.replace;else{const titleTag=config.title&&config.title.tag||'h3';const titleAttributes={content:config.title.text,class:'modal__title'};this._title=Util__namespace.element.create(titleTag,titleAttributes);}this._header.prepend(this._title);}else{this._title=null;this._subtitle=null;this._share=null;}if(config.subtitle&&config.subtitle!==false||config.share&&config.share!==false){if(config.subtitle&&config.subtitle.replace&&config.subtitle.replace instanceof Element)this._subtitle=config.subtitle.replace;else{const subTitleTag=config.title.tag||'h3';const subTitle=config.subtitle.text||'';this._subtitle=Util__namespace.element.create(subTitleTag,{class:'modal__sub-title'},subTitle);}this._header.prepend(this._subtitle);}this.buildShare(config);}buildBody(config={}){if(config.body){if(config.body instanceof Element)this._body.prepend(config.body);}else this.buildMedia(config);}buildMedia(config={}){if(config.media&&config.media!==false){this._element.classList.add('modal--media');if(config.media&&config.media.replace instanceof Element)this._media=config.media.replace;else{this._media=Util__namespace.element.create('div',{class:'modal__media'});const empty=Util__namespace.element.create('div',{class:['video-js','vjs','vjs-fluid']});this._media.appendChild(empty);}if(this._media_wrapper){this._media_wrapper.prepend(this._media);this.buildMediaInfo(config);}else this._body.prepend(this._media);}else{this._media=null;this._media_info=null;}}buildActions(config={}){if(config.actions&&config.actions!==false){let actions;if(!Array.isArray(config.actions))actions=config.actions;else actions=config.actions;actions.forEach((action)=>{let actionElement;if(action.replace&&action.replace instanceof Element)actionElement=action.replace;else{const tag=action.tag||'button';actionElement=Util__namespace.element.create(tag,action.attributes||{});}this._actions.prepend(actionElement);});}}buildShare(config={}){const popOverId=`modal-share-popover-${Date.now()}`;if(config.share&&config.share!==false||config.popover_content&&config.popover_content!==false){if(config.share&&config.share.replace&&config.share.replace instanceof Element)this._share=config.share.replace;else this._share=Util__namespace.element.create('button',{class:'modal__share','data-toggle':'popover','data-content':`#${popOverId}`,'data-trigger':'click',content:config.share.text||'More'});this._header.insertBefore(this._share,this._title.nextSibling);}else{this._share=null;this._popover_content=null;}if(this._share&&config.popover_content&&config.popover_content!==false){if(config.popover_content.replace&&config.popover_content.replace instanceof Element)this._popover_content=config.popover_content.replace;else{const popoverContent=config.popover_content.text||'<div class="social-share-icons social-share-icons--horizontal"></div>';this._popover_content=Util__namespace.element.create('div',{id:popOverId,class:['popover-content']},popoverContent);const empty=Util__namespace.element.create('div',{class:['social-share-icons']});this._popover_content.appendChild(empty);}this._header.insertBefore(this._popover_content,this._share.nextSibling);}}buildMediaInfo(config={}){if(this._media&&this._media_wrapper&&config.info&&config.info!==false){if(config.info.replace&&config.info.replace instanceof Element)this._media_info=config.info.replace;else{this._media_info=Util__namespace.element.create('div',{class:'modal__media-info'});const mediaInfoTextElement=Util__namespace.element.create('div',{class:'modal__media-info-text'});this._media_info.appendChild(mediaInfoTextElement);}this._media.insertAdjacentElement('afterend',this._media_info);this._media_wrapper.classList.add('modal--media-info');}}triggerResizeEvents(config={}){if(this._media_info||config.info){this._setupMedia();this._checkMedia();}else{if(this._mediaSlider||config.mediaSlider)this._checkMediaSlider();}this._triggerResizeEvent();}static create(attributes={},tag='div',config={}){const defaultAttributes={class:['modal','fade'],role:'dialog',tabindex:'-1'};const modalAttributes={...defaultAttributes,...attributes};if(attributes.class)modalAttributes.class=[...defaultAttributes.class,...attributes.class];const instance=super.create(modalAttributes,tag,config);return instance;}}Util__namespace.on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,(event)=>{const trigger=event.target.closest(Selector.DATA_TOGGLE);const selector=Util__namespace.getSelectorFromElement(trigger);if(selector){const element=document.getElementById(selector);Modal.get(element).show({trigger});}});window.CommonKit=window.CommonKit||{};window.CommonKit.Modal=Modal;document.addEventListener('show.cs.modal',(event)=>{const {target,relatedTarget}=event;const {loadUrl,loadInline}=relatedTarget.dataset;if(loadUrl);else{if(loadInline){const modalBody=target.querySelector('.modal__body');while(modalBody.firstChild)modalBody.removeChild(modalBody.firstChild);const inlineElement=document.querySelector(loadInline);modalBody.appendChild(inlineElement.cloneNode(true));}}});window.CommonKit.Modal.triggerResizeEvent=()=>{const resizeEvent=document.createEvent('UIEvents');resizeEvent.initUIEvent('resize',true,false,window,0);window.dispatchEvent(resizeEvent);};const updateTitle=(modal,config)=>{if(config.title){const titleElement=modal.querySelector('.modal__title');if(typeof config.title==='string')config.title={content:config.title};if(config.title.content)titleElement.innerHTML=config.title.content;}};window.CommonKit.Modal.update=(modal,config={})=>{if(config.subTitle){const subTitleElement=modal.querySelector('.modal__sub-title');subTitleElement.innerHTML=config.subTitle;}updateTitle(modal,config);const bodyElement=modal.querySelector('.modal__body');if(config.body){if(config.body instanceof Element)config.body={content:config.body};config.body.method=config.body.method||'replace';if(config.body.method==='replace')while(bodyElement.firstChild)bodyElement.firstChild.remove();bodyElement.appendChild(config.body.content);}const options=config.options||{};if(options.scrollBody)setTimeout(()=>{bodyElement.firstElementChild.scrollIntoView(true);},0);window.CommonKit.Modal.triggerResizeEvent();};}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class Loader{static build(options={}){const loaderClass=['loader'];if(options.size)loaderClass.push(`loader--${options.size}`);if(options.centered)loaderClass.push('loader--centered');const divElement=document.createElement('div');const rootDivElement=divElement.cloneNode();const loaderElement=divElement.cloneNode();loaderElement.classList.add(...loaderClass);loaderElement.appendChild(divElement.cloneNode());loaderElement.appendChild(divElement.cloneNode());loaderElement.appendChild(divElement.cloneNode());rootDivElement.appendChild(loaderElement);if(options.cover){const coverElement=divElement.cloneNode();coverElement.classList.add('loader-cover');if(options.container)options.container.parentElement.appendChild(coverElement);else rootDivElement.appendChild(coverElement);}if(options.container)options.container.appendChild(rootDivElement);return rootDivElement;}}window.CommonKit=window.CommonKit||{};window.CommonKit.Loader=Loader;}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const progress={parent:document.body,delay:50};const cache={};class Ajax{constructor(options){const cacheDelay=200;this.selectors=options.selectors;this.url=options.url;this.method=options.method||'GET';this.body=options.body||null;this.external=options.external||false;this.progress=options.progress;this.preProcess=options.preProcess;this.cache=(options.cache||false)&&this.method==='GET';this.cacheDelay=options.cacheDelay||cacheDelay;this.cacheReset=options.cacheReset||false;this.insertDelay=options.insertDelay||0;this.libraryDelay=options.libraryDelay||0;}static ajax(options){const ajax=new Ajax(options);ajax.setup();return ajax;}setup(){if(!this.external){if(this.url.charAt(0)==='/')this.url=this.url.substr(1);this.url=`/${drupalSettings.path.pathPrefix}${this.url}`;}this.cacheKey=`${this.method}_${this.url}`;if(this.cacheReset&&cache[this.cacheKey]){delete cache[this.cacheKey];this.cacheReset=false;}this.progress=this.progress||{};this.progress.options=this.progress.options||{};this.progress.parent=this.progress.parent||document.body;this.progress.delay=this.progress.delay||progress.delay;}execute(){this.progress.element=CommonKit.Loader.build(this.progress.options);this.progress.parent.appendChild(this.progress.element);let cacheDelay=0;let result;if(this.cache&&cache[this.cacheKey]){result=cache[this.cacheKey];cacheDelay=this.cacheDelay;}else{let fetchUrl=this.url;const requestState=`ajax_page_state[libraries]=${drupalSettings.ajaxPageState.libraries}`;if(this.method==='GET'){const hasQuery=this.url.indexOf('?');fetchUrl+=hasQuery<0?'?':'&';fetchUrl+=requestState;}else{if(this.method==='POST'){this.body=this.body||'';if(this.body)this.body+='&';this.body+=requestState;}}const fetchOptions={method:this.method,headers:{'Content-Type':'application/x-www-form-urlencoded'},body:this.body};result=fetch(fetchUrl,fetchOptions).then((response)=>response.json()).then((data)=>{if(this.preProcess)this.preProcess(data);data.forEach((row)=>{if(row&&row.command)if(row.command==='settings')this.handleSettings(row);else if(row.command==='add_css')this.handleAddCss(row);else{if(row.command==='add_js'||row.command==='insert')this.handleInsertLibrary(row);}});return data;});if(this.cache)cache[this.cacheKey]=result;}result=result.then((data)=>new Promise((resolve)=>{setTimeout(()=>resolve(data),this.insertDelay||cacheDelay);})).then((data)=>{this.selectorIndex=0;data.forEach((row)=>{if(row.command)if(row.command==='insert')this.handleInsert(row);});setTimeout(()=>{this.progress.element.parentNode.removeChild(this.progress.element);},this.progress.delays);return data;});return result;}handleSettings(data){if(data.merge)drupalSettings=window.CommonKit.Util.merge(drupalSettings,data.settings);}handleAddCss(data){this.doAppend(document.body,'link',data.data);}handleInsertLibrary(data){if(data.command==='add_js')this.doAppend(document.body,'script',data.data);}handleInsert(data){const content=new DOMParser().parseFromString(data.data,'text/html');if(data.method==='append'&&data.selector==='body')return;if(this.selectors[this.selectorIndex]){const selector=this.selectors[this.selectorIndex];const newSelector=this.doReplace(selector,content.body);this.selectors[this.selectorIndex]=newSelector;this.selectorIndex+=1;}}doAppend(parent,tag,data){data.forEach((dataScript,index)=>{const append=()=>{const script=document.createElement(tag);Object.keys(dataScript).forEach((key)=>{script[key]=dataScript[key];});parent.appendChild(script);};if(tag==='script'&&this.libraryDelay){const timeout=this.libraryDelay*index;setTimeout(()=>{append();},timeout);}else append();});}doReplace(selector,content){const contentElement=content.firstChild;while(content.firstChild&&content.firstChild instanceof Element){if(selector instanceof Element&&content.firstChild instanceof Element)selector.insertAdjacentElement('beforebegin',content.firstChild);if(content.removeChild&&content.firstChild)content.removeChild(content.firstChild);}if(selector.parentNode instanceof Element)selector.parentNode.removeChild(selector);return contentElement;}}window.CS=window.CS||{};window.CS.Ajax={ajax:Ajax.ajax};}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class PageState{constructor(){this.types={};this.state={};this.subscribers={};}addStateType(type,config,id='default'){if(!this.types[type])this.types[type]={};this.types[type][id]=config;this.types[type][id].state=this.types[type][id].state||{};this.types[type][id].state={...this.state,...this.types[type][id].state};}updateStateType(type,config,id='default'){if(this.types[type]&&this.types[type][id]){if(config.elements)config.elements=[...this.types[type][id].elements,...config.elements];if(config.arguments)config.arguments={...this.types[type][id].arguments,...config.arguments};this.types[type][id]={...this.types[type][id],...config};}}getStateType(type,id='default'){return this.types[type]&&this.types[type][id];}getState(key){return this.state[key]||false;}updateState(state){this.state={...this.state,...state};}updateTypeState(type,state={},id='default'){this.types[type][id].state={...this.types[type][id].state,...state};this.types[type][id].progress={...this.types[type][id].progress,...state.progress};if(state.arguments)this.updateTypeStateArgumtens(type,state,id);}updateTypeStateArgumtens(type,state,id){Object.keys(state.arguments).forEach((argument)=>{if(typeof state.arguments[argument]==='undefined')return;const value=state.arguments[argument];if(!this.types[type][id].arguments[argument])return;if(!this.types[type][id].arguments[argument].value){this.types[type][id].arguments[argument].value=value;return;}if(Array.isArray(this.types[type][id].arguments[argument].value)){let values=[];if(!Array.isArray(value))values.push(value);else values=value;if(values.length===0)this.types[type][id].arguments[argument].value=[];else if(this.types[type][id].arguments[argument].value.length===0)this.types[type][id].arguments[argument].value=values;else values.forEach((val)=>{const index=this.types[type][id].arguments[argument].value.indexOf(val);if(index>-1)this.types[type][id].arguments[argument].value.splice(index,1);else{this.types[type][id].arguments[argument].value.push(val);this.types[type][id].arguments[argument].value.sort();}});}else if(this.types[type][id].arguments[argument].value===state.arguments[argument])this.types[type][id].arguments[argument].value='';else this.types[type][id].arguments[argument].value=state.arguments[argument];});}triggerUpdate(type,state={},id='default'){if(!this.getStateType(type,id))return null;this.updateState(state);this.updateTypeState(type,state,id);const typeState=this.types[type][id];if(typeState.process)typeState.process(id,typeState);let ajax;if(typeState.url)ajax=this.setupAjaxCall(typeState).execute().then((data)=>{this.updateBrowserUrl(type,id);this.notifyUpdateState(type,id);return data;});else this.notifyUpdateState(type,id);return ajax;}subscribeUpdateState(type,callback){if(!this.subscribers[type])this.subscribers[type]=[];this.subscribers[type].push(callback);}updateBrowserUrl(type,id){const typeState=this.types[type][id];if(typeState&&typeState.browserUrl){const url=this.getStateTypeUrl(typeState.browserUrl,typeState);window.history.replaceState({},'',url);}}notifyUpdateState(type,id){if(this.subscribers[type])this.subscribers[type].forEach((callback)=>{callback(id);});}setupAjaxCall(typeState){const url=this.getStateTypeUrl(typeState.url,typeState);const defaultProgress={parent:typeState.elements[0].parentElement,options:{centered:true,cover:true}};const progress={...defaultProgress,...typeState.progress};const ajax=window.CS.Ajax.ajax({selectors:typeState.elements,url,method:typeState.method||'GET',body:typeState.body||'',preProcess:typeState.preProcess||null,progress,cache:typeState.cache||false,cacheReset:typeState.cacheReset||false,insertDelay:typeState.insertDelay||0,libraryDelay:typeState.libraryDelay||0});return ajax;}getStateTypeUrl(typeStateUrl,typeState){let url=typeStateUrl;const urlParams=url.match(/{\w+}/g);if(urlParams)urlParams.forEach((param)=>{const paramName=param.slice(1,-1);if(typeof typeState.state[paramName]!=='undefined'&&typeState.state[paramName])url=url.replace(/{\w+}/,typeState.state[paramName]);else if(typeof this.state[paramName]!=='undefined'&&this.state[paramName])url=url.replace(/{\w+}/,this.state[paramName]);else url=url.replace(/\/{\w+}/,'');});if(typeState.arguments){const urlArguments=Object.keys(typeState.arguments).sort((a,b)=>{const aOrder=typeState.arguments[a].order||0;const bOrder=typeState.arguments[b].order||0;return aOrder-bOrder;});urlArguments.forEach((argument)=>{if(typeState.arguments[argument]&&typeState.arguments[argument].value){let value='';if(Array.isArray(typeState.arguments[argument].value))value+=typeState.arguments[argument].value.join('+');else value+=typeState.arguments[argument].value;if(value){if(typeState.arguments[argument].label)value=`${typeState.arguments[argument].label}/${value}`;url+=`/${value}`;}}});}return url;}}window.CS=window.CS||{};window.CS.PageState=new PageState();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class DonateClassyModal{setup(){this.setupElements();this.setupModal();this.setupTypeState();this.showModal();}setupElements(){this.element=document.getElementById('donate-classy-modal');}setupModal(){this.modal=document.getElementById('donate-classy-modal-modal');if(!this.modal){const attributes={id:'donate-classy-modal-modal'};this.modalInstance=window.CommonKit.Modal.create(attributes);const config={body:this.element};this.modal=this.modalInstance.build(config);document.body.appendChild(this.modal);this.modal.addEventListener('show.cs.modal',()=>{this.siteClassyFormLoad();});}}setupTypeState(){const config={url:'/ajax/site/donate/classy',elements:[this.element]};window.CS.PageState.addStateType('donate_classy',config);}showModal(){const donateLink=document.getElementById('donate-user-menu-link');if(donateLink)donateLink.addEventListener('click',(event)=>{event.preventDefault();this.modalInstance.show({trigger:this.element});});}siteClassyFormLoad(){this.modal.classList.add('loading');const modalBody=this.modal.querySelector('.modal__body');const url='/ajax/site/donate/classy';window.CS.Ajax.ajax({selectors:[this.element],url,progress:{parent:modalBody,options:{size:'lg',centered:true}}}).execute();}static init(){const donateClassyModal=new DonateClassyModal();donateClassyModal.setup();}}DonateClassyModal.init();}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.social-share-icons';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const EVENT_TIMEOUT=100;const Selector={DATA_TOGGLE:'[data-toggle="social-share-icons"]'};const Event={CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`,KEYUP_DATA_API:`keyup${EVENT_KEY}${DATA_API_KEY}`};const ENTER_KEYCODE=13;const SPACE_KEYCODE=32;class SocialShareIcons extends ElementBase{static get Selector(){return Selector;}load(){if(!this._loaded){this._loaded=true;this._setup();}}_setup(){this.shareItems=this._element.querySelectorAll('.social-share-icons__item-link');if(!this.shareItems)return;this.setupLinkEvents();if(this._element.classList.contains('social-share-icons--sticky'))this.setupSticky();}setupLinkEvents(){this.shareItems.forEach((item)=>{this.addLinkEvents(item);});}setupSticky(){this.fixedTop=this._element.dataset.fixed_top;this.winWidth=window.innerWidth;const firstItem=this._element.querySelector('.social-share-icons__item');this.vertWidth=firstItem.offsetWidth+30;this.content=document.getElementById(this._element.dataset.content);this.topEdge=document.getElementById(this._element.dataset.top);this.bottomEdge=document.getElementById(this._element.dataset.bottom);if(this.fixedTop){this._element.style.position='fixed';this._element.style.top=this.fixedTop;this._element.style.left='0px';this._checkOfsets();}else{if(this.content){this.leftPos=this.content.getBoundingClientRect().left;this.siteWidth=this.content.offsetWidth;this.content.style.position='relative';}else{this.siteWidth=this._element.parentNode.offsetWidth;this._element.style.position='fixed';this._element.style.top=`${this.topEdge}px`;this._element.style.left=`${this.leftPos}px`;}if(this.winWidth>=this.siteWidth+this.vertWidth)this._element.classList.add('show-left');}this._addEventListenersSticky();}handleLinkEvent(event){if(this.isValidEvent(event))this.triggerShare(event.target);}addLinkEvents(itemLink){Util__namespace.listen.off(`${Event.CLICK_DATA_API} ${Event.KEYUP_DATA_API}`,itemLink);Util__namespace.listen.on(`${Event.CLICK_DATA_API} ${Event.KEYUP_DATA_API}`,itemLink,Util__namespace.debounce((event)=>this.handleLinkEvent(event),EVENT_TIMEOUT));}isValidEvent(event){let valid=false;if(event.type==='click')valid=true;else{if(event.type==='keyup')if(event.keyCode===ENTER_KEYCODE||event.keyCode===SPACE_KEYCODE)valid=true;}return valid;}triggerShare(itemLink){const {url,copy,windowId}=itemLink.dataset;const target=itemLink.getAttribute('target');const windowSize=itemLink.dataset.window_size;if(windowId==='print-share-dialog')window.print();else if(copy==='1'){navigator.clipboard.writeText(url);return false;}else if(target==='_blank'){window.open(url,'_blank');return false;}else{if(url){const mailto=/^mailto:/;if(mailto.test(url))window.location.href=url;else window.open(url,windowId,windowSize);return false;}}return false;}_checkOfsets(){const iconsTop=parseFloat(this.fixedTop)/100.0*window.screen.height;const iconsHeight=this._element.offsetHeight;let topEdge=0;let bottomEdge=document.body.offsetHeight;if(this.topEdge){topEdge=window.scrollY+this.topEdge.getBoundingClientRect().top;topEdge-=iconsTop;}if(this.bottomEdge){const bottomEdge1=window.scrollY+this.bottomEdge.getBoundingClientRect().top;const bottomEdge2=iconsTop+iconsHeight;bottomEdge=bottomEdge1-bottomEdge2;}const pageTop=window.pageYOffset;if(pageTop>=topEdge&&pageTop<bottomEdge)this._element.style.display='block';else this._element.style.display='none';}_addEventListenersSticky(){if(this.fixedTop)this._addEventListenerFollowFixedScroll();else{this._addEventListenerFollowWidth();this._addEventListenerFollowScroll();}}_addEventListenerFollowFixedScroll(){const followFixedScroll=()=>{this._checkOfsets();};window.addEventListener('scroll',Util__namespace.debounce(followFixedScroll,100));}_addEventListenerFollowWidth(){const followWidth=()=>{const winWidth=window.innerWidth;let siteWidth=this._element.parentNode.offsetWidth;this._element.classList.remove('show-left');if(this.content)siteWidth=this.content.offsetWidth;if(winWidth>=siteWidth+this.vertWidth)this._element.classList.add('show-left');else this._element.classList.remove('show-left');};window.addEventListener('resize',Util__namespace.debounce(followWidth,100));}_addEventListenerFollowScroll(){const followScroll=()=>{const topEdgePadding=48;const iconsTop=this._element.getBoundingClientRect().top+window.scrollY;const iconsHeight=this._element.offsetHeight;const topPos=topEdgePadding;let leftPos=this.leftPos;let topEdge=topEdgePadding+window.scrollY;let bottomEdge=document.body.offsetHeight+iconsTop+iconsHeight;if(this.content){leftPos=this.content.getBoundingClientRect().left;topEdge+=this.content.getBoundingClientRect().top;}if(this.topEdge)topEdge+=this.topEdge.getBoundingClientRect().top+this.topEdge.offsetHeight+topEdgePadding;if(this.bottomEdge)bottomEdge=this.bottomEdge.getBoundingClientRect().top;const pageTop=window.pageYOffset;if(pageTop>=topEdge&&pageTop<bottomEdge-iconsTop-iconsHeight){this._element.style.position='fixed';this._element.style.top=`${topPos}px`;this._element.style.left=`${leftPos}px`;}else{this._element.style.position='';this._element.style.top='';this._element.style.left='';}};window.addEventListener('scroll',Util__namespace.debounce(followScroll,100));}}window.CommonKit=window.CommonKit||{};window.CommonKit.SocialShareIcons=SocialShareIcons;const socialShareIconsUpdate=(elements)=>{elements.forEach((element)=>{const popOver=element['cs.popover'];if(popOver){const shareIcons=popOver.tippy.popper.querySelector('[data-toggle="social-share-icons"]');const socialShare=SocialShareIcons.get(shareIcons);socialShare.load();}});};const socialShareIconsSubscribe=()=>{const settings=drupalSettings.commonKit&&drupalSettings.commonKit.socialShareIcons;if(settings&&settings.selectors)SocialShareIcons.subscribe(Object.keys(settings.selectors));};socialShareIconsSubscribe();const config={elements:[]};window.CS.PageState.addStateType('ck-social-share-icons-subscribe',config);window.CS.PageState.subscribeUpdateState('ck-social-share-icons-subscribe',()=>{socialShareIconsSubscribe();});window.CS.PageState.addStateType('ck-social-share-icons-update',config);window.CS.PageState.subscribeUpdateState('ck-social-share-icons-update',()=>{const state=window.CS.PageState.getStateType('ck-social-share-icons-update');socialShareIconsUpdate(state.elements);});}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class SocialShareIcons{setup(){this.setupElements();this.setupVisibility();}setupElements(){this.element=document.getElementById('social-share-icons');}setupVisibility(){if(window.drupalSettings.user.roles.includes('kid'))this.element.remove();else this.element.style='opacity: unset';}static init(){const socialShareIcons=new SocialShareIcons();socialShareIcons.setup();}}SocialShareIcons.init();}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2)ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});else if(Object.getOwnPropertyDescriptors)Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));else ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol")_typeof=function(obj){return typeof obj;};else _typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value" in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);return Constructor;}function _defineProperty(obj,key,value){if(key in obj)Object.defineProperty(obj,key,{value,enumerable:true,configurable:true,writable:true});else obj[key]=value;return obj;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _assertThisInitialized(self){if(self===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self;}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function"))return call;else{if(call!==void 0)throw new TypeError("Derived constructors may only return object or undefined");}return _assertThisInitialized(self);}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result);};}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _get(){if(typeof Reflect!=="undefined"&&Reflect.get)_get=Reflect.get;else _get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get)return desc.get.call(arguments.length<3?target:receiver);return desc.value;};return _get.apply(this,arguments);}var defaults={type:'slider',startAt:0,perView:1,focusAt:0,gap:10,autoplay:false,hoverpause:true,keyboard:true,bound:false,swipeThreshold:80,dragThreshold:120,perSwipe:'',touchRatio:0.5,touchAngle:45,animationDuration:400,rewind:true,rewindDuration:800,animationTimingFunc:'cubic-bezier(.165, .840, .440, 1)',waitForTransition:true,throttle:10,direction:'ltr',peek:0,cloningRatio:1,breakpoints:{},classes:{swipeable:'glide--swipeable',dragging:'glide--dragging',direction:{ltr:'glide--ltr',rtl:'glide--rtl'},type:{slider:'glide--slider',carousel:'glide--carousel'},slide:{clone:'glide__slide--clone',active:'glide__slide--active'},arrow:{disabled:'glide__arrow--disabled'},nav:{active:'glide__bullet--active'}}};function warn(msg){console.error("[Glide warn]: ".concat(msg));}function toInt$1(value){return parseInt(value);}function toFloat(value){return parseFloat(value);}function isString(value){return typeof value==='string';}function isObject(value){var type=_typeof(value);return type==='function'||type==='object'&&!!value;}function isFunction(value){return typeof value==='function';}function isUndefined$1(value){return typeof value==='undefined';}function isArray(value){return value.constructor===Array;}function mount(glide,extensions,events){var components={};for(var name in extensions)if(isFunction(extensions[name]))components[name]=extensions[name](glide,components,events);else warn('Extension must be a function');for(var _name in components)if(isFunction(components[_name].mount))components[_name].mount();return components;}function define$1(obj,prop,definition){Object.defineProperty(obj,prop,definition);}function sortKeys(obj){return Object.keys(obj).sort().reduce(function(r,k){r[k]=obj[k];return r[k],r;},{});}function mergeOptions(defaults,settings){var options=Object.assign({},defaults,settings);if(settings.hasOwnProperty('classes')){options.classes=Object.assign({},defaults.classes,settings.classes);var properties=['direction','type','slide','arrow','nav'];properties.forEach(function(property){if(settings.classes.hasOwnProperty(property))options.classes[property]=_objectSpread2(_objectSpread2({},defaults.classes[property]),settings.classes[property]);});}if(settings.hasOwnProperty('breakpoints'))options.breakpoints=Object.assign({},defaults.breakpoints,settings.breakpoints);return options;}var EventsBus=function(){function EventsBus(){var events=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,EventsBus);this.events=events;this.hop=events.hasOwnProperty;}_createClass(EventsBus,[{key:"on",value:function on(event,handler){if(isArray(event)){for(var i=0;i<event.length;i++)this.on(event[i],handler);return;}if(!this.hop.call(this.events,event))this.events[event]=[];var index=this.events[event].push(handler)-1;return {remove:function remove(){delete this.events[event][index];}};}},{key:"emit",value:function emit(event,context){if(isArray(event)){for(var i=0;i<event.length;i++)this.emit(event[i],context);return;}if(!this.hop.call(this.events,event))return;this.events[event].forEach(function(item){item(context||{});});}}]);return EventsBus;}();var Glide$1=function(){function Glide(selector){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Glide);this._c={};this._t=[];this._e=new EventsBus();this.disabled=false;this.selector=selector;this.settings=mergeOptions(defaults,options);this.index=this.settings.startAt;}_createClass(Glide,[{key:"mount",value:function mount$1(){var extensions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this._e.emit('mount.before');if(isObject(extensions))this._c=mount(this,extensions,this._e);else warn('You need to provide a object on `mount()`');this._e.emit('mount.after');return this;}},{key:"mutate",value:function mutate(){var transformers=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];if(isArray(transformers))this._t=transformers;else warn('You need to provide a array on `mutate()`');return this;}},{key:"update",value:function update(){var settings=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.settings=mergeOptions(this.settings,settings);if(settings.hasOwnProperty('startAt'))this.index=settings.startAt;this._e.emit('update');return this;}},{key:"go",value:function go(pattern){this._c.Run.make(pattern);return this;}},{key:"move",value:function move(distance){this._c.Transition.disable();this._c.Move.make(distance);return this;}},{key:"destroy",value:function destroy(){this._e.emit('destroy');return this;}},{key:"play",value:function play(){var interval=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(interval)this.settings.autoplay=interval;this._e.emit('play');return this;}},{key:"pause",value:function pause(){this._e.emit('pause');return this;}},{key:"disable",value:function disable(){this.disabled=true;return this;}},{key:"enable",value:function enable(){this.disabled=false;return this;}},{key:"on",value:function on(event,handler){this._e.on(event,handler);return this;}},{key:"isType",value:function isType(name){return this.settings.type===name;}},{key:"settings",get:function get(){return this._o;},set:function set(o){if(isObject(o))this._o=o;else warn('Options must be an `object` instance.');}},{key:"index",get:function get(){return this._i;},set:function set(i){this._i=toInt$1(i);}},{key:"type",get:function get(){return this.settings.type;}},{key:"disabled",get:function get(){return this._d;},set:function set(status){this._d=!!status;}}]);return Glide;}();function Run(Glide,Components,Events){var Run={mount:function mount(){this._o=false;},make:function make(move){var _this=this;if(!Glide.disabled){!Glide.settings.waitForTransition||Glide.disable();this.move=move;Events.emit('run.before',this.move);this.calculate();Events.emit('run',this.move);Components.Transition.after(function(){if(_this.isStart())Events.emit('run.start',_this.move);if(_this.isEnd())Events.emit('run.end',_this.move);if(_this.isOffset()){_this._o=false;Events.emit('run.offset',_this.move);}Events.emit('run.after',_this.move);Glide.enable();});}},calculate:function calculate(){var move=this.move,length=this.length;var steps=move.steps,direction=move.direction;var viewSize=1;if(direction==='='){if(Glide.settings.bound&&toInt$1(steps)>length){Glide.index=length;return;}Glide.index=steps;return;}if(direction==='>'&&steps==='>'){Glide.index=length;return;}if(direction==='<'&&steps==='<'){Glide.index=0;return;}if(direction==='|')viewSize=Glide.settings.perView||1;if(direction==='>'||direction==='|'&&steps==='>'){var index=calculateForwardIndex(viewSize);if(index>length)this._o=true;Glide.index=normalizeForwardIndex(index,viewSize);return;}if(direction==='<'||direction==='|'&&steps==='<'){var _index=calculateBackwardIndex(viewSize);if(_index<0)this._o=true;Glide.index=normalizeBackwardIndex(_index,viewSize);return;}warn("Invalid direction pattern [".concat(direction).concat(steps,"] has been used"));},isStart:function isStart(){return Glide.index<=0;},isEnd:function isEnd(){return Glide.index>=this.length;},isOffset:function isOffset(){var direction=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;if(!direction)return this._o;if(!this._o)return false;if(direction==='|>')return this.move.direction==='|'&&this.move.steps==='>';if(direction==='|<')return this.move.direction==='|'&&this.move.steps==='<';return this.move.direction===direction;},isBound:function isBound(){return Glide.isType('slider')&&Glide.settings.focusAt!=='center'&&Glide.settings.bound;}};function calculateForwardIndex(viewSize){var index=Glide.index;if(Glide.isType('carousel'))return index+viewSize;return index+(viewSize-index%viewSize);}function normalizeForwardIndex(index,viewSize){var length=Run.length;if(index<=length)return index;if(Glide.isType('carousel'))return index-(length+1);if(Glide.settings.rewind){if(Run.isBound()&&!Run.isEnd())return length;return 0;}if(Run.isBound())return length;return Math.floor(length/viewSize)*viewSize;}function calculateBackwardIndex(viewSize){var index=Glide.index;if(Glide.isType('carousel'))return index-viewSize;var view=Math.ceil(index/viewSize);return (view-1)*viewSize;}function normalizeBackwardIndex(index,viewSize){var length=Run.length;if(index>=0)return index;if(Glide.isType('carousel'))return index+(length+1);if(Glide.settings.rewind){if(Run.isBound()&&Run.isStart())return length;return Math.floor(length/viewSize)*viewSize;}return 0;}define$1(Run,'move',{get:function get(){return this._m;},set:function set(value){var step=value.substr(1);this._m={direction:value.substr(0,1),steps:step?toInt$1(step)?toInt$1(step):step:0};}});define$1(Run,'length',{get:function get(){var settings=Glide.settings;var length=Components.Html.slides.length;if(this.isBound())return length-1-(toInt$1(settings.perView)-1)+toInt$1(settings.focusAt);return length-1;}});define$1(Run,'offset',{get:function get(){return this._o;}});return Run;}function now(){return new Date().getTime();}function throttle(func,wait){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var timeout,context,args,result;var previous=0;var later=function later(){previous=options.leading===false?0:now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null;};var throttled=function throttled(){var at=now();if(!previous&&options.leading===false)previous=at;var remaining=wait-(at-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null;}previous=at;result=func.apply(context,args);if(!timeout)context=args=null;}else{if(!timeout&&options.trailing!==false)timeout=setTimeout(later,remaining);}return result;};throttled.cancel=function(){clearTimeout(timeout);previous=0;timeout=context=args=null;};return throttled;}var MARGIN_TYPE={ltr:['marginLeft','marginRight'],rtl:['marginRight','marginLeft']};function Gaps(Glide,Components,Events){var Gaps={apply:function apply(slides){for(var i=0,len=slides.length;i<len;i++){var style=slides[i].style;var direction=Components.Direction.value;if(i!==0)style[MARGIN_TYPE[direction][0]]="".concat(this.value/2,"px");else style[MARGIN_TYPE[direction][0]]='';if(i!==slides.length-1)style[MARGIN_TYPE[direction][1]]="".concat(this.value/2,"px");else style[MARGIN_TYPE[direction][1]]='';}},remove:function remove(slides){for(var i=0,len=slides.length;i<len;i++){var style=slides[i].style;style.marginLeft='';style.marginRight='';}}};define$1(Gaps,'value',{get:function get(){return toInt$1(Glide.settings.gap);}});define$1(Gaps,'grow',{get:function get(){return Gaps.value*Components.Sizes.length;}});define$1(Gaps,'reductor',{get:function get(){var perView=Glide.settings.perView;return Gaps.value*(perView-1)/perView;}});Events.on(['build.after','update'],throttle(function(){Gaps.apply(Components.Html.wrapper.children);},30));Events.on('destroy',function(){Gaps.remove(Components.Html.wrapper.children);});return Gaps;}function siblings(node){if(node&&node.parentNode){var n=node.parentNode.firstChild;var matched=[];for(;n;n=n.nextSibling)if(n.nodeType===1&&n!==node)matched.push(n);return matched;}return [];}function toArray(nodeList){return Array.prototype.slice.call(nodeList);}var TRACK_SELECTOR='[data-glide-el="track"]';function Html(Glide,Components,Events){var Html={mount:function mount(){this.root=Glide.selector;this.track=this.root.querySelector(TRACK_SELECTOR);this.collectSlides();},collectSlides:function collectSlides(){this.slides=toArray(this.wrapper.children).filter(function(slide){return !slide.classList.contains(Glide.settings.classes.slide.clone);});}};define$1(Html,'root',{get:function get(){return Html._r;},set:function set(r){if(isString(r))r=document.querySelector(r);if(r!==null)Html._r=r;else warn('Root element must be a existing Html node');}});define$1(Html,'track',{get:function get(){return Html._t;},set:function set(t){Html._t=t;}});define$1(Html,'wrapper',{get:function get(){return Html.track.children[0];}});Events.on('update',function(){Html.collectSlides();});return Html;}function Peek(Glide,Components,Events){var Peek={mount:function mount(){this.value=Glide.settings.peek;}};define$1(Peek,'value',{get:function get(){return Peek._v;},set:function set(value){if(isObject(value)){value.before=toInt$1(value.before);value.after=toInt$1(value.after);}else value=toInt$1(value);Peek._v=value;}});define$1(Peek,'reductor',{get:function get(){var value=Peek.value;var perView=Glide.settings.perView;if(isObject(value))return value.before/perView+value.after/perView;return value*2/perView;}});Events.on(['resize','update'],function(){Peek.mount();});return Peek;}function Move(Glide,Components,Events){var Move={mount:function mount(){this._o=0;},make:function make(){var _this=this;var offset=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this.offset=offset;Events.emit('move',{movement:this.value});Components.Transition.after(function(){Events.emit('move.after',{movement:_this.value});});}};define$1(Move,'offset',{get:function get(){return Move._o;},set:function set(value){Move._o=!isUndefined$1(value)?toInt$1(value):0;}});define$1(Move,'translate',{get:function get(){return Components.Sizes.slideWidth*Glide.index;}});define$1(Move,'value',{get:function get(){var offset=this.offset;var translate=this.translate;if(Components.Direction.is('rtl'))return translate+offset;return translate-offset;}});Events.on(['build.before','run'],function(){Move.make();});return Move;}function Sizes(Glide,Components,Events){var Sizes={setupSlides:function setupSlides(){var width="".concat(this.slideWidth,"px");var slides=Components.Html.slides;for(var i=0;i<slides.length;i++)slides[i].style.width=width;},setupWrapper:function setupWrapper(){Components.Html.wrapper.style.width="".concat(this.wrapperSize,"px");},remove:function remove(){var slides=Components.Html.slides;for(var i=0;i<slides.length;i++)slides[i].style.width='';Components.Html.wrapper.style.width='';}};define$1(Sizes,'length',{get:function get(){return Components.Html.slides.length;}});define$1(Sizes,'width',{get:function get(){return Components.Html.track.offsetWidth;}});define$1(Sizes,'wrapperSize',{get:function get(){return Sizes.slideWidth*Sizes.length+Components.Gaps.grow+Components.Clones.grow;}});define$1(Sizes,'slideWidth',{get:function get(){return Sizes.width/Glide.settings.perView-Components.Peek.reductor-Components.Gaps.reductor;}});Events.on(['build.before','resize','update'],function(){Sizes.setupSlides();Sizes.setupWrapper();});Events.on('destroy',function(){Sizes.remove();});return Sizes;}function Build(Glide,Components,Events){var Build={mount:function mount(){Events.emit('build.before');this.typeClass();this.activeClass();Events.emit('build.after');},typeClass:function typeClass(){Components.Html.root.classList.add(Glide.settings.classes.type[Glide.settings.type]);},activeClass:function activeClass(){var classes=Glide.settings.classes;var slide=Components.Html.slides[Glide.index];if(slide){slide.classList.add(classes.slide.active);siblings(slide).forEach(function(sibling){sibling.classList.remove(classes.slide.active);});}},removeClasses:function removeClasses(){var _Glide$settings$class=Glide.settings.classes,type=_Glide$settings$class.type,slide=_Glide$settings$class.slide;Components.Html.root.classList.remove(type[Glide.settings.type]);Components.Html.slides.forEach(function(sibling){sibling.classList.remove(slide.active);});}};Events.on(['destroy','update'],function(){Build.removeClasses();});Events.on(['resize','update'],function(){Build.mount();});Events.on('move.after',function(){Build.activeClass();});return Build;}function Clones(Glide,Components,Events){var Clones={mount:function mount(){this.items=[];if(Glide.isType('carousel'))this.items=this.collect();},collect:function collect(){var items=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var slides=Components.Html.slides;var _Glide$settings=Glide.settings,perView=_Glide$settings.perView,classes=_Glide$settings.classes,cloningRatio=_Glide$settings.cloningRatio;if(slides.length>0){var peekIncrementer=+!!Glide.settings.peek;var cloneCount=perView+peekIncrementer+Math.round(perView/2);var append=slides.slice(0,cloneCount).reverse();var prepend=slides.slice(cloneCount*-1);for(var r=0;r<Math.max(cloningRatio,Math.floor(perView/slides.length));r++){for(var i=0;i<append.length;i++){var clone=append[i].cloneNode(true);clone.classList.add(classes.slide.clone);items.push(clone);}for(var _i=0;_i<prepend.length;_i++){var _clone=prepend[_i].cloneNode(true);_clone.classList.add(classes.slide.clone);items.unshift(_clone);}}}return items;},append:function append(){var items=this.items;var _Components$Html=Components.Html,wrapper=_Components$Html.wrapper,slides=_Components$Html.slides;var half=Math.floor(items.length/2);var prepend=items.slice(0,half).reverse();var append=items.slice(half*-1).reverse();var width="".concat(Components.Sizes.slideWidth,"px");for(var i=0;i<append.length;i++)wrapper.appendChild(append[i]);for(var _i2=0;_i2<prepend.length;_i2++)wrapper.insertBefore(prepend[_i2],slides[0]);for(var _i3=0;_i3<items.length;_i3++)items[_i3].style.width=width;},remove:function remove(){var items=this.items;for(var i=0;i<items.length;i++)Components.Html.wrapper.removeChild(items[i]);}};define$1(Clones,'grow',{get:function get(){return (Components.Sizes.slideWidth+Components.Gaps.value)*Clones.items.length;}});Events.on('update',function(){Clones.remove();Clones.mount();Clones.append();});Events.on('build.before',function(){if(Glide.isType('carousel'))Clones.append();});Events.on('destroy',function(){Clones.remove();});return Clones;}var EventsBinder=function(){function EventsBinder(){var listeners=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,EventsBinder);this.listeners=listeners;}_createClass(EventsBinder,[{key:"on",value:function on(events,el,closure){var capture=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(isString(events))events=[events];for(var i=0;i<events.length;i++){this.listeners[events[i]]=closure;el.addEventListener(events[i],this.listeners[events[i]],capture);}}},{key:"off",value:function off(events,el){var capture=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(isString(events))events=[events];for(var i=0;i<events.length;i++)el.removeEventListener(events[i],this.listeners[events[i]],capture);}},{key:"destroy",value:function destroy(){delete this.listeners;}}]);return EventsBinder;}();function Resize(Glide,Components,Events){var Binder=new EventsBinder();var Resize={mount:function mount(){this.bind();},bind:function bind(){Binder.on('resize',window,throttle(function(){Events.emit('resize');},Glide.settings.throttle));},unbind:function unbind(){Binder.off('resize',window);}};Events.on('destroy',function(){Resize.unbind();Binder.destroy();});return Resize;}var VALID_DIRECTIONS=['ltr','rtl'];var FLIPED_MOVEMENTS={'>':'<','<':'>','=':'='};function Direction(Glide,Components,Events){var Direction={mount:function mount(){this.value=Glide.settings.direction;},resolve:function resolve(pattern){var token=pattern.slice(0,1);if(this.is('rtl'))return pattern.split(token).join(FLIPED_MOVEMENTS[token]);return pattern;},is:function is(direction){return this.value===direction;},addClass:function addClass(){Components.Html.root.classList.add(Glide.settings.classes.direction[this.value]);},removeClass:function removeClass(){Components.Html.root.classList.remove(Glide.settings.classes.direction[this.value]);}};define$1(Direction,'value',{get:function get(){return Direction._v;},set:function set(value){if(VALID_DIRECTIONS.indexOf(value)>-1)Direction._v=value;else warn('Direction value must be `ltr` or `rtl`');}});Events.on(['destroy','update'],function(){Direction.removeClass();});Events.on('update',function(){Direction.mount();});Events.on(['build.before','update'],function(){Direction.addClass();});return Direction;}function Rtl(Glide,Components){return {modify:function modify(translate){if(Components.Direction.is('rtl'))return -translate;return translate;}};}function Gap(Glide,Components){return {modify:function modify(translate){var multiplier=Math.floor(translate/Components.Sizes.slideWidth);return translate+Components.Gaps.value*multiplier;}};}function Grow(Glide,Components){return {modify:function modify(translate){return translate+Components.Clones.grow/2;}};}function Peeking(Glide,Components){return {modify:function modify(translate){if(Glide.settings.focusAt>=0){var peek=Components.Peek.value;if(isObject(peek))return translate-peek.before;return translate-peek;}return translate;}};}function Focusing(Glide,Components){return {modify:function modify(translate){var gap=Components.Gaps.value;var width=Components.Sizes.width;var focusAt=Glide.settings.focusAt;var slideWidth=Components.Sizes.slideWidth;if(focusAt==='center')return translate-(width/2-slideWidth/2);return translate-slideWidth*focusAt-gap*focusAt;}};}function mutator(Glide,Components,Events){var TRANSFORMERS=[Gap,Grow,Peeking,Focusing].concat(Glide._t,[Rtl]);return {mutate:function mutate(translate){for(var i=0;i<TRANSFORMERS.length;i++){var transformer=TRANSFORMERS[i];if(isFunction(transformer)&&isFunction(transformer().modify))translate=transformer(Glide,Components,Events).modify(translate);else warn('Transformer should be a function that returns an object with `modify()` method');}return translate;}};}function Translate(Glide,Components,Events){var Translate={set:function set(value){var transform=mutator(Glide,Components).mutate(value);var translate3d="translate3d(".concat(-1*transform,"px, 0px, 0px)");Components.Html.wrapper.style.mozTransform=translate3d;Components.Html.wrapper.style.webkitTransform=translate3d;Components.Html.wrapper.style.transform=translate3d;},remove:function remove(){Components.Html.wrapper.style.transform='';},getStartIndex:function getStartIndex(){var length=Components.Sizes.length;var index=Glide.index;var perView=Glide.settings.perView;if(Components.Run.isOffset('>')||Components.Run.isOffset('|>'))return length+(index-perView);return (index+perView)%length;},getTravelDistance:function getTravelDistance(){var travelDistance=Components.Sizes.slideWidth*Glide.settings.perView;if(Components.Run.isOffset('>')||Components.Run.isOffset('|>'))return travelDistance*-1;return travelDistance;}};Events.on('move',function(context){if(!Glide.isType('carousel')||!Components.Run.isOffset())return Translate.set(context.movement);Components.Transition.after(function(){Events.emit('translate.jump');Translate.set(Components.Sizes.slideWidth*Glide.index);});var startWidth=Components.Sizes.slideWidth*Components.Translate.getStartIndex();return Translate.set(startWidth-Components.Translate.getTravelDistance());});Events.on('destroy',function(){Translate.remove();});return Translate;}function Transition(Glide,Components,Events){var disabled=false;var Transition={compose:function compose(property){var settings=Glide.settings;if(disabled)return "".concat(property," 0ms ").concat(settings.animationTimingFunc);return "".concat(property," ").concat(this.duration,"ms ").concat(settings.animationTimingFunc);},set:function set(){var property=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'transform';Components.Html.wrapper.style.transition=this.compose(property);},remove:function remove(){Components.Html.wrapper.style.transition='';},after:function after(callback){setTimeout(function(){callback();},this.duration);},enable:function enable(){disabled=false;this.set();},disable:function disable(){disabled=true;this.set();}};define$1(Transition,'duration',{get:function get(){var settings=Glide.settings;if(Glide.isType('slider')&&Components.Run.offset)return settings.rewindDuration;return settings.animationDuration;}});Events.on('move',function(){Transition.set();});Events.on(['build.before','resize','translate.jump'],function(){Transition.disable();});Events.on('run',function(){Transition.enable();});Events.on('destroy',function(){Transition.remove();});return Transition;}var supportsPassive=false;try{var opts=Object.defineProperty({},'passive',{get:function get(){supportsPassive=true;}});window.addEventListener('testPassive',null,opts);window.removeEventListener('testPassive',null,opts);}catch(e){}var supportsPassive$1=supportsPassive;var START_EVENTS=['touchstart','mousedown'];var MOVE_EVENTS=['touchmove','mousemove'];var END_EVENTS=['touchend','touchcancel','mouseup','mouseleave'];var MOUSE_EVENTS=['mousedown','mousemove','mouseup','mouseleave'];function swipe(Glide,Components,Events){var Binder=new EventsBinder();var swipeSin=0;var swipeStartX=0;var swipeStartY=0;var disabled=false;var capture=supportsPassive$1?{passive:true}:false;var Swipe={mount:function mount(){this.bindSwipeStart();},start:function start(event){if(!disabled&&!Glide.disabled){this.disable();var swipe=this.touches(event);swipeSin=null;swipeStartX=toInt$1(swipe.pageX);swipeStartY=toInt$1(swipe.pageY);this.bindSwipeMove();this.bindSwipeEnd();Events.emit('swipe.start');}},move:function move(event){if(!Glide.disabled){var _Glide$settings=Glide.settings,touchAngle=_Glide$settings.touchAngle,touchRatio=_Glide$settings.touchRatio,classes=_Glide$settings.classes;var swipe=this.touches(event);var subExSx=toInt$1(swipe.pageX)-swipeStartX;var subEySy=toInt$1(swipe.pageY)-swipeStartY;var powEX=Math.abs(subExSx<<2);var powEY=Math.abs(subEySy<<2);var swipeHypotenuse=Math.sqrt(powEX+powEY);var swipeCathetus=Math.sqrt(powEY);swipeSin=Math.asin(swipeCathetus/swipeHypotenuse);if(swipeSin*180/Math.PI<touchAngle){event.stopPropagation();Components.Move.make(subExSx*toFloat(touchRatio));Components.Html.root.classList.add(classes.dragging);Events.emit('swipe.move');}else return false;}},end:function end(event){if(!Glide.disabled){var _Glide$settings2=Glide.settings,perSwipe=_Glide$settings2.perSwipe,touchAngle=_Glide$settings2.touchAngle,classes=_Glide$settings2.classes;var swipe=this.touches(event);var threshold=this.threshold(event);var swipeDistance=swipe.pageX-swipeStartX;var swipeDeg=swipeSin*180/Math.PI;this.enable();if(swipeDistance>threshold&&swipeDeg<touchAngle)Components.Run.make(Components.Direction.resolve("".concat(perSwipe,"<")));else if(swipeDistance<-threshold&&swipeDeg<touchAngle)Components.Run.make(Components.Direction.resolve("".concat(perSwipe,">")));else Components.Move.make();Components.Html.root.classList.remove(classes.dragging);this.unbindSwipeMove();this.unbindSwipeEnd();Events.emit('swipe.end');}},bindSwipeStart:function bindSwipeStart(){var _this=this;var _Glide$settings3=Glide.settings,swipeThreshold=_Glide$settings3.swipeThreshold,dragThreshold=_Glide$settings3.dragThreshold;if(swipeThreshold)Binder.on(START_EVENTS[0],Components.Html.wrapper,function(event){_this.start(event);},capture);if(dragThreshold)Binder.on(START_EVENTS[1],Components.Html.wrapper,function(event){_this.start(event);},capture);},unbindSwipeStart:function unbindSwipeStart(){Binder.off(START_EVENTS[0],Components.Html.wrapper,capture);Binder.off(START_EVENTS[1],Components.Html.wrapper,capture);},bindSwipeMove:function bindSwipeMove(){var _this2=this;Binder.on(MOVE_EVENTS,Components.Html.wrapper,throttle(function(event){_this2.move(event);},Glide.settings.throttle),capture);},unbindSwipeMove:function unbindSwipeMove(){Binder.off(MOVE_EVENTS,Components.Html.wrapper,capture);},bindSwipeEnd:function bindSwipeEnd(){var _this3=this;Binder.on(END_EVENTS,Components.Html.wrapper,function(event){_this3.end(event);});},unbindSwipeEnd:function unbindSwipeEnd(){Binder.off(END_EVENTS,Components.Html.wrapper);},touches:function touches(event){if(MOUSE_EVENTS.indexOf(event.type)>-1)return event;return event.touches[0]||event.changedTouches[0];},threshold:function threshold(event){var settings=Glide.settings;if(MOUSE_EVENTS.indexOf(event.type)>-1)return settings.dragThreshold;return settings.swipeThreshold;},enable:function enable(){disabled=false;Components.Transition.enable();return this;},disable:function disable(){disabled=true;Components.Transition.disable();return this;}};Events.on('build.after',function(){Components.Html.root.classList.add(Glide.settings.classes.swipeable);});Events.on('destroy',function(){Swipe.unbindSwipeStart();Swipe.unbindSwipeMove();Swipe.unbindSwipeEnd();Binder.destroy();});return Swipe;}function images(Glide,Components,Events){var Binder=new EventsBinder();var Images={mount:function mount(){this.bind();},bind:function bind(){Binder.on('dragstart',Components.Html.wrapper,this.dragstart);},unbind:function unbind(){Binder.off('dragstart',Components.Html.wrapper);},dragstart:function dragstart(event){event.preventDefault();}};Events.on('destroy',function(){Images.unbind();Binder.destroy();});return Images;}function anchors(Glide,Components,Events){var Binder=new EventsBinder();var detached=false;var prevented=false;var Anchors={mount:function mount(){this._a=Components.Html.wrapper.querySelectorAll('a');this.bind();},bind:function bind(){Binder.on('click',Components.Html.wrapper,this.click);},unbind:function unbind(){Binder.off('click',Components.Html.wrapper);},click:function click(event){if(prevented){event.stopPropagation();event.preventDefault();}},detach:function detach(){prevented=true;if(!detached){for(var i=0;i<this.items.length;i++)this.items[i].draggable=false;detached=true;}return this;},attach:function attach(){prevented=false;if(detached){for(var i=0;i<this.items.length;i++)this.items[i].draggable=true;detached=false;}return this;}};define$1(Anchors,'items',{get:function get(){return Anchors._a;}});Events.on('swipe.move',function(){Anchors.detach();});Events.on('swipe.end',function(){Components.Transition.after(function(){Anchors.attach();});});Events.on('destroy',function(){Anchors.attach();Anchors.unbind();Binder.destroy();});return Anchors;}var NAV_SELECTOR='[data-glide-el="controls[nav]"]';var CONTROLS_SELECTOR='[data-glide-el^="controls"]';var PREVIOUS_CONTROLS_SELECTOR="".concat(CONTROLS_SELECTOR," [data-glide-dir*=\"<\"]");var NEXT_CONTROLS_SELECTOR="".concat(CONTROLS_SELECTOR," [data-glide-dir*=\">\"]");function controls(Glide,Components,Events){var Binder=new EventsBinder();var capture=supportsPassive$1?{passive:true}:false;var Controls={mount:function mount(){this._n=Components.Html.root.querySelectorAll(NAV_SELECTOR);this._c=Components.Html.root.querySelectorAll(CONTROLS_SELECTOR);this._arrowControls={previous:Components.Html.root.querySelectorAll(PREVIOUS_CONTROLS_SELECTOR),next:Components.Html.root.querySelectorAll(NEXT_CONTROLS_SELECTOR)};this.addBindings();},setActive:function setActive(){for(var i=0;i<this._n.length;i++)this.addClass(this._n[i].children);},removeActive:function removeActive(){for(var i=0;i<this._n.length;i++)this.removeClass(this._n[i].children);},addClass:function addClass(controls){var settings=Glide.settings;var item=controls[Glide.index];if(!item)return;item.classList.add(settings.classes.nav.active);siblings(item).forEach(function(sibling){sibling.classList.remove(settings.classes.nav.active);});},removeClass:function removeClass(controls){var item=controls[Glide.index];item===null||item===void 0?void 0:item.classList.remove(Glide.settings.classes.nav.active);},setArrowState:function setArrowState(){if(Glide.settings.rewind)return;var next=Controls._arrowControls.next;var previous=Controls._arrowControls.previous;this.resetArrowState(next,previous);if(Glide.index===0)this.disableArrow(previous);if(Glide.index===Components.Run.length)this.disableArrow(next);},resetArrowState:function resetArrowState(){var settings=Glide.settings;for(var _len=arguments.length,lists=new Array(_len),_key=0;_key<_len;_key++)lists[_key]=arguments[_key];lists.forEach(function(list){toArray(list).forEach(function(element){element.classList.remove(settings.classes.arrow.disabled);});});},disableArrow:function disableArrow(){var settings=Glide.settings;for(var _len2=arguments.length,lists=new Array(_len2),_key2=0;_key2<_len2;_key2++)lists[_key2]=arguments[_key2];lists.forEach(function(list){toArray(list).forEach(function(element){element.classList.add(settings.classes.arrow.disabled);});});},addBindings:function addBindings(){for(var i=0;i<this._c.length;i++)this.bind(this._c[i].children);},removeBindings:function removeBindings(){for(var i=0;i<this._c.length;i++)this.unbind(this._c[i].children);},bind:function bind(elements){for(var i=0;i<elements.length;i++){Binder.on('click',elements[i],this.click);Binder.on('touchstart',elements[i],this.click,capture);}},unbind:function unbind(elements){for(var i=0;i<elements.length;i++)Binder.off(['click','touchstart'],elements[i]);},click:function click(event){if(!supportsPassive$1&&event.type==='touchstart')event.preventDefault();var direction=event.currentTarget.getAttribute('data-glide-dir');Components.Run.make(Components.Direction.resolve(direction));}};define$1(Controls,'items',{get:function get(){return Controls._c;}});Events.on(['mount.after','move.after'],function(){Controls.setActive();});Events.on(['mount.after','run'],function(){Controls.setArrowState();});Events.on('destroy',function(){Controls.removeBindings();Controls.removeActive();Binder.destroy();});return Controls;}function sortBreakpoints(points){if(isObject(points))return sortKeys(points);else warn("Breakpoints option must be an object");return {};}function breakpoints(Glide,Components,Events){var Binder=new EventsBinder();var settings=Glide.settings;var points=sortBreakpoints(settings.breakpoints);var defaults=Object.assign({},settings);var Breakpoints={match:function match(points){if(typeof window.matchMedia!=='undefined')for(var point in points)if(points.hasOwnProperty(point))if(window.matchMedia("(max-width: ".concat(point,"px)")).matches)return points[point];return defaults;}};Object.assign(settings,Breakpoints.match(points));Binder.on('resize',window,throttle(function(){Glide.settings=mergeOptions(settings,Breakpoints.match(points));},Glide.settings.throttle));Events.on('update',function(){points=sortBreakpoints(points);defaults=Object.assign({},settings);});Events.on('destroy',function(){Binder.off('resize',window);});return Breakpoints;}var COMPONENTS={Html,Translate,Transition,Direction,Peek,Sizes,Gaps,Move,Clones,Resize,Build,Run};var Glide=function(_Core){_inherits(Glide,_Core);var _super=_createSuper(Glide);function Glide(){_classCallCheck(this,Glide);return _super.apply(this,arguments);}_createClass(Glide,[{key:"mount",value:function mount(){var extensions=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return _get(_getPrototypeOf(Glide.prototype),"mount",this).call(this,Object.assign({},COMPONENTS,extensions));}}]);return Glide;}(Glide$1);function define(obj,prop,definition){Object.defineProperty(obj,prop,definition);}function toInt(value){return parseInt(value);}function isUndefined(value){return typeof value==='undefined';}function moveCore(Glide,Components,Events){const Move={mount(){this._o=0;},make(offset=0){this.offset=offset;Events.emit('move',{movement:this.value});Components.Transition.after(()=>{Events.emit('move.after',{movement:this.value});});}};define(Move,'offset',{get(){return Move._o;},set(value){Move._o=!isUndefined(value)?toInt(value):0;}});define(Move,'translate',{get(){return Components.Sizes.slideWidth*Glide.index;}});define(Move,'value',{get(){const offset=this.offset;const translate=this.translate;if(Components.Direction.is('rtl'))return translate+offset;return translate-offset;}});Events.on(['build.before','run'],()=>{Move.make();});return Move;}function move(Glide,Components,Events){const MoveCore=moveCore(Glide,Components,Events);const MoveCustom={make(offset=0){this.offset=offset;Events.emit('move',{movement:this.valueDynamic});Components.Transition.after(()=>{Events.emit('move.after',{movement:this.valueDynamic});});}};const Move=Object.assign(MoveCore,MoveCustom);define(Move,'translateDynamic',{get(){let translate=0;const {slides}=Components.Html;for(let i=0;i<Glide.index;i++)translate+=slides[i].clientWidth;return translate;}});define(Move,'valueDynamic',{get(){if(Components.Direction.is('rtl'))return this.translateDynamic+this.offset;return this.translateDynamic-this.offset;}});return Move;}function sizesCore(Glide,Components,Events){const Sizes={setupSlides(){const width=`${this.slideWidth}px`;const slides=Components.Html.slides;for(let i=0;i<slides.length;i++)slides[i].style.width=width;},setupWrapper(){Components.Html.wrapper.style.width=`${this.wrapperSize}px`;},remove(){const slides=Components.Html.slides;for(let i=0;i<slides.length;i++)slides[i].style.width='';Components.Html.wrapper.style.width='';}};define(Sizes,'length',{get(){return Components.Html.slides.length;}});define(Sizes,'width',{get(){return Components.Html.track.offsetWidth;}});define(Sizes,'wrapperSize',{get(){return Sizes.slideWidth*Sizes.length+Components.Gaps.grow+Components.Clones.grow;}});define(Sizes,'slideWidth',{get(){return (Sizes.width/Glide.settings.perView)-Components.Peek.reductor-Components.Gaps.reductor;}});Events.on(['build.before','resize','update'],()=>{Sizes.setupSlides();Sizes.setupWrapper();});Events.on('destroy',()=>{Sizes.remove();});return Sizes;}function sizes(Glide,Components,Events){const SizesCore=sizesCore(Glide,Components,Events);const SizesCustom={setupSlides(){const {slides}=Components.Html;for(let i=0;i<slides.length;i++)slides[i].style.width='auto';},setupWrapper(){Components.Html.wrapper.style.width=`${this.wrapperSizeDynamic}px`;}};const Sizes=Object.assign(SizesCore,SizesCustom);define(Sizes,'wrapperSizeDynamic',{get(){let wrapperSize=0;const {slides}=Components.Html;for(let i=0;i<slides.length;i++)wrapperSize+=slides[i].clientWidth;return wrapperSize+Components.Gaps.grow+Components.Clones.grow;}});return Sizes;}function clonesCore(Glide,Components,Events){const Clones={mount(){this.items=[];if(Glide.isType('carousel'))this.items=this.collect();},collect(items=[]){const {slides}=Components.Html;const {perView,classes,cloningRatio}=Glide.settings;if(slides.length>0){const peekIncrementer=+!!Glide.settings.peek;const cloneCount=perView+peekIncrementer+Math.round(perView/2);const append=slides.slice(0,cloneCount).reverse();const prepend=slides.slice(cloneCount*-1);for(let r=0;r<Math.max(cloningRatio,Math.floor(perView/slides.length));r++){for(let i=0;i<append.length;i++){const clone=append[i].cloneNode(true);clone.classList.add(classes.slide.clone);items.push(clone);}for(let i=0;i<prepend.length;i++){const clone=prepend[i].cloneNode(true);clone.classList.add(classes.slide.clone);items.unshift(clone);}}}return items;},append(){const {items}=this;const {wrapper,slides}=Components.Html;const half=Math.floor(items.length/2);const prepend=items.slice(0,half).reverse();const append=items.slice(half*-1).reverse();const width=`${Components.Sizes.slideWidth}px`;for(let i=0;i<append.length;i++)wrapper.appendChild(append[i]);for(let i=0;i<prepend.length;i++)wrapper.insertBefore(prepend[i],slides[0]);for(let i=0;i<items.length;i++)items[i].style.width=width;},remove(){let {items}=this;for(let i=0;i<items.length;i++)Components.Html.wrapper.removeChild(items[i]);}};define(Clones,'grow',{get(){return (Components.Sizes.slideWidth+Components.Gaps.value)*Clones.items.length;}});Events.on('update',()=>{Clones.remove();Clones.mount();Clones.append();});Events.on('build.before',()=>{if(Glide.isType('carousel'))Clones.append();});Events.on('destroy',()=>{Clones.remove();});return Clones;}function clones(Glide,Components,Events){const ClonesCore=clonesCore(Glide,Components,Events);const {collect}=ClonesCore;const ClonesCustom={collect(items=[]){const collectedItems=collect(items);this.uniqueId(collectedItems);return collectedItems;},uniqueId(items){if(items)items.forEach((item)=>{if(item.id)item.id=`${item.id}-${Math.floor(Math.random()*1000)}`;this.uniqueId(Array.from(item.children));});}};const Clones=Object.assign(ClonesCore,ClonesCustom);return Clones;}class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.slider';const EVENT_KEY=`.${DATA_KEY}`;const Selector={PEEKING_BOTH:'.slider--peeking-both',SLIDE:'.slider__slide',ARROWS:'.slider__arrows',ARROW_LEFT:'.slider__arrow--left',ARROW_RIGHT:'.slider__arrow--right',BULLETS:'.slider__bullets',BULLET:'.slider__bullet',DATA_RIDE:'[data-ride="slider"]'};const Event={MOUNT:`mount${EVENT_KEY}`,MOUNT_AFTER:`mount.after${EVENT_KEY}`,MOUNTED:`mounted${EVENT_KEY}`};const ClassName={DISABLED:'slider--disabled',LAZY:'slider--lazy'};class Slider extends ElementBase{constructor(element,config={}){super(element,config);this._slides=element.querySelectorAll(Selector.SLIDE);this._arrows=element.querySelector(Selector.ARROWS);this._bullets=element.querySelector(Selector.BULLETS);this._bullet=this._bullets.querySelectorAll(Selector.BULLET);}load(){if(!this._loaded){this._loaded=true;this.build();this.mount();}}build(){this._arrows.querySelector(Selector.ARROW_LEFT).setAttribute('data-glide-dir','<');this._arrows.querySelector(Selector.ARROW_RIGHT).setAttribute('data-glide-dir','>');}mount(){const mountEvent=Util__namespace.createEvent(Event.MOUNT);this._element.dispatchEvent(mountEvent);this._glide=new Glide(this._element,this._config);this._glide.on('mount.after',()=>{const mountAfterEvent=Util__namespace.createEvent(Event.MOUNT_AFTER);this._element.dispatchEvent(mountAfterEvent);});if(this._config.perViewMove){let index;this._glide.on('run.before',(evt)=>{if(evt.direction!=='='){index=this._glide.index;evt.steps=evt.direction;evt.direction='|';}});this._glide.on('run',(evt)=>{if(evt.direction==='|'&&index!==0){let reset=evt.steps==='>'&&index>this._glide.index;reset=reset||evt.steps==='<'&&index<this._glide.index;if(reset)this._glide.index=0;}});}if(this._element.classList.contains(Selector.PEEKING_BOTH.slice(1))){const disableLinks=(evt)=>{evt.preventDefault();};const preventPeeking=()=>{const slides=this._element.querySelectorAll(Selector.SLIDE);if(slides){const perView=Number(this._config.perView)||1;let activeSlideIndex=-1;let lastActive=-1;slides.forEach((slide,index)=>{slide.classList.remove('glide__slide--viewable');const slideLinks=slide.querySelectorAll('a');if(slideLinks)slideLinks.forEach((link)=>{link.removeEventListener('click',disableLinks);});if(slide.classList.contains('glide__slide--active')){activeSlideIndex=index;lastActive=activeSlideIndex+perView-1;}if(index>=activeSlideIndex&&index<=lastActive)slide.classList.add('glide__slide--viewable');else{if(slideLinks)slideLinks.forEach((link)=>{link.addEventListener('click',disableLinks);});}});}};this._glide.on('mount.after',preventPeeking);this._glide.on('run.after',preventPeeking);}if(this._element.classList.contains(ClassName.LAZY))this._glide.on('mount.after',()=>{const loader=this._element.querySelector('.slider__track > .loader');if(loader)loader.parentNode.removeChild(loader);this._element.classList.remove(ClassName.LAZY);});const mountComponents={Anchors:anchors,Breakpoints:breakpoints,Clones:clones,Controls:controls,Images:images,Swipe:swipe};if(this._config.width==='auto'){mountComponents.Move=move;mountComponents.Sizes=sizes;}this._glide.mount(mountComponents);this._addEventListeners();const mountedEvent=Util__namespace.createEvent(Event.MOUNTED);this._element.dispatchEvent(mountedEvent);}update(config={}){this._config=this._getConfig(config);this._glide.update(this._config);}go(goTo){this._glide.go(goTo);}on(event,handler){this._glide.on(event,handler);}getGlide(){return this._glide;}static get Selector(){return Selector;}static get DATA_KEY(){return DATA_KEY;}_getConfig(config={}){let _config=super._getConfig(config);_config.width=_config.width||'default';_config.gap=_config.gap||8;if(_config.perView)_config.perView=parseInt(_config.perView,10);if(_config.config){const dataConfig=JSON.parse(Util__namespace.unescape(_config.config.replace(/'/g,'"')));delete _config.config;_config={..._config,...dataConfig};if(_config.breakpoints)Object.keys(_config.breakpoints).forEach((breakpoint)=>{const breakpointConfig=_config.breakpoints[breakpoint];delete _config.breakpoints[breakpoint];const breakpointUp=window.CommonKit.Breakpoint.getBreakpointsUp(breakpoint);_config.breakpoints[breakpointUp]=breakpointConfig;});}return _config;}_addEventListeners(){this._addEventListenerResize();}_addEventListenerResize(){let lastBreakpoint=null;const checkResize=()=>{const currentBraekpoint=window.CommonKit.Breakpoint.getCurrentBreakpoint();if(lastBreakpoint!==currentBraekpoint){lastBreakpoint=currentBraekpoint;const config=this._getBreakpointConfig(currentBraekpoint);if(config.perView>=this._slides.length){if(!this._glide.disabled){Util__namespace.addClass(this._element,ClassName.DISABLED);this._glide.update({type:'slider',startAt:0});this._glide.disable();this._arrows.classList.add('hidden');this._bullets.classList.add('hidden');}return;}if(this._glide.disabled){Util__namespace.removeClass(this._element,ClassName.DISABLED);this._glide.update({type:config.type});this._glide.enable();}const arrows=typeof config.arrows!=='undefined'?config.arrows:true;if(arrows)this._arrows.classList.remove('hidden');else this._arrows.classList.add('hidden');const bullets=typeof config.bullets!=='undefined'?config.bullets:true;if(bullets)this._bullets.classList.remove('hidden');else this._bullets.classList.add('hidden');if(this._config.perViewMove){const perView=config.perView||1;this._bullet.forEach((bullet,index)=>{if(index%perView===0)bullet.classList.remove('hidden');else bullet.classList.add('hidden');});}}};checkResize();window.addEventListener('resize',Util__namespace.debounce(checkResize,100));window.addEventListener('orientationchange',Util__namespace.debounce(checkResize,100));}_getBreakpointConfig(breakpointName){let config=this._config;if(config.breakpoints){let breakpoints=Object.keys(window.CommonKit.Breakpoint.getBreakpointsUp());const index=breakpoints.indexOf(breakpointName);breakpoints=breakpoints.slice(index);let found=false;breakpoints.forEach((breakpoint)=>{const breakpointValue=window.CommonKit.Breakpoint.getBreakpointsUp(breakpoint);if(!found&&this._config.breakpoints[breakpointValue]){found=true;config={...this._config,...this._config.breakpoints[breakpointValue]};}});}return config;}}window.CommonKit=window.CommonKit||{};window.CommonKit.Slider=Slider;const sliderSubscribe=()=>{const settings=drupalSettings.commonKit&&drupalSettings.commonKit.slider;if(settings&&settings.selectors)Slider.subscribe(Object.keys(settings.selectors));};sliderSubscribe();const config={elements:[]};window.CS.PageState.addStateType('slider-subscribe',config);window.CS.PageState.subscribeUpdateState('slider-subscribe',()=>{sliderSubscribe();});}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class ReviewViewRelatedTopics{setup(){this.setupElements();if(window.drupalSettings.user.uid!==0)this.setupTypeStateSubscriber();}setupElements(){this.element=document.getElementById('review-view-related-topics');}setupTypeStateSubscriber(){const suggestions=this.element.querySelector('.review-view-related-topics-suggestions');const loader=CommonKit.Loader.build({centered:true,cover:true});suggestions.appendChild(loader);const updateState=()=>{if(window.drupalSettings.user.myKidsUrl){const suggestionsText=suggestions.querySelector('span');suggestionsText.innerText=Drupal.t("Want suggestions based on your kid's interests?");const suggestionsLink=suggestions.querySelector('a');suggestionsLink.setAttribute('href',window.drupalSettings.user.myKidsUrl);suggestionsLink.innerText=Drupal.t('Update your preferences');loader.remove();}};window.CS.PageState.subscribeUpdateState('user-data',updateState);}static init(){const reviewViewRelatedTopics=new ReviewViewRelatedTopics();reviewViewRelatedTopics.setup();}}ReviewViewRelatedTopics.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DATA_KEY='csm.review-view-recommended-list';class ReviewViewRecommendedList{constructor(element){this.element=element;}load(){if(!this.loaded){this.loaded=true;this.setupElements();this.setupConfig();this.setupReviewTeaser();if(this.lazy){this.setupTypeState();this.setupPlaceholder();this.setupShowMore();}}}update(list){if(this.lazy&&this.list===list){this.lazy=false;this.element.classList.remove('review-view-recommended-list--loading');this.setupStateTrigger();this.setupReviewTeaser();const rowPlaceholder=this.element.querySelector('.row-placeholder');rowPlaceholder.remove();}}setupElements(){this.pagerLoadMoreElement=this.element.querySelector('.pager-load-more');}setupConfig(){this.list=this.element.getAttribute('data-list');this.age=this.element.getAttribute('data-age');this.lazy=this.element.getAttribute('data-lazy');}setupTypeState(){const config={url:'/ajax/review/recommended-list/{list}/{age}',elements:[this.pagerLoadMoreElement],cache:true,state:{list:this.list,age:this.age},progress:{parent:this.pagerLoadMoreElement,options:{centered:true,cover:false}}};window.CS.PageState.addStateType('review.list-row',config,this.list);}setupShowMore(){if(this.pagerLoadMoreElement)window.CommonKit.Util.waitFor(()=>{const pagerLoadMore=window.CommonKit.PagerLoadMore.get(this.pagerLoadMoreElement);pagerLoadMore.subscribeLoadMore(()=>{window.CS.PageState.triggerUpdate('review.list-row',{},this.list,this.age);});},()=>window.CommonKit.PagerLoadMore);}setupStateTrigger(){window.CS.PageState.triggerUpdate('slider-subscribe');window.CS.PageState.triggerUpdate('user-login-modal-subscribe');}setupReviewTeaser(){window.CommonKit.Util.waitFor(()=>{const slider=this.element.querySelector('.slider');if(slider){const reviews=slider.querySelectorAll('.slider__slide:not(.glide__slide--clone) .review-teaser');reviews.forEach((review)=>{window.CSM.ReviewTeaser.get(review).load();});const sliderInstance=window.CommonKit.Slider.get(slider);slider.addEventListener('mount.after.cs.slider',()=>{const reviewsClone=slider.querySelectorAll('.slider__slide.glide__slide--clone .review-teaser');this.setupReviewTeaserHeight([...reviews,...reviewsClone]);});sliderInstance.load();}},()=>window.CSM&&window.CSM.ReviewTeaser);}setupReviewTeaserHeight(reviews){const checkHeight=()=>{let max=0;reviews.forEach((review)=>{const image=review.querySelector('img');if(image.height>max)max=image.height;});reviews.forEach((review)=>{const imageWrapper=review.querySelector('.review-teaser-image-wrapper');imageWrapper.style.height=`${max}px`;});};const checkHeightDebounced=window.CommonKit.Util.debounce(checkHeight,window.CommonKit.Util.DEBOUNCE_DELAY);window.addEventListener('resize',checkHeightDebounced);window.addEventListener('orientationchange',checkHeightDebounced);checkHeight();}setupPlaceholder(){this.element.classList.add('review-view-recommended-list--loading');if(!this.lazy)Array.from(this.element.children).forEach((child)=>{child.remove();});const row=document.createElement('div');row.classList.add('row','row-placeholder');const maxCols=3;const cols=new Array(maxCols).fill(1);cols.forEach(()=>{const colElem=document.createElement('div');colElem.classList.add('col','col-4','col-md-6','col-lg-4');const imgElement=document.createElement('img');imgElement.src='/components/src/commonkit_components/ck_image/images/ratio_2_3_medium.png';colElem.appendChild(imgElement);row.appendChild(colElem);});this.element.appendChild(row);}static subscribe(){ReviewViewRecommendedList.instances().forEach((instance)=>{instance.load();});}static update(list){ReviewViewRecommendedList.instances().forEach((instance)=>{instance.update(list);});}static instances(){const instances=[];const selectors=Object.keys(drupalSettings.csm.reviewViewRecommendedList.selectors);if(selectors)selectors.forEach((selector)=>{const element=document.getElementById(selector);if(element)instances.push(ReviewViewRecommendedList.get(element));});return instances;}static get(element){let instance=element[DATA_KEY];if(!instance){instance=new ReviewViewRecommendedList(element);element[DATA_KEY]=instance;}return instance;}}ReviewViewRecommendedList.subscribe();window.CS.PageState.subscribeUpdateState('review.list-row',(list)=>{ReviewViewRecommendedList.update(list);});}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.pager-load-more';const EVENT_KEY=`.${DATA_KEY}`;const Selector={MORE:'.btn',SCROLL_TOP:'.pager-load-more__scroll-top'};const ClassName={AUTO:'pager-load-more--auto'};const Event={LOAD_MORE:`load-more${EVENT_KEY}`};class PagerLoadMore extends ElementBase{constructor(element,config={}){super(element,config);this.element=element;this.config=this.getConfig();}load(){if(!this.loaded){this.loaded=true;this.element.style.opacity=1;this.handlePager();this.handleScrollTop();}}handlePager(){if(this.config.pager.page>=this.config.pager.total)return;this.handlePagerMore();this.handlePagerAuto();}handlePagerMore(){const more=this.element.querySelector(Selector.MORE);if(more)more.addEventListener('click',()=>{this.triggerLoadMore();});}handleScrollTop(){const scrollTop=this.element.querySelector(Selector.SCROLL_TOP);if(scrollTop)scrollTop.addEventListener('click',()=>{this.element.parentNode.scrollIntoView({behavior:'smooth'});});}handlePagerAuto(){if(window.CommonKit.Util.hasClass(this.element,ClassName.AUTO))window.CommonKit.Util.waitFor(()=>{this.triggerLoadMore();},()=>this.subscribed);}triggerLoadMore(){const loaderOptions={centered:true};const loader=CommonKit.Loader.build(loaderOptions);this.element.appendChild(loader);const loadMoreEvent=CommonKit.Util.createEvent(Event.LOAD_MORE);loadMoreEvent.page=this.config.pager.page+1;this.element.dispatchEvent(loadMoreEvent);}subscribeLoadMore(callback){this.element.addEventListener(Event.LOAD_MORE,callback);this.subscribed=true;}getConfig(){const instanceConfig={};instanceConfig.pager=this.element.dataset.pager||{};instanceConfig.pager=JSON.parse(instanceConfig.pager);return instanceConfig;}static init(){const settings=drupalSettings.commonKit&&drupalSettings.commonKit.pagerLoadMore;if(settings&&settings.selectors)PagerLoadMore.subscribe(Object.keys(settings.selectors));}}window.CommonKit=window.CommonKit||{};window.CommonKit.PagerLoadMore=PagerLoadMore;PagerLoadMore.init();const config={elements:[]};window.CS.PageState.addStateType('pager-load-more-subscribe',config);window.CS.PageState.subscribeUpdateState('pager-load-more-subscribe',()=>{PagerLoadMore.init();});}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.rating';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const Event={CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`,SELECT:`select${EVENT_KEY}`,SELECTED:`selected${EVENT_KEY}`};const ClassName={INTERACTIVE:'rating--interactive',RATING_SCORE:'rating__score',ACTIVE:'active',FOCUS:'focus',ACTIVE_UNFOCUS:'active-unfocus'};const Selector={DATA_TOGGLE:'[data-toggle="rating"]',RATING_SCORE:`.${ClassName.RATING_SCORE}`};class Rating extends ElementBase{constructor(element,config={}){super(element,config);}static get Event(){return Event;}static get Selector(){return Selector;}load(){if(!Util__namespace.hasClass(this._element,ClassName.INTERACTIVE))return;this._setupElements();this._setupInteractive();}_setupElements(){if(this._element.dataset.target)this.targetInput=document.getElementById(this._element.dataset.target);}_setupInteractive(){this.scoreOptions=this._element.querySelectorAll('input[type="radio"]');if(this.scoreOptions){const scoreElement=this._element.querySelector(Selector.RATING_SCORE);this._noteElem=scoreElement.nextElementSibling;let emptyIndex=-1;let emptyOption=null;if(this.scoreOptions.length===6){emptyIndex=0;emptyOption=this.scoreOptions[0];}let activeIndex=emptyIndex;let activeOption=emptyOption;this.scoreOptions.forEach((option,index)=>{if(option.classList.contains(ClassName.ACTIVE))activeIndex=index;Util__namespace.on(Event.CLICK_DATA_API,option,()=>{const selectEvent=Util__namespace.createEvent(Event.SELECT);this._element.dispatchEvent(selectEvent);if(index===activeIndex){activeIndex=emptyIndex;activeOption=emptyOption;}else{activeIndex=index;activeOption=option;}this._toggleActives(activeIndex,activeOption);this._removeActivesFocus();const selectedEvent=Util__namespace.createEvent(Event.SELECTED);selectedEvent.selected=activeIndex;this._element.dispatchEvent(selectedEvent);});Util__namespace.on('mouseenter',option,()=>{this._setActivesFocus(index);});Util__namespace.on('mouseleave',option,()=>{this._removeActivesFocus();});});}}_toggleActives(activeIndex,activeOption){this.scoreOptions.forEach((option)=>{option.classList.remove(ClassName.ACTIVE);});setTimeout(()=>{this.scoreOptions.forEach((option,index)=>{if(activeIndex>=index)option.classList.add(ClassName.ACTIVE);});},0);this._noteElem.textContent='';if(activeOption)this._noteElem.textContent=activeOption.dataset.note||'';if(this.targetInput)this.targetInput.value=activeIndex;}_setActivesFocus(activeIndex){this.scoreOptions.forEach((option,index)=>{if(activeIndex>=index)option.classList.add(ClassName.FOCUS);else{if(Util__namespace.hasClass(option,'active'))option.classList.add(ClassName.ACTIVE_UNFOCUS);}});}_removeActivesFocus(){this.scoreOptions.forEach((option)=>{option.classList.remove(ClassName.FOCUS,ClassName.ACTIVE_UNFOCUS);});}}window.CommonKit=window.CommonKit||{};window.CommonKit.Rating=Rating;const ratingSubscribe=()=>{const settings=drupalSettings.commonKit&&drupalSettings.commonKit.rating;if(settings&&settings.selectors)Rating.subscribe(Object.keys(settings.selectors));};ratingSubscribe();const config={elements:[]};window.CS.PageState.addStateType('rating-subscribe',config);window.CS.PageState.subscribeUpdateState('rating-subscribe',()=>{ratingSubscribe();});}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DATA_KEY='cs.user-login-modal';class UserLoginModal{constructor(element){this.element=element;}load(){if(!this.loaded){this.loaded=true;this.setupTypeState();if(window.drupalSettings.user.uid===0)this.setupAction();}}setupTypeState(){const config={elements:[]};window.CS.PageState.addStateType('user-login-modal',config,this.element.id);}setupAction(){this.element.addEventListener('click',(event)=>{event.preventDefault();event.stopPropagation();this.setupModal();window.CommonKit.Modal.get(this.modal).show({trigger:this.element});},true);const timeout=100;setTimeout(()=>{window.CS.PageState.triggerUpdate('user-login-modal',{},this.element.id);},timeout);}setupModal(){this.modal=document.getElementById('user-login-modal');if(!this.modal){const attributes={id:'user-login-modal'};this.modal=window.CommonKit.Modal.create(attributes).build();document.body.appendChild(this.modal);this.formLoaded=false;this.modal.addEventListener('show.cs.modal',()=>{if(!this.formLoaded)this.loginFormLoad();});}}loginFormLoad(){this.modal.classList.add('loading');const modalBody=this.modal.querySelector('.modal__body');const loginForm=document.createElement('div');loginForm.id='user-login-form';const modalConfig={};modalConfig.body=loginForm;window.CommonKit.Modal.update(this.modal,modalConfig);let url='/ajax/user/login';const location=window.location.pathname;url+=`?action=${location}`;const config={url,elements:[loginForm],cache:true,progress:{parent:modalBody,options:{size:'lg',centered:true}}};window.CS.PageState.addStateType('user-login-modal',config);window.CS.PageState.triggerUpdate('user-login-modal',{}).then(()=>{this.formLoaded=true;this.modal.classList.remove('loading');const state=window.CS.PageState.getStateType('user-login-form-update');if(state)window.CS.PageState.triggerUpdate('user-login-form-update',{});window.CommonKit.Modal.update(this.modal,{});});}static get(element){let instance=element[DATA_KEY];if(!instance){instance=new UserLoginModal(element);element[DATA_KEY]=instance;}return instance;}static subscribe(selectors){CommonKit.Util.intersectObserveSelectors(selectors,(element)=>{UserLoginModal.get(element).load();});}}const subscribe=()=>{const settings=drupalSettings.cs&&drupalSettings.cs.userLoginModal;if(settings&&settings.selectors)UserLoginModal.subscribe(Object.keys(settings.selectors));};subscribe();const config={elements:[]};window.CS.PageState.addStateType('user-login-modal-subscribe',config);window.CS.PageState.subscribeUpdateState('user-login-modal-subscribe',()=>{subscribe();});}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DATA_KEY='csm.review-action';const reviews={};class ReviewAction{constructor(element){this.element=element;}load(){if(!this.loaded){this.loaded=true;this.setup();}}setup(){this.setupConfig();this.setupTypeState();this.setupLazy();this.setupActionLink();}setupConfig(){this.reviewId=this.element.dataset.id;this.action=this.element.dataset.action;this.delta=this.element.dataset.delta||1;this.stateType=`review-${this.action}`;this.stateTypeID=`${this.reviewId}${this.delta}`;if(!reviews[this.reviewId])reviews[this.reviewId]=[];reviews[this.reviewId].push(this.element);}setupTypeState(){const config={url:'/ajax/review/{reviewId}/{action}/{delta}',elements:[this.element],state:{reviewId:this.reviewId,action:this.action},progress:{options:{centered:true,cover:true}}};window.CS.PageState.addStateType(this.stateType,config,this.stateTypeID);const configSave={url:'/ajax/review/{reviewId}/{action}/{delta}/save',method:'POST',elements:[this.element],state:{reviewId:this.reviewId,action:this.action},progress:{options:{centered:true,cover:true}}};window.CS.PageState.addStateType(`${this.stateType}-save`,configSave,this.stateTypeID);}setupLazy(){window.CS.PageState.triggerUpdate(this.stateType,{},this.stateTypeID).then((data)=>{data.forEach((command)=>{if(command.command==='data'){const flagged=command.value.includes('flagged');reviews[this.reviewId].forEach((item)=>{this.setupContent(item,{flagged});});}});});}setupActionLink(){this.element.addEventListener('click',()=>{window.CS.PageState.triggerUpdate(`${this.stateType}-save`,{},this.stateTypeID).then((data)=>{data.forEach((command)=>{if(command.command==='data'){const flagged=command.value.includes('flagged');this.setupPopover(flagged);reviews[this.reviewId].forEach((item)=>{this.setupContent(item,{flagged});});}});});});}setupContent(element,content){if(content.flagged){element.firstElementChild.innerText=Drupal.t('Remove');element.classList.add('icon-save-solid');element.classList.remove('icon-save');}else{element.firstElementChild.innerText=Drupal.t('Save');element.classList.add('icon-save');element.classList.remove('icon-save-solid');}}setupPopover(flagged){window.CommonKit.Util.waitFor(()=>{this.element.setAttribute('data-toggle','popover');const config={trigger:'manual',animation:'fade',appendTo:this.element.closest('.review-teaser-parent')};const popoverInstance=window.CommonKit.Popover.get(this.element,config);popoverInstance.load();const content=flagged?Drupal.t('Saved to your list'):Drupal.t('Removed from your list');popoverInstance.updateContent(content);popoverInstance.show();const delay=1500;setTimeout(()=>{popoverInstance.hide();},delay);},()=>window.CommonKit.Popover);}static get(element){let instance=element[DATA_KEY];if(!instance){instance=new ReviewAction(element);element[DATA_KEY]=instance;}return instance;}static subscribe(selectors){CommonKit.Util.intersectObserveSelectors(selectors,(element)=>{ReviewAction.get(element).load();});}}window.CSM=window.CSM||{};window.CSM.ReviewAction=ReviewAction;const subscribe=()=>{const settings=drupalSettings.csm&&drupalSettings.csm.reviewAction;if(settings&&settings.selectors)ReviewAction.subscribe(Object.keys(settings.selectors));};subscribe();const config={elements:[]};window.CS.PageState.addStateType('review-action-subscribe',config);window.CS.PageState.subscribeUpdateState('review-action-subscribe',()=>{subscribe();});}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,'default')?x['default']:x;}var lazysizes={exports:{}};(function(module){(function(window,factory){var lazySizes=factory(window,window.document,Date);window.lazySizes=lazySizes;if(module.exports)module.exports=lazySizes;}(typeof window!='undefined'?window:{},function l(window,document,Date){var lazysizes,lazySizesCfg;(function(){var prop;var lazySizesDefaults={lazyClass:'lazyload',loadedClass:'lazyloaded',loadingClass:'lazyloading',preloadClass:'lazypreload',errorClass:'lazyerror',autosizesClass:'lazyautosizes',fastLoadedClass:'ls-is-cached',iframeLoadMode:0,srcAttr:'data-src',srcsetAttr:'data-srcset',sizesAttr:'data-sizes',minSize:40,customMedia:{},init:true,expFactor:1.5,hFac:0.8,loadMode:2,loadHidden:true,ricTimeout:0,throttleDelay:125};lazySizesCfg=window.lazySizesConfig||window.lazysizesConfig||{};for(prop in lazySizesDefaults)if(!(prop in lazySizesCfg))lazySizesCfg[prop]=lazySizesDefaults[prop];})();if(!document||!document.getElementsByClassName)return {init:function(){},cfg:lazySizesCfg,noSupport:true};var docElem=document.documentElement;var supportPicture=window.HTMLPictureElement;var _addEventListener='addEventListener';var _getAttribute='getAttribute';var addEventListener=window[_addEventListener].bind(window);var setTimeout=window.setTimeout;var requestAnimationFrame=window.requestAnimationFrame||setTimeout;var requestIdleCallback=window.requestIdleCallback;var regPicture=/^picture$/i;var loadEvents=['load','error','lazyincluded','_lazyloaded'];var regClassCache={};var forEach=Array.prototype.forEach;var hasClass=function(ele,cls){if(!regClassCache[cls])regClassCache[cls]=new RegExp('(\\s|^)'+cls+'(\\s|$)');return regClassCache[cls].test(ele[_getAttribute]('class')||'')&&regClassCache[cls];};var addClass=function(ele,cls){if(!hasClass(ele,cls))ele.setAttribute('class',(ele[_getAttribute]('class')||'').trim()+' '+cls);};var removeClass=function(ele,cls){var reg;if((reg=hasClass(ele,cls)))ele.setAttribute('class',(ele[_getAttribute]('class')||'').replace(reg,' '));};var addRemoveLoadEvents=function(dom,fn,add){var action=add?_addEventListener:'removeEventListener';if(add)addRemoveLoadEvents(dom,fn);loadEvents.forEach(function(evt){dom[action](evt,fn);});};var triggerEvent=function(elem,name,detail,noBubbles,noCancelable){var event=document.createEvent('Event');if(!detail)detail={};detail.instance=lazysizes;event.initEvent(name,!noBubbles,!noCancelable);event.detail=detail;elem.dispatchEvent(event);return event;};var updatePolyfill=function(el,full){var polyfill;if(!supportPicture&&(polyfill=(window.picturefill||lazySizesCfg.pf))){if(full&&full.src&&!el[_getAttribute]('srcset'))el.setAttribute('srcset',full.src);polyfill({reevaluate:true,elements:[el]});}else{if(full&&full.src)el.src=full.src;}};var getCSS=function(elem,style){return (getComputedStyle(elem,null)||{})[style];};var getWidth=function(elem,parent,width){width=width||elem.offsetWidth;while(width<lazySizesCfg.minSize&&parent&&!elem._lazysizesWidth){width=parent.offsetWidth;parent=parent.parentNode;}return width;};var rAF=(function(){var running,waiting;var firstFns=[];var secondFns=[];var fns=firstFns;var run=function(){var runFns=fns;fns=firstFns.length?secondFns:firstFns;running=true;waiting=false;while(runFns.length)runFns.shift()();running=false;};var rafBatch=function(fn,queue){if(running&&!queue)fn.apply(this,arguments);else{fns.push(fn);if(!waiting){waiting=true;(document.hidden?setTimeout:requestAnimationFrame)(run);}}};rafBatch._lsFlush=run;return rafBatch;})();var rAFIt=function(fn,simple){return simple?function(){rAF(fn);}:function(){var that=this;var args=arguments;rAF(function(){fn.apply(that,args);});};;};var throttle=function(fn){var running;var lastTime=0;var gDelay=lazySizesCfg.throttleDelay;var rICTimeout=lazySizesCfg.ricTimeout;var run=function(){running=false;lastTime=Date.now();fn();};var idleCallback=requestIdleCallback&&rICTimeout>49?function(){requestIdleCallback(run,{timeout:rICTimeout});if(rICTimeout!==lazySizesCfg.ricTimeout)rICTimeout=lazySizesCfg.ricTimeout;}:rAFIt(function(){setTimeout(run);},true);;return function(isPriority){var delay;if((isPriority=isPriority===true))rICTimeout=33;if(running)return;running=true;delay=gDelay-(Date.now()-lastTime);if(delay<0)delay=0;if(isPriority||delay<9)idleCallback();else setTimeout(idleCallback,delay);};};var debounce=function(func){var timeout,timestamp;var wait=99;var run=function(){timeout=null;func();};var later=function(){var last=Date.now()-timestamp;if(last<wait)setTimeout(later,wait-last);else (requestIdleCallback||run)(run);};return function(){timestamp=Date.now();if(!timeout)timeout=setTimeout(later,wait);};};var loader=(function(){var preloadElems,isCompleted,resetPreloadingTimer,loadMode,started;var eLvW,elvH,eLtop,eLleft,eLright,eLbottom,isBodyHidden;var regImg=/^img$/i;var regIframe=/^iframe$/i;var supportScroll=('onscroll' in window)&&!(/(gle|ing)bot/.test(navigator.userAgent));var shrinkExpand=0;var currentExpand=0;var isLoading=0;var lowRuns=-1;var resetPreloading=function(e){isLoading--;if(!e||isLoading<0||!e.target)isLoading=0;};var isVisible=function(elem){if(isBodyHidden==null)isBodyHidden=getCSS(document.body,'visibility')=='hidden';return isBodyHidden||!(getCSS(elem.parentNode,'visibility')=='hidden'&&getCSS(elem,'visibility')=='hidden');};var isNestedVisible=function(elem,elemExpand){var outerRect;var parent=elem;var visible=isVisible(elem);eLtop-=elemExpand;eLbottom+=elemExpand;eLleft-=elemExpand;eLright+=elemExpand;while(visible&&(parent=parent.offsetParent)&&parent!=document.body&&parent!=docElem){visible=((getCSS(parent,'opacity')||1)>0);if(visible&&getCSS(parent,'overflow')!='visible'){outerRect=parent.getBoundingClientRect();visible=eLright>outerRect.left&&eLleft<outerRect.right&&eLbottom>outerRect.top-1&&eLtop<outerRect.bottom+1;;}}return visible;};var checkElements=function(){var eLlen,i,rect,autoLoadElem,loadedSomething,elemExpand,elemNegativeExpand,elemExpandVal,beforeExpandVal,defaultExpand,preloadExpand,hFac;var lazyloadElems=lazysizes.elements;if((loadMode=lazySizesCfg.loadMode)&&isLoading<8&&(eLlen=lazyloadElems.length)){i=0;lowRuns++;for(;i<eLlen;i++){if(!lazyloadElems[i]||lazyloadElems[i]._lazyRace)continue;if(!supportScroll||(lazysizes.prematureUnveil&&lazysizes.prematureUnveil(lazyloadElems[i]))){unveilElement(lazyloadElems[i]);continue;}if(!(elemExpandVal=lazyloadElems[i][_getAttribute]('data-expand'))||!(elemExpand=elemExpandVal*1))elemExpand=currentExpand;if(!defaultExpand){defaultExpand=(!lazySizesCfg.expand||lazySizesCfg.expand<1)?docElem.clientHeight>500&&docElem.clientWidth>500?500:370:lazySizesCfg.expand;lazysizes._defEx=defaultExpand;preloadExpand=defaultExpand*lazySizesCfg.expFactor;hFac=lazySizesCfg.hFac;isBodyHidden=null;if(currentExpand<preloadExpand&&isLoading<1&&lowRuns>2&&loadMode>2&&!document.hidden){currentExpand=preloadExpand;lowRuns=0;}else if(loadMode>1&&lowRuns>1&&isLoading<6)currentExpand=defaultExpand;else currentExpand=shrinkExpand;}if(beforeExpandVal!==elemExpand){eLvW=innerWidth+(elemExpand*hFac);elvH=innerHeight+elemExpand;elemNegativeExpand=elemExpand*-1;beforeExpandVal=elemExpand;}rect=lazyloadElems[i].getBoundingClientRect();if((eLbottom=rect.bottom)>=elemNegativeExpand&&(eLtop=rect.top)<=elvH&&(eLright=rect.right)>=elemNegativeExpand*hFac&&(eLleft=rect.left)<=eLvW&&(eLbottom||eLright||eLleft||eLtop)&&(lazySizesCfg.loadHidden||isVisible(lazyloadElems[i]))&&((isCompleted&&isLoading<3&&!elemExpandVal&&(loadMode<3||lowRuns<4))||isNestedVisible(lazyloadElems[i],elemExpand))){unveilElement(lazyloadElems[i]);loadedSomething=true;if(isLoading>9)break;}else{if(!loadedSomething&&isCompleted&&!autoLoadElem&&isLoading<4&&lowRuns<4&&loadMode>2&&(preloadElems[0]||lazySizesCfg.preloadAfterLoad)&&(preloadElems[0]||(!elemExpandVal&&((eLbottom||eLright||eLleft||eLtop)||lazyloadElems[i][_getAttribute](lazySizesCfg.sizesAttr)!='auto'))))autoLoadElem=preloadElems[0]||lazyloadElems[i];}}if(autoLoadElem&&!loadedSomething)unveilElement(autoLoadElem);}};var throttledCheckElements=throttle(checkElements);var switchLoadingClass=function(e){var elem=e.target;if(elem._lazyCache){delete elem._lazyCache;return;}resetPreloading(e);addClass(elem,lazySizesCfg.loadedClass);removeClass(elem,lazySizesCfg.loadingClass);addRemoveLoadEvents(elem,rafSwitchLoadingClass);triggerEvent(elem,'lazyloaded');};var rafedSwitchLoadingClass=rAFIt(switchLoadingClass);var rafSwitchLoadingClass=function(e){rafedSwitchLoadingClass({target:e.target});};var changeIframeSrc=function(elem,src){var loadMode=elem.getAttribute('data-load-mode')||lazySizesCfg.iframeLoadMode;if(loadMode==0)elem.contentWindow.location.replace(src);else{if(loadMode==1)elem.src=src;}};var handleSources=function(source){var customMedia;var sourceSrcset=source[_getAttribute](lazySizesCfg.srcsetAttr);if((customMedia=lazySizesCfg.customMedia[source[_getAttribute]('data-media')||source[_getAttribute]('media')]))source.setAttribute('media',customMedia);if(sourceSrcset)source.setAttribute('srcset',sourceSrcset);};var lazyUnveil=rAFIt(function(elem,detail,isAuto,sizes,isImg){var src,srcset,parent,isPicture,event,firesLoad;if(!(event=triggerEvent(elem,'lazybeforeunveil',detail)).defaultPrevented){if(sizes)if(isAuto)addClass(elem,lazySizesCfg.autosizesClass);else elem.setAttribute('sizes',sizes);srcset=elem[_getAttribute](lazySizesCfg.srcsetAttr);src=elem[_getAttribute](lazySizesCfg.srcAttr);if(isImg){parent=elem.parentNode;isPicture=parent&&regPicture.test(parent.nodeName||'');}firesLoad=detail.firesLoad||(('src' in elem)&&(srcset||src||isPicture));event={target:elem};addClass(elem,lazySizesCfg.loadingClass);if(firesLoad){clearTimeout(resetPreloadingTimer);resetPreloadingTimer=setTimeout(resetPreloading,2500);addRemoveLoadEvents(elem,rafSwitchLoadingClass,true);}if(isPicture)forEach.call(parent.getElementsByTagName('source'),handleSources);if(srcset)elem.setAttribute('srcset',srcset);else{if(src&&!isPicture)if(regIframe.test(elem.nodeName))changeIframeSrc(elem,src);else elem.src=src;}if(isImg&&(srcset||isPicture))updatePolyfill(elem,{src});}if(elem._lazyRace)delete elem._lazyRace;removeClass(elem,lazySizesCfg.lazyClass);rAF(function(){var isLoaded=elem.complete&&elem.naturalWidth>1;if(!firesLoad||isLoaded){if(isLoaded)addClass(elem,lazySizesCfg.fastLoadedClass);switchLoadingClass(event);elem._lazyCache=true;setTimeout(function(){if('_lazyCache' in elem)delete elem._lazyCache;},9);}if(elem.loading=='lazy')isLoading--;},true);});var unveilElement=function(elem){if(elem._lazyRace)return;var detail;var isImg=regImg.test(elem.nodeName);var sizes=isImg&&(elem[_getAttribute](lazySizesCfg.sizesAttr)||elem[_getAttribute]('sizes'));var isAuto=sizes=='auto';if((isAuto||!isCompleted)&&isImg&&(elem[_getAttribute]('src')||elem.srcset)&&!elem.complete&&!hasClass(elem,lazySizesCfg.errorClass)&&hasClass(elem,lazySizesCfg.lazyClass))return;detail=triggerEvent(elem,'lazyunveilread').detail;if(isAuto)autoSizer.updateElem(elem,true,elem.offsetWidth);elem._lazyRace=true;isLoading++;lazyUnveil(elem,detail,isAuto,sizes,isImg);};var afterScroll=debounce(function(){lazySizesCfg.loadMode=3;throttledCheckElements();});var altLoadmodeScrollListner=function(){if(lazySizesCfg.loadMode==3)lazySizesCfg.loadMode=2;afterScroll();};var onload=function(){if(isCompleted)return;if(Date.now()-started<999){setTimeout(onload,999);return;}isCompleted=true;lazySizesCfg.loadMode=3;throttledCheckElements();addEventListener('scroll',altLoadmodeScrollListner,true);};return {_:function(){started=Date.now();lazysizes.elements=document.getElementsByClassName(lazySizesCfg.lazyClass);preloadElems=document.getElementsByClassName(lazySizesCfg.lazyClass+' '+lazySizesCfg.preloadClass);addEventListener('scroll',throttledCheckElements,true);addEventListener('resize',throttledCheckElements,true);addEventListener('pageshow',function(e){if(e.persisted){var loadingElements=document.querySelectorAll('.'+lazySizesCfg.loadingClass);if(loadingElements.length&&loadingElements.forEach)requestAnimationFrame(function(){loadingElements.forEach(function(img){if(img.complete)unveilElement(img);});});}});if(window.MutationObserver)new MutationObserver(throttledCheckElements).observe(docElem,{childList:true,subtree:true,attributes:true});else{docElem[_addEventListener]('DOMNodeInserted',throttledCheckElements,true);docElem[_addEventListener]('DOMAttrModified',throttledCheckElements,true);setInterval(throttledCheckElements,999);}addEventListener('hashchange',throttledCheckElements,true);['focus','mouseover','click','load','transitionend','animationend'].forEach(function(name){document[_addEventListener](name,throttledCheckElements,true);});if((/d$|^c/.test(document.readyState)))onload();else{addEventListener('load',onload);document[_addEventListener]('DOMContentLoaded',throttledCheckElements);setTimeout(onload,20000);}if(lazysizes.elements.length){checkElements();rAF._lsFlush();}else throttledCheckElements();},checkElems:throttledCheckElements,unveil:unveilElement,_aLSL:altLoadmodeScrollListner};})();var autoSizer=(function(){var autosizesElems;var sizeElement=rAFIt(function(elem,parent,event,width){var sources,i,len;elem._lazysizesWidth=width;width+='px';elem.setAttribute('sizes',width);if(regPicture.test(parent.nodeName||'')){sources=parent.getElementsByTagName('source');for(i=0,len=sources.length;i<len;i++)sources[i].setAttribute('sizes',width);}if(!event.detail.dataAttr)updatePolyfill(elem,event.detail);});var getSizeElement=function(elem,dataAttr,width){var event;var parent=elem.parentNode;if(parent){width=getWidth(elem,parent,width);event=triggerEvent(elem,'lazybeforesizes',{width,dataAttr:!!dataAttr});if(!event.defaultPrevented){width=event.detail.width;if(width&&width!==elem._lazysizesWidth)sizeElement(elem,parent,event,width);}}};var updateElementsSizes=function(){var i;var len=autosizesElems.length;if(len){i=0;for(;i<len;i++)getSizeElement(autosizesElems[i]);}};var debouncedUpdateElementsSizes=debounce(updateElementsSizes);return {_:function(){autosizesElems=document.getElementsByClassName(lazySizesCfg.autosizesClass);addEventListener('resize',debouncedUpdateElementsSizes);},checkElems:debouncedUpdateElementsSizes,updateElem:getSizeElement};})();var init=function(){if(!init.i&&document.getElementsByClassName){init.i=true;autoSizer._();loader._();}};setTimeout(function(){if(lazySizesCfg.init)init();});lazysizes={cfg:lazySizesCfg,autoSizer,loader,init,uP:updatePolyfill,aC:addClass,rC:removeClass,hC:hasClass,fire:triggerEvent,gW:getWidth,rAF};return lazysizes;}));}(lazysizes));var lazysizesExports=lazysizes.exports;var lazySizes=getDefaultExportFromCjs(lazysizesExports);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}lazySizes.cfg.lazyClass='image-lazy';lazySizes.cfg.loadingClass='image-lazy--loading';lazySizes.cfg.loadedClass='image-lazy--loaded';lazySizes.cfg.init=false;const Selector={DATA_TOGGLE:'[data-toggle="image"]'};class Image extends ElementBase{load(){if(!this._loaded){this._loaded=true;lazySizes.loader.unveil(this._element);}}static get Selector(){return Selector;}static get lazySizes(){return lazySizes;}static autoLoad(){lazySizes.init();}}window.CommonKit=window.CommonKit||{};window.CommonKit.Image=Image;Image.autoLoad();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DATA_KEY='csm.review-teaser';class ReviewTeaser{constructor(element){this.element=element;}load(){if(!this.loaded){this.loaded=true;this.setup();}}setup(){this.setupConfig();this.setupLimit();if(this.programatic)this.setupReviewAction();}setupConfig(){this.programatic=this.element.getAttribute('data-programatic');}setupReviewAction(){const action=this.element.querySelector('.review-action');if(action)if(window.CS.PageState.getStateType('review-action-subscribe'))window.CS.PageState.triggerUpdate('review-action-subscribe');}setupLimit(){const limit=this.element.querySelector('.review-teaser-limit');if(!limit)return;window.CommonKit.Util.waitFor(()=>{limit.setAttribute('data-toggle','popover');limit.setAttribute('data-html','true');let content='<div class="review-teaser-popover">';content+=`<p><strong>${Drupal.t('Flagged for: @limit',{'@limit':limit.getAttribute('data-limit')})}</strong></p>`;content+=`<p class="small">${Drupal.t('Flags appear when a media pick exceeds your selected content limits, but it could still be a good fit for your kid based on their age and the other preferences you set for them.')}</p>`;content+='</div>';limit.setAttribute('data-content',content);const config={appendTo:this.element.closest('.review-teaser-parent')};window.CommonKit.Popover.get(limit,config).load();},()=>window.CommonKit.Popover);}static get(element){let instance=element[DATA_KEY];if(!instance){instance=new ReviewTeaser(element);element[DATA_KEY]=instance;}return instance;}static subscribe(selectors){selectors.forEach((selector)=>{const element=document.getElementById(selector);if(element)ReviewTeaser.get(element).load();});}}window.CSM=window.CSM||{};window.CSM.ReviewTeaser=ReviewTeaser;const subscribe=()=>{const settings=drupalSettings.csm&&drupalSettings.csm.reviewTeaser;if(settings&&settings.selectors)ReviewTeaser.subscribe(Object.keys(settings.selectors));};subscribe();const config={elements:[]};window.CS.PageState.addStateType('review-teaser-subscribe',config);window.CS.PageState.subscribeUpdateState('review-teaser-subscribe',()=>{subscribe();const reviewBuyLinksStateType=window.CS.PageState.getStateType('review-buy-links-subscribe');if(reviewBuyLinksStateType)window.CS.PageState.triggerUpdate('review-buy-links-subscribe');const reviewActionStateType=window.CS.PageState.getStateType('review-action-subscribe');if(reviewActionStateType)window.CS.PageState.triggerUpdate('review-action-subscribe');const videoModalInitState=window.CS.PageState.getStateType('video-modal-init');if(videoModalInitState)window.CS.PageState.triggerUpdate('video-modal-init');});}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.tabs';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const Event={HIDE:`hide${EVENT_KEY}`,HIDDEN:`hidden${EVENT_KEY}`,SHOW:`show${EVENT_KEY}`,SHOWN:`shown${EVENT_KEY}`,CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`};const ClassName={ACTIVE:'active',DISABLED:'disabled',FADE:'fade'};const Selector={TAB_NAV:'tab_nav, [role="tablist"]',ACTIVE_ITEM:'.tab__item > .active',CONTENT:'tab__content',ACTIVE_PANE:'.tab__pane.active',DATA_TOGGLE:'[data-toggle="tab"]'};class Tab extends ElementBase{constructor(element,config={}){super(element,config);}static get Selector(){return Selector;}static get DATA_KEY(){return DATA_KEY;}static get Event(){return Event;}toggle(){if(this._isActive()||this._isDisabled())return;let target;let actives;const tabNav=this._element.closest(Selector.TAB_NAV);const selector=Util__namespace.getSelectorFromElement(this._element);if(tabNav)actives=[].slice.call(tabNav.querySelectorAll(Selector.ACTIVE_ITEM));const hideEvent=Util__namespace.createEvent(Event.HIDE);hideEvent.relatedTarget=this._element;actives.forEach((previous)=>previous.dispatchEvent(hideEvent));const showEvent=Util__namespace.createEvent(Event.SHOW);showEvent.relatedTarget=actives;this._element.dispatchEvent(showEvent);if(showEvent.defaultPrevented||hideEvent.defaultPrevented)return;if(selector)target=document.querySelector(selector);this._activate(this._element,actives);const complete=()=>{const hiddenEvent=Util__namespace.createEvent(Event.HIDDEN);hiddenEvent.relatedTarget=this._element;actives.forEach((previous)=>previous.dispatchEvent(hiddenEvent));const shownEvent=Util__namespace.createEvent(Event.SHOWN);shownEvent.relatedTarget=actives;this._element.dispatchEvent(shownEvent);};if(target){const tabContent=target.closest(`.${Selector.CONTENT}`);const activePanes=[].slice.call(tabContent.querySelectorAll(`& > ${Selector.ACTIVE_PANE}`));this._activate(target,activePanes,complete);}else complete();}dispose(){delete this._element[DATA_KEY];this._element=null;}_isActive(){return this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&Util__namespace.hasClass(this._element,ClassName.ACTIVE);}_isDisabled(){return this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&Util__namespace.hasClass(this._element,ClassName.DISABLED);}_activate(element,actives,callback){const complete=()=>this._transitionComplete(element,actives,callback);const _actives=[].slice.call(actives);if(_actives.length)_actives.forEach((active)=>{const transitionDuration=Util__namespace.getTransitionDurationFromElement(active);Util__namespace.once(active,Util__namespace.TRANSITION_END,complete);Util__namespace.emulateTransitionEnd(active,transitionDuration);});}_transitionComplete(element,actives,callback){const _actives=[].slice.call(actives);_actives.forEach((active)=>{Util__namespace.addClass(active,ClassName.FADE);Util__namespace.removeClass(active,ClassName.ACTIVE);if(active.getAttribute('role')==='tab'){active.setAttribute('aria-selected',false);if(window.CommonKit.Dropper){const dropperItem=active.closest(window.CommonKit.Dropper.Selector.DATA_TOGGLE);if(dropperItem)Util__namespace.removeClass(dropperItem,ClassName.ACTIVE);}}});Util__namespace.addClass(element,ClassName.ACTIVE);if(element.getAttribute('role')==='tab'){element.setAttribute('aria-selected',true);if(window.CommonKit.Dropper){const dropperItem=element.closest(window.CommonKit.Dropper.Selector.DATA_TOGGLE);if(dropperItem)Util__namespace.addClass(dropperItem,ClassName.ACTIVE);}}Util__namespace.reflow(element);Util__namespace.removeClass(element,ClassName.FADE);if(callback)callback();}}if(typeof document==='object')Util__namespace.on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,(event)=>{const element=event.target.closest(Selector.DATA_TOGGLE);Tab.get(element).toggle();});window.CommonKit=window.CommonKit||{};window.CommonKit.Tab=Tab;}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);var EN_US=['second','minute','hour','day','week','month','year'];function en_US(diff,idx){if(idx===0)return ['just now','right now'];var unit=EN_US[Math.floor(idx/2)];if(diff>1)unit+='s';return [diff+" "+unit+" ago","in "+diff+" "+unit];}var ZH_CN=['','','','','','',''];function zh_CN(diff,idx){if(idx===0)return ['',''];var unit=ZH_CN[~~(idx/2)];return [diff+" "+unit+"\u524D",diff+" "+unit+"\u540E"];}var Locales={};var register=function(locale,func){Locales[locale]=func;};var getLocale=function(locale){return Locales[locale]||Locales['en_US'];};var SEC_ARRAY=[60,60,24,7,365/7/12,12];function toDate(input){if(input instanceof Date)return input;if(!isNaN(input)||/^\d+$/.test(input))return new Date(parseInt(input));input=(input||'').trim().replace(/\.\d+/,'').replace(/-/,'/').replace(/-/,'/').replace(/(\d)T(\d)/,'$1 $2').replace(/Z/,' UTC').replace(/([+-]\d\d):?(\d\d)/,' $1$2');return new Date(input);}function formatDiff(diff,localeFunc){var agoIn=diff<0?1:0;diff=Math.abs(diff);var totalSec=diff;var idx=0;for(;diff>=SEC_ARRAY[idx]&&idx<SEC_ARRAY.length;idx++)diff/=SEC_ARRAY[idx];diff=Math.floor(diff);idx*=2;if(diff>(idx===0?9:1))idx+=1;return localeFunc(diff,idx,totalSec)[agoIn].replace('%s',diff.toString());}function diffSec(date,relativeDate){var relDate=relativeDate?toDate(relativeDate):new Date();return (+relDate-+toDate(date))/1000;}function nextInterval(diff){var rst=1,i=0,d=Math.abs(diff);for(;diff>=SEC_ARRAY[i]&&i<SEC_ARRAY.length;i++){diff/=SEC_ARRAY[i];rst*=SEC_ARRAY[i];}d=d%rst;d=d?rst-d:rst;return Math.ceil(d);}var ATTR_TIMEAGO_TID='timeago-id';function getDateAttribute(node){return node.getAttribute('datetime');}function setTimerId(node,timerId){node.setAttribute(ATTR_TIMEAGO_TID,timerId);}function getTimerId(node){return parseInt(node.getAttribute(ATTR_TIMEAGO_TID));}var clear=function(tid){clearTimeout(tid);};function run(node,date,localeFunc,opts){clear(getTimerId(node));var relativeDate=opts.relativeDate,minInterval=opts.minInterval;var diff=diffSec(date,relativeDate);node.innerText=formatDiff(diff,localeFunc);var tid=setTimeout(function(){run(node,date,localeFunc,opts);},Math.min(Math.max(nextInterval(diff),minInterval||1)*1000,0x7fffffff));setTimerId(node,tid);}function render(nodes,locale,opts){var nodeList=nodes.length?nodes:[nodes];nodeList.forEach(function(node){run(node,getDateAttribute(node),getLocale(locale),{});});return nodeList;}register('en_US',en_US);register('zh_CN',zh_CN);var es={};Object.defineProperty(es,"__esModule",{value:true});function default_1(number,index){return [['justo ahora','en un rato'],['hace %s segundos','en %s segundos'],['hace 1 minuto','en 1 minuto'],['hace %s minutos','en %s minutos'],['hace 1 hora','en 1 hora'],['hace %s horas','en %s horas'],['hace 1 da','en 1 da'],['hace %s das','en %s das'],['hace 1 semana','en 1 semana'],['hace %s semanas','en %s semanas'],['hace 1 mes','en 1 mes'],['hace %s meses','en %s meses'],['hace 1 ao','en 1 ao'],['hace %s aos','en %s aos']][index];}var _default=es.default=default_1;class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}register('es',_default);const Selector={DATA_TOGGLE:'[data-toggle="date"]'};let Date$1=class Date extends ElementBase{constructor(element,config={}){super(element,config);}load(){if(!this._element.getAttribute('datetime'))this._element.setAttribute('datetime',this._element.innerText);try{this._timeago=render(this._element,this._config.lang);}catch(e){throw new Error(e);}}static get Selector(){return Selector;}_getConfig(config){const _config=super._getConfig(config);_config.lang=this._element.dataset.lang||'en_US';return _config;}};window.CommonKit=window.CommonKit||{};window.CommonKit.Date=Date$1;const dateSubscribe=()=>{const settings=drupalSettings.commonKit&&drupalSettings.commonKit.date;if(settings&&settings.selectors)Date$1.subscribe(Object.keys(settings.selectors));};dateSubscribe();const config={elements:[]};window.CS.PageState.addStateType('date-subscribe',config);window.CS.PageState.subscribeUpdateState('date-subscribe',()=>{dateSubscribe();});}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const Selector={DATA_TOGGLE:'[data-toggle="avatar"]'};const Default={width:128,fontFamily:'"Lato", helvetica, arial, sans-serif',backgroundColor:'#423fe1',fontColor:'#fff'};class Avatar extends ElementBase{load(){if(!this._loaded){this._loaded=true;this.build();}}build(){if(!this._config.src)this._buildLetterAvatar(this._config.name,this._config.width);}_buildLetterAvatar(name,size){const dataURI=window.CommonKit.avatarCache[name];if(dataURI)this._element.src=dataURI;else this._element.src=this._generateDataURI(name,size);}_generateDataURI(name,size){let dataURI=null;const nameSplit=String(name).toUpperCase().split(' ');let initials=null;let _size=size;if(nameSplit.length===1)initials=nameSplit[0]?nameSplit[0].charAt(0):'?';else initials=nameSplit[0].charAt(0)+nameSplit[1].charAt(0);if(window.devicePixelRatio)_size*=window.devicePixelRatio;let canvas=document.createElement('canvas');const fontSize=_size/2.2;canvas.width=_size;canvas.height=_size;const context=canvas.getContext('2d');context.fillStyle=this._config.backgroundColor;context.fillRect(0,0,canvas.width,canvas.height);context.font=`${fontSize}px ${this._config.fontFamily}`;const textWidth=context.measureText(initials).width;const xPos=Math.round(_size/2)-Math.round(textWidth/2);const yPos=_size/2*1.34;context.fillStyle=this._config.fontColor;context.fillText(initials,xPos,yPos);dataURI=canvas.toDataURL();window.CommonKit.avatarCache[name]=dataURI;canvas=null;return dataURI;}refreshAvatar(){if(this._element){this._config.src=null;this.build();}}static get Selector(){return Selector;}static get Default(){return Default;}_getConfig(config){const _config=super._getConfig(config);const src=_config.src||this._element.getAttribute('src');_config.src=src&&src!=='.'?src:null;_config.name=_config.name||this._element.getAttribute('alt')||'';return _config;}}window.CommonKit=window.CommonKit||{};window.CommonKit.Avatar=Avatar;window.CommonKit.avatarCache={};const AvatarSubscribe=()=>{const settings=drupalSettings.commonKit&&drupalSettings.commonKit.avatar;if(settings&&settings.selectors)Avatar.subscribe(Object.keys(settings.selectors));};AvatarSubscribe();const config={elements:[]};window.CS.PageState.addStateType('avatar-subscribe',config);window.CS.PageState.subscribeUpdateState('avatar-subscribe',()=>{AvatarSubscribe();});}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.user-generated-content';const EVENT_KEY=`.${DATA_KEY}`;const Selector={CONTENT:'.user-generated-content__content',REACTIONS:'.user-generated-content__reactions',ACTIONS:'.user-generated-content__actions',ACTION_HELPFUL:'.user-generated-content__action-helpful',ACTION_REPORT:'.user-generated-content__action-report',ACTION_DELETE:'.user-generated-content__action-delete',DATA_TOGGLE:'[data-toggle="user-generated-content"]'};const Event={LOAD:`load${EVENT_KEY}`,LOADED:`loaded${EVENT_KEY}`,HELPFUL:`helpful${EVENT_KEY}`,HELPFUL_RESOLVED:`helpful_resolved${EVENT_KEY}`,REPORT:`report${EVENT_KEY}`,DELETE:`delete${EVENT_KEY}`};class UserGeneratedContent extends ElementBase{load(){if(!this.loaded){this.loaded=true;const loadEvent=Util__namespace.createEvent(Event.LOAD);this._element.dispatchEvent(loadEvent);this.setup();const loadedEvent=Util__namespace.createEvent(Event.MOUNTED);this._element.dispatchEvent(loadedEvent);}}setup(){this.content=this._element.querySelector(Selector.CONTENT);this.actions=this._element.querySelector(Selector.ACTIONS);this.setupEventListeners();}setupEventListeners(){this.setupEventListenerActions();}setupEventListenerActions(){if(this.actions){const helpfulAction=this.actions.querySelector(Selector.ACTION_HELPFUL);if(helpfulAction){helpfulAction.addEventListener('click',()=>{const helpfulEvent=Util__namespace.createEvent(Event.HELPFUL);this._element.dispatchEvent(helpfulEvent);});this._element.addEventListener(Event.HELPFUL_RESOLVED,()=>{const helpful=Util__namespace.hasClass(helpfulAction,'active');if(!helpful){Util__namespace.addClass(helpfulAction,'active');Util__namespace.addClass(helpfulAction,'icon-thumbs-up-solid');Util__namespace.removeClass(helpfulAction,'icon-thumbs-up');}else{Util__namespace.removeClass(helpfulAction,'active');Util__namespace.removeClass(helpfulAction,'icon-thumbs-up-solid');Util__namespace.addClass(helpfulAction,'icon-thumbs-up');}});}const reportAction=this.actions.querySelector(Selector.ACTION_REPORT);if(reportAction)reportAction.addEventListener('click',()=>{const modal=document.getElementById(reportAction.getAttribute('data-target'));if(modal)window.CommonKit.Modal.get(modal).show({trigger:reportAction});const reportEvent=Util__namespace.createEvent(Event.REPORT);this._element.dispatchEvent(reportEvent);});const deleteAction=this.actions.querySelector(Selector.ACTION_DELETE);if(deleteAction)deleteAction.addEventListener('click',()=>{const deleteEvent=Util__namespace.createEvent(Event.DELETE);this._element.dispatchEvent(deleteEvent);});}}subscribeHelpful(callback){this._element.addEventListener(Event.HELPFUL,callback);}triggerHelpfulResolve(){const helpfulResolvedEvent=Util__namespace.createEvent(Event.HELPFUL_RESOLVED);this._element.dispatchEvent(helpfulResolvedEvent);}subscribeReport(callback){this._element.addEventListener(Event.REPORT,callback);}subscribeDelete(callback){this._element.addEventListener(Event.DELETE,callback);}static get Selector(){return Selector;}static get Event(){return Event;}static get DATA_KEY(){return DATA_KEY;}}window.CommonKit=window.CommonKit||{};window.CommonKit.UserGeneratedContent=UserGeneratedContent;const userGeneratedContentSubscribe=()=>{const settings=drupalSettings.commonKit&&drupalSettings.commonKit.userGeneratedContent;if(settings&&settings.selectors)UserGeneratedContent.subscribe(Object.keys(settings.selectors));};userGeneratedContentSubscribe();const config={elements:[]};window.CS.PageState.addStateType('user-generated-content-subscribe',config);window.CS.PageState.subscribeUpdateState('user-generated-content-subscribe',()=>{userGeneratedContentSubscribe();window.CS.PageState.triggerUpdate('avatar-subscribe');window.CS.PageState.triggerUpdate('date-subscribe');const revealState=window.CS.PageState.getStateType('reveal-subscribe');if(revealState)window.CS.PageState.triggerUpdate('reveal-subscribe');});}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Util));})(this,(function(Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY$1='cs.close';const EVENT_KEY$1=`.${DATA_KEY$1}`;const Default={destroy:true};const Event$1={CLOSE:`close${EVENT_KEY$1}`,CLOSED:`closed${EVENT_KEY$1}`};const ClassName={FADE:'fade'};class Close extends ElementBase{close(){const closeEvent=Util__namespace.createEvent(Event$1.CLOSE);this._element.dispatchEvent(closeEvent);const transitionDuration=Util__namespace.getTransitionDurationFromElement(this._element);Util__namespace.addClass(this._element,ClassName.FADE);const complete=()=>{if(this._config.destroy)this._element.parentElement.removeChild(this._element);const closedEvent=Util__namespace.createEvent(Event$1.CLOSED);this._element.dispatchEvent(closedEvent);};Util__namespace.once(this._element,Util__namespace.TRANSITION_END,complete);Util__namespace.emulateTransitionEnd(this._element,transitionDuration);}static get Default(){return Default;}static get Event(){return Event$1;}}window.CommonKit=window.CommonKit||{};window.CommonKit.Close=Close;const DATA_KEY='cs.notification';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const Selector={ELEMENT:'.notification',DATA_DISMISS:'[data-dismiss="notification"]'};const Event={DISMISS:`dismiss${EVENT_KEY}`,DISMISSED:`dismissed${EVENT_KEY}`,CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`};class Notification extends ElementBase{dismiss(){const dismissEvent=Util__namespace.createEvent(Event.DISMISS);const dismissedEvent=Util__namespace.createEvent(Event.DISMISSED);this._element.addEventListener(Close.Event.CLOSE,()=>{this._element.dispatchEvent(dismissEvent);});this._element.addEventListener(Close.Event.CLOSED,()=>{this._element.dispatchEvent(dismissedEvent);});Close.get(this._element).close();}}Util__namespace.on(Event.CLICK_DATA_API,Selector.DATA_DISMISS,(event)=>{const element=event.target.closest(Selector.ELEMENT);Notification.get(element).dismiss();});window.CommonKit=window.CommonKit||{};window.CommonKit.Notification=Notification;window.CommonKit.Notification.build=(config={})=>{const notification=document.createElement('div');notification.classList.add('notification');if(config.type)notification.classList.add(`notification--${config.type}`);if(config.noIcon)notification.classList.add('notification--no-icon');if(config.content)notification.innerHTML=config.content;return notification;};}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';var top='top';var bottom='bottom';var right='right';var left='left';var auto='auto';var basePlacements=[top,bottom,right,left];var start='start';var end='end';var clippingParents='clippingParents';var viewport='viewport';var popper='popper';var reference='reference';var variationPlacements=basePlacements.reduce(function(acc,placement){return acc.concat([placement+"-"+start,placement+"-"+end]);},[]);var placements=[].concat(basePlacements,[auto]).reduce(function(acc,placement){return acc.concat([placement,placement+"-"+start,placement+"-"+end]);},[]);var beforeRead='beforeRead';var read='read';var afterRead='afterRead';var beforeMain='beforeMain';var main='main';var afterMain='afterMain';var beforeWrite='beforeWrite';var write='write';var afterWrite='afterWrite';var modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(element){return element?(element.nodeName||'').toLowerCase():null;}function getWindow(node){if(node==null)return window;if(node.toString()!=='[object Window]'){var ownerDocument=node.ownerDocument;return ownerDocument?ownerDocument.defaultView||window:window;}return node;}function isElement(node){var OwnElement=getWindow(node).Element;return node instanceof OwnElement||node instanceof Element;}function isHTMLElement(node){var OwnElement=getWindow(node).HTMLElement;return node instanceof OwnElement||node instanceof HTMLElement;}function isShadowRoot(node){if(typeof ShadowRoot==='undefined')return false;var OwnElement=getWindow(node).ShadowRoot;return node instanceof OwnElement||node instanceof ShadowRoot;}function applyStyles(_ref){var state=_ref.state;Object.keys(state.elements).forEach(function(name){var style=state.styles[name]||{};var attributes=state.attributes[name]||{};var element=state.elements[name];if(!isHTMLElement(element)||!getNodeName(element))return;Object.assign(element.style,style);Object.keys(attributes).forEach(function(name){var value=attributes[name];if(value===false)element.removeAttribute(name);else element.setAttribute(name,value===true?'':value);});});}function effect$2(_ref2){var state=_ref2.state;var initialStyles={popper:{position:state.options.strategy,left:'0',top:'0',margin:'0'},arrow:{position:'absolute'},reference:{}};Object.assign(state.elements.popper.style,initialStyles.popper);state.styles=initialStyles;if(state.elements.arrow)Object.assign(state.elements.arrow.style,initialStyles.arrow);return function(){Object.keys(state.elements).forEach(function(name){var element=state.elements[name];var attributes=state.attributes[name]||{};var styleProperties=Object.keys(state.styles.hasOwnProperty(name)?state.styles[name]:initialStyles[name]);var style=styleProperties.reduce(function(style,property){style[property]='';return style;},{});if(!isHTMLElement(element)||!getNodeName(element))return;Object.assign(element.style,style);Object.keys(attributes).forEach(function(attribute){element.removeAttribute(attribute);});});};}var applyStyles$1={name:'applyStyles',enabled:true,phase:'write',fn:applyStyles,effect:effect$2,requires:['computeStyles']};function getBasePlacement(placement){return placement.split('-')[0];}var max=Math.max;var min=Math.min;var round=Math.round;function getUAString(){var uaData=navigator.userAgentData;if(uaData!=null&&uaData.brands&&Array.isArray(uaData.brands))return uaData.brands.map(function(item){return item.brand+"/"+item.version;}).join(' ');return navigator.userAgent;}function isLayoutViewport(){return !/^((?!chrome|android).)*safari/i.test(getUAString());}function getBoundingClientRect(element,includeScale,isFixedStrategy){if(includeScale===void 0)includeScale=false;if(isFixedStrategy===void 0)isFixedStrategy=false;var clientRect=element.getBoundingClientRect();var scaleX=1;var scaleY=1;if(includeScale&&isHTMLElement(element)){scaleX=element.offsetWidth>0?round(clientRect.width)/element.offsetWidth||1:1;scaleY=element.offsetHeight>0?round(clientRect.height)/element.offsetHeight||1:1;}var _ref=isElement(element)?getWindow(element):window,visualViewport=_ref.visualViewport;var addVisualOffsets=!isLayoutViewport()&&isFixedStrategy;var x=(clientRect.left+(addVisualOffsets&&visualViewport?visualViewport.offsetLeft:0))/scaleX;var y=(clientRect.top+(addVisualOffsets&&visualViewport?visualViewport.offsetTop:0))/scaleY;var width=clientRect.width/scaleX;var height=clientRect.height/scaleY;return {width,height,top:y,right:x+width,bottom:y+height,left:x,x,y};}function getLayoutRect(element){var clientRect=getBoundingClientRect(element);var width=element.offsetWidth;var height=element.offsetHeight;if(Math.abs(clientRect.width-width)<=1)width=clientRect.width;if(Math.abs(clientRect.height-height)<=1)height=clientRect.height;return {x:element.offsetLeft,y:element.offsetTop,width,height};}function contains(parent,child){var rootNode=child.getRootNode&&child.getRootNode();if(parent.contains(child))return true;else{if(rootNode&&isShadowRoot(rootNode)){var next=child;do{if(next&&parent.isSameNode(next))return true;next=next.parentNode||next.host;}while(next);}}return false;}function getComputedStyle(element){return getWindow(element).getComputedStyle(element);}function isTableElement(element){return ['table','td','th'].indexOf(getNodeName(element))>=0;}function getDocumentElement(element){return ((isElement(element)?element.ownerDocument:element.document)||window.document).documentElement;}function getParentNode(element){if(getNodeName(element)==='html')return element;return (element.assignedSlot||element.parentNode||(isShadowRoot(element)?element.host:null)||getDocumentElement(element));}function getTrueOffsetParent(element){if(!isHTMLElement(element)||getComputedStyle(element).position==='fixed')return null;return element.offsetParent;}function getContainingBlock(element){var isFirefox=/firefox/i.test(getUAString());var isIE=/Trident/i.test(getUAString());if(isIE&&isHTMLElement(element)){var elementCss=getComputedStyle(element);if(elementCss.position==='fixed')return null;}var currentNode=getParentNode(element);if(isShadowRoot(currentNode))currentNode=currentNode.host;while(isHTMLElement(currentNode)&&['html','body'].indexOf(getNodeName(currentNode))<0){var css=getComputedStyle(currentNode);if(css.transform!=='none'||css.perspective!=='none'||css.contain==='paint'||['transform','perspective'].indexOf(css.willChange)!==-1||isFirefox&&css.willChange==='filter'||isFirefox&&css.filter&&css.filter!=='none')return currentNode;else currentNode=currentNode.parentNode;}return null;}function getOffsetParent(element){var window=getWindow(element);var offsetParent=getTrueOffsetParent(element);while(offsetParent&&isTableElement(offsetParent)&&getComputedStyle(offsetParent).position==='static')offsetParent=getTrueOffsetParent(offsetParent);if(offsetParent&&(getNodeName(offsetParent)==='html'||getNodeName(offsetParent)==='body'&&getComputedStyle(offsetParent).position==='static'))return window;return offsetParent||getContainingBlock(element)||window;}function getMainAxisFromPlacement(placement){return ['top','bottom'].indexOf(placement)>=0?'x':'y';}function within(min$1,value,max$1){return max(min$1,min(value,max$1));}function withinMaxClamp(min,value,max){var v=within(min,value,max);return v>max?max:v;}function getFreshSideObject(){return {top:0,right:0,bottom:0,left:0};}function mergePaddingObject(paddingObject){return Object.assign({},getFreshSideObject(),paddingObject);}function expandToHashMap(value,keys){return keys.reduce(function(hashMap,key){hashMap[key]=value;return hashMap;},{});}var toPaddingObject=function toPaddingObject(padding,state){padding=typeof padding==='function'?padding(Object.assign({},state.rects,{placement:state.placement})):padding;return mergePaddingObject(typeof padding!=='number'?padding:expandToHashMap(padding,basePlacements));};function arrow(_ref){var _state$modifiersData$;var state=_ref.state,name=_ref.name,options=_ref.options;var arrowElement=state.elements.arrow;var popperOffsets=state.modifiersData.popperOffsets;var basePlacement=getBasePlacement(state.placement);var axis=getMainAxisFromPlacement(basePlacement);var isVertical=[left,right].indexOf(basePlacement)>=0;var len=isVertical?'height':'width';if(!arrowElement||!popperOffsets)return;var paddingObject=toPaddingObject(options.padding,state);var arrowRect=getLayoutRect(arrowElement);var minProp=axis==='y'?top:left;var maxProp=axis==='y'?bottom:right;var endDiff=state.rects.reference[len]+state.rects.reference[axis]-popperOffsets[axis]-state.rects.popper[len];var startDiff=popperOffsets[axis]-state.rects.reference[axis];var arrowOffsetParent=getOffsetParent(arrowElement);var clientSize=arrowOffsetParent?axis==='y'?arrowOffsetParent.clientHeight||0:arrowOffsetParent.clientWidth||0:0;var centerToReference=endDiff/2-startDiff/2;var min=paddingObject[minProp];var max=clientSize-arrowRect[len]-paddingObject[maxProp];var center=clientSize/2-arrowRect[len]/2+centerToReference;var offset=within(min,center,max);var axisProp=axis;state.modifiersData[name]=(_state$modifiersData$={},_state$modifiersData$[axisProp]=offset,_state$modifiersData$.centerOffset=offset-center,_state$modifiersData$);}function effect$1(_ref2){var state=_ref2.state,options=_ref2.options;var _options$element=options.element,arrowElement=_options$element===void 0?'[data-popper-arrow]':_options$element;if(arrowElement==null)return;if(typeof arrowElement==='string'){arrowElement=state.elements.popper.querySelector(arrowElement);if(!arrowElement)return;}if(!contains(state.elements.popper,arrowElement))return;state.elements.arrow=arrowElement;}var arrow$1={name:'arrow',enabled:true,phase:'main',fn:arrow,effect:effect$1,requires:['popperOffsets'],requiresIfExists:['preventOverflow']};function getVariation(placement){return placement.split('-')[1];}var unsetSides={top:'auto',right:'auto',bottom:'auto',left:'auto'};function roundOffsetsByDPR(_ref,win){var x=_ref.x,y=_ref.y;var dpr=win.devicePixelRatio||1;return {x:round(x*dpr)/dpr||0,y:round(y*dpr)/dpr||0};}function mapToStyles(_ref2){var _Object$assign2;var popper=_ref2.popper,popperRect=_ref2.popperRect,placement=_ref2.placement,variation=_ref2.variation,offsets=_ref2.offsets,position=_ref2.position,gpuAcceleration=_ref2.gpuAcceleration,adaptive=_ref2.adaptive,roundOffsets=_ref2.roundOffsets,isFixed=_ref2.isFixed;var _offsets$x=offsets.x,x=_offsets$x===void 0?0:_offsets$x,_offsets$y=offsets.y,y=_offsets$y===void 0?0:_offsets$y;var _ref3=typeof roundOffsets==='function'?roundOffsets({x,y}):{x,y};x=_ref3.x;y=_ref3.y;var hasX=offsets.hasOwnProperty('x');var hasY=offsets.hasOwnProperty('y');var sideX=left;var sideY=top;var win=window;if(adaptive){var offsetParent=getOffsetParent(popper);var heightProp='clientHeight';var widthProp='clientWidth';if(offsetParent===getWindow(popper)){offsetParent=getDocumentElement(popper);if(getComputedStyle(offsetParent).position!=='static'&&position==='absolute'){heightProp='scrollHeight';widthProp='scrollWidth';}}offsetParent=offsetParent;if(placement===top||(placement===left||placement===right)&&variation===end){sideY=bottom;var offsetY=isFixed&&offsetParent===win&&win.visualViewport?win.visualViewport.height:offsetParent[heightProp];y-=offsetY-popperRect.height;y*=gpuAcceleration?1:-1;}if(placement===left||(placement===top||placement===bottom)&&variation===end){sideX=right;var offsetX=isFixed&&offsetParent===win&&win.visualViewport?win.visualViewport.width:offsetParent[widthProp];x-=offsetX-popperRect.width;x*=gpuAcceleration?1:-1;}}var commonStyles=Object.assign({position},adaptive&&unsetSides);var _ref4=roundOffsets===true?roundOffsetsByDPR({x,y},getWindow(popper)):{x,y};x=_ref4.x;y=_ref4.y;if(gpuAcceleration){var _Object$assign;return Object.assign({},commonStyles,(_Object$assign={},_Object$assign[sideY]=hasY?'0':'',_Object$assign[sideX]=hasX?'0':'',_Object$assign.transform=(win.devicePixelRatio||1)<=1?"translate("+x+"px, "+y+"px)":"translate3d("+x+"px, "+y+"px, 0)",_Object$assign));}return Object.assign({},commonStyles,(_Object$assign2={},_Object$assign2[sideY]=hasY?y+"px":'',_Object$assign2[sideX]=hasX?x+"px":'',_Object$assign2.transform='',_Object$assign2));}function computeStyles(_ref5){var state=_ref5.state,options=_ref5.options;var _options$gpuAccelerat=options.gpuAcceleration,gpuAcceleration=_options$gpuAccelerat===void 0?true:_options$gpuAccelerat,_options$adaptive=options.adaptive,adaptive=_options$adaptive===void 0?true:_options$adaptive,_options$roundOffsets=options.roundOffsets,roundOffsets=_options$roundOffsets===void 0?true:_options$roundOffsets;var commonStyles={placement:getBasePlacement(state.placement),variation:getVariation(state.placement),popper:state.elements.popper,popperRect:state.rects.popper,gpuAcceleration,isFixed:state.options.strategy==='fixed'};if(state.modifiersData.popperOffsets!=null)state.styles.popper=Object.assign({},state.styles.popper,mapToStyles(Object.assign({},commonStyles,{offsets:state.modifiersData.popperOffsets,position:state.options.strategy,adaptive,roundOffsets})));if(state.modifiersData.arrow!=null)state.styles.arrow=Object.assign({},state.styles.arrow,mapToStyles(Object.assign({},commonStyles,{offsets:state.modifiersData.arrow,position:'absolute',adaptive:false,roundOffsets})));state.attributes.popper=Object.assign({},state.attributes.popper,{'data-popper-placement':state.placement});}var computeStyles$1={name:'computeStyles',enabled:true,phase:'beforeWrite',fn:computeStyles,data:{}};var passive={passive:true};function effect(_ref){var state=_ref.state,instance=_ref.instance,options=_ref.options;var _options$scroll=options.scroll,scroll=_options$scroll===void 0?true:_options$scroll,_options$resize=options.resize,resize=_options$resize===void 0?true:_options$resize;var window=getWindow(state.elements.popper);var scrollParents=[].concat(state.scrollParents.reference,state.scrollParents.popper);if(scroll)scrollParents.forEach(function(scrollParent){scrollParent.addEventListener('scroll',instance.update,passive);});if(resize)window.addEventListener('resize',instance.update,passive);return function(){if(scroll)scrollParents.forEach(function(scrollParent){scrollParent.removeEventListener('scroll',instance.update,passive);});if(resize)window.removeEventListener('resize',instance.update,passive);};}var eventListeners={name:'eventListeners',enabled:true,phase:'write',fn:function fn(){},effect,data:{}};var hash$1={left:'right',right:'left',bottom:'top',top:'bottom'};function getOppositePlacement(placement){return placement.replace(/left|right|bottom|top/g,function(matched){return hash$1[matched];});}var hash={start:'end',end:'start'};function getOppositeVariationPlacement(placement){return placement.replace(/start|end/g,function(matched){return hash[matched];});}function getWindowScroll(node){var win=getWindow(node);var scrollLeft=win.pageXOffset;var scrollTop=win.pageYOffset;return {scrollLeft,scrollTop};}function getWindowScrollBarX(element){return getBoundingClientRect(getDocumentElement(element)).left+getWindowScroll(element).scrollLeft;}function getViewportRect(element,strategy){var win=getWindow(element);var html=getDocumentElement(element);var visualViewport=win.visualViewport;var width=html.clientWidth;var height=html.clientHeight;var x=0;var y=0;if(visualViewport){width=visualViewport.width;height=visualViewport.height;var layoutViewport=isLayoutViewport();if(layoutViewport||!layoutViewport&&strategy==='fixed'){x=visualViewport.offsetLeft;y=visualViewport.offsetTop;}}return {width,height,x:x+getWindowScrollBarX(element),y};}function getDocumentRect(element){var _element$ownerDocumen;var html=getDocumentElement(element);var winScroll=getWindowScroll(element);var body=(_element$ownerDocumen=element.ownerDocument)==null?void 0:_element$ownerDocumen.body;var width=max(html.scrollWidth,html.clientWidth,body?body.scrollWidth:0,body?body.clientWidth:0);var height=max(html.scrollHeight,html.clientHeight,body?body.scrollHeight:0,body?body.clientHeight:0);var x=-winScroll.scrollLeft+getWindowScrollBarX(element);var y=-winScroll.scrollTop;if(getComputedStyle(body||html).direction==='rtl')x+=max(html.clientWidth,body?body.clientWidth:0)-width;return {width,height,x,y};}function isScrollParent(element){var _getComputedStyle=getComputedStyle(element),overflow=_getComputedStyle.overflow,overflowX=_getComputedStyle.overflowX,overflowY=_getComputedStyle.overflowY;return /auto|scroll|overlay|hidden/.test(overflow+overflowY+overflowX);}function getScrollParent(node){if(['html','body','#document'].indexOf(getNodeName(node))>=0)return node.ownerDocument.body;if(isHTMLElement(node)&&isScrollParent(node))return node;return getScrollParent(getParentNode(node));}function listScrollParents(element,list){var _element$ownerDocumen;if(list===void 0)list=[];var scrollParent=getScrollParent(element);var isBody=scrollParent===((_element$ownerDocumen=element.ownerDocument)==null?void 0:_element$ownerDocumen.body);var win=getWindow(scrollParent);var target=isBody?[win].concat(win.visualViewport||[],isScrollParent(scrollParent)?scrollParent:[]):scrollParent;var updatedList=list.concat(target);return isBody?updatedList:updatedList.concat(listScrollParents(getParentNode(target)));}function rectToClientRect(rect){return Object.assign({},rect,{left:rect.x,top:rect.y,right:rect.x+rect.width,bottom:rect.y+rect.height});}function getInnerBoundingClientRect(element,strategy){var rect=getBoundingClientRect(element,false,strategy==='fixed');rect.top=rect.top+element.clientTop;rect.left=rect.left+element.clientLeft;rect.bottom=rect.top+element.clientHeight;rect.right=rect.left+element.clientWidth;rect.width=element.clientWidth;rect.height=element.clientHeight;rect.x=rect.left;rect.y=rect.top;return rect;}function getClientRectFromMixedType(element,clippingParent,strategy){return clippingParent===viewport?rectToClientRect(getViewportRect(element,strategy)):isElement(clippingParent)?getInnerBoundingClientRect(clippingParent,strategy):rectToClientRect(getDocumentRect(getDocumentElement(element)));}function getClippingParents(element){var clippingParents=listScrollParents(getParentNode(element));var canEscapeClipping=['absolute','fixed'].indexOf(getComputedStyle(element).position)>=0;var clipperElement=canEscapeClipping&&isHTMLElement(element)?getOffsetParent(element):element;if(!isElement(clipperElement))return [];return clippingParents.filter(function(clippingParent){return isElement(clippingParent)&&contains(clippingParent,clipperElement)&&getNodeName(clippingParent)!=='body';});}function getClippingRect(element,boundary,rootBoundary,strategy){var mainClippingParents=boundary==='clippingParents'?getClippingParents(element):[].concat(boundary);var clippingParents=[].concat(mainClippingParents,[rootBoundary]);var firstClippingParent=clippingParents[0];var clippingRect=clippingParents.reduce(function(accRect,clippingParent){var rect=getClientRectFromMixedType(element,clippingParent,strategy);accRect.top=max(rect.top,accRect.top);accRect.right=min(rect.right,accRect.right);accRect.bottom=min(rect.bottom,accRect.bottom);accRect.left=max(rect.left,accRect.left);return accRect;},getClientRectFromMixedType(element,firstClippingParent,strategy));clippingRect.width=clippingRect.right-clippingRect.left;clippingRect.height=clippingRect.bottom-clippingRect.top;clippingRect.x=clippingRect.left;clippingRect.y=clippingRect.top;return clippingRect;}function computeOffsets(_ref){var reference=_ref.reference,element=_ref.element,placement=_ref.placement;var basePlacement=placement?getBasePlacement(placement):null;var variation=placement?getVariation(placement):null;var commonX=reference.x+reference.width/2-element.width/2;var commonY=reference.y+reference.height/2-element.height/2;var offsets;switch(basePlacement){case top:offsets={x:commonX,y:reference.y-element.height};break;case bottom:offsets={x:commonX,y:reference.y+reference.height};break;case right:offsets={x:reference.x+reference.width,y:commonY};break;case left:offsets={x:reference.x-element.width,y:commonY};break;default:offsets={x:reference.x,y:reference.y};}var mainAxis=basePlacement?getMainAxisFromPlacement(basePlacement):null;if(mainAxis!=null){var len=mainAxis==='y'?'height':'width';switch(variation){case start:offsets[mainAxis]=offsets[mainAxis]-(reference[len]/2-element[len]/2);break;case end:offsets[mainAxis]=offsets[mainAxis]+(reference[len]/2-element[len]/2);break;}}return offsets;}function detectOverflow(state,options){if(options===void 0)options={};var _options=options,_options$placement=_options.placement,placement=_options$placement===void 0?state.placement:_options$placement,_options$strategy=_options.strategy,strategy=_options$strategy===void 0?state.strategy:_options$strategy,_options$boundary=_options.boundary,boundary=_options$boundary===void 0?clippingParents:_options$boundary,_options$rootBoundary=_options.rootBoundary,rootBoundary=_options$rootBoundary===void 0?viewport:_options$rootBoundary,_options$elementConte=_options.elementContext,elementContext=_options$elementConte===void 0?popper:_options$elementConte,_options$altBoundary=_options.altBoundary,altBoundary=_options$altBoundary===void 0?false:_options$altBoundary,_options$padding=_options.padding,padding=_options$padding===void 0?0:_options$padding;var paddingObject=mergePaddingObject(typeof padding!=='number'?padding:expandToHashMap(padding,basePlacements));var altContext=elementContext===popper?reference:popper;var popperRect=state.rects.popper;var element=state.elements[altBoundary?altContext:elementContext];var clippingClientRect=getClippingRect(isElement(element)?element:element.contextElement||getDocumentElement(state.elements.popper),boundary,rootBoundary,strategy);var referenceClientRect=getBoundingClientRect(state.elements.reference);var popperOffsets=computeOffsets({reference:referenceClientRect,element:popperRect,strategy:'absolute',placement});var popperClientRect=rectToClientRect(Object.assign({},popperRect,popperOffsets));var elementClientRect=elementContext===popper?popperClientRect:referenceClientRect;var overflowOffsets={top:clippingClientRect.top-elementClientRect.top+paddingObject.top,bottom:elementClientRect.bottom-clippingClientRect.bottom+paddingObject.bottom,left:clippingClientRect.left-elementClientRect.left+paddingObject.left,right:elementClientRect.right-clippingClientRect.right+paddingObject.right};var offsetData=state.modifiersData.offset;if(elementContext===popper&&offsetData){var offset=offsetData[placement];Object.keys(overflowOffsets).forEach(function(key){var multiply=[right,bottom].indexOf(key)>=0?1:-1;var axis=[top,bottom].indexOf(key)>=0?'y':'x';overflowOffsets[key]+=offset[axis]*multiply;});}return overflowOffsets;}function computeAutoPlacement(state,options){if(options===void 0)options={};var _options=options,placement=_options.placement,boundary=_options.boundary,rootBoundary=_options.rootBoundary,padding=_options.padding,flipVariations=_options.flipVariations,_options$allowedAutoP=_options.allowedAutoPlacements,allowedAutoPlacements=_options$allowedAutoP===void 0?placements:_options$allowedAutoP;var variation=getVariation(placement);var placements$1=variation?flipVariations?variationPlacements:variationPlacements.filter(function(placement){return getVariation(placement)===variation;}):basePlacements;var allowedPlacements=placements$1.filter(function(placement){return allowedAutoPlacements.indexOf(placement)>=0;});if(allowedPlacements.length===0)allowedPlacements=placements$1;var overflows=allowedPlacements.reduce(function(acc,placement){acc[placement]=detectOverflow(state,{placement,boundary,rootBoundary,padding})[getBasePlacement(placement)];return acc;},{});return Object.keys(overflows).sort(function(a,b){return overflows[a]-overflows[b];});}function getExpandedFallbackPlacements(placement){if(getBasePlacement(placement)===auto)return [];var oppositePlacement=getOppositePlacement(placement);return [getOppositeVariationPlacement(placement),oppositePlacement,getOppositeVariationPlacement(oppositePlacement)];}function flip(_ref){var state=_ref.state,options=_ref.options,name=_ref.name;if(state.modifiersData[name]._skip)return;var _options$mainAxis=options.mainAxis,checkMainAxis=_options$mainAxis===void 0?true:_options$mainAxis,_options$altAxis=options.altAxis,checkAltAxis=_options$altAxis===void 0?true:_options$altAxis,specifiedFallbackPlacements=options.fallbackPlacements,padding=options.padding,boundary=options.boundary,rootBoundary=options.rootBoundary,altBoundary=options.altBoundary,_options$flipVariatio=options.flipVariations,flipVariations=_options$flipVariatio===void 0?true:_options$flipVariatio,allowedAutoPlacements=options.allowedAutoPlacements;var preferredPlacement=state.options.placement;var basePlacement=getBasePlacement(preferredPlacement);var isBasePlacement=basePlacement===preferredPlacement;var fallbackPlacements=specifiedFallbackPlacements||(isBasePlacement||!flipVariations?[getOppositePlacement(preferredPlacement)]:getExpandedFallbackPlacements(preferredPlacement));var placements=[preferredPlacement].concat(fallbackPlacements).reduce(function(acc,placement){return acc.concat(getBasePlacement(placement)===auto?computeAutoPlacement(state,{placement,boundary,rootBoundary,padding,flipVariations,allowedAutoPlacements}):placement);},[]);var referenceRect=state.rects.reference;var popperRect=state.rects.popper;var checksMap=new Map();var makeFallbackChecks=true;var firstFittingPlacement=placements[0];for(var i=0;i<placements.length;i++){var placement=placements[i];var _basePlacement=getBasePlacement(placement);var isStartVariation=getVariation(placement)===start;var isVertical=[top,bottom].indexOf(_basePlacement)>=0;var len=isVertical?'width':'height';var overflow=detectOverflow(state,{placement,boundary,rootBoundary,altBoundary,padding});var mainVariationSide=isVertical?isStartVariation?right:left:isStartVariation?bottom:top;if(referenceRect[len]>popperRect[len])mainVariationSide=getOppositePlacement(mainVariationSide);var altVariationSide=getOppositePlacement(mainVariationSide);var checks=[];if(checkMainAxis)checks.push(overflow[_basePlacement]<=0);if(checkAltAxis)checks.push(overflow[mainVariationSide]<=0,overflow[altVariationSide]<=0);if(checks.every(function(check){return check;})){firstFittingPlacement=placement;makeFallbackChecks=false;break;}checksMap.set(placement,checks);}if(makeFallbackChecks){var numberOfChecks=flipVariations?3:1;var _loop=function _loop(_i){var fittingPlacement=placements.find(function(placement){var checks=checksMap.get(placement);if(checks)return checks.slice(0,_i).every(function(check){return check;});});if(fittingPlacement){firstFittingPlacement=fittingPlacement;return "break";}};for(var _i=numberOfChecks;_i>0;_i--){var _ret=_loop(_i);if(_ret==="break")break;}}if(state.placement!==firstFittingPlacement){state.modifiersData[name]._skip=true;state.placement=firstFittingPlacement;state.reset=true;}}var flip$1={name:'flip',enabled:true,phase:'main',fn:flip,requiresIfExists:['offset'],data:{_skip:false}};function getSideOffsets(overflow,rect,preventedOffsets){if(preventedOffsets===void 0)preventedOffsets={x:0,y:0};return {top:overflow.top-rect.height-preventedOffsets.y,right:overflow.right-rect.width+preventedOffsets.x,bottom:overflow.bottom-rect.height+preventedOffsets.y,left:overflow.left-rect.width-preventedOffsets.x};}function isAnySideFullyClipped(overflow){return [top,right,bottom,left].some(function(side){return overflow[side]>=0;});}function hide(_ref){var state=_ref.state,name=_ref.name;var referenceRect=state.rects.reference;var popperRect=state.rects.popper;var preventedOffsets=state.modifiersData.preventOverflow;var referenceOverflow=detectOverflow(state,{elementContext:'reference'});var popperAltOverflow=detectOverflow(state,{altBoundary:true});var referenceClippingOffsets=getSideOffsets(referenceOverflow,referenceRect);var popperEscapeOffsets=getSideOffsets(popperAltOverflow,popperRect,preventedOffsets);var isReferenceHidden=isAnySideFullyClipped(referenceClippingOffsets);var hasPopperEscaped=isAnySideFullyClipped(popperEscapeOffsets);state.modifiersData[name]={referenceClippingOffsets,popperEscapeOffsets,isReferenceHidden,hasPopperEscaped};state.attributes.popper=Object.assign({},state.attributes.popper,{'data-popper-reference-hidden':isReferenceHidden,'data-popper-escaped':hasPopperEscaped});}var hide$1={name:'hide',enabled:true,phase:'main',requiresIfExists:['preventOverflow'],fn:hide};function distanceAndSkiddingToXY(placement,rects,offset){var basePlacement=getBasePlacement(placement);var invertDistance=[left,top].indexOf(basePlacement)>=0?-1:1;var _ref=typeof offset==='function'?offset(Object.assign({},rects,{placement})):offset,skidding=_ref[0],distance=_ref[1];skidding=skidding||0;distance=(distance||0)*invertDistance;return [left,right].indexOf(basePlacement)>=0?{x:distance,y:skidding}:{x:skidding,y:distance};}function offset(_ref2){var state=_ref2.state,options=_ref2.options,name=_ref2.name;var _options$offset=options.offset,offset=_options$offset===void 0?[0,0]:_options$offset;var data=placements.reduce(function(acc,placement){acc[placement]=distanceAndSkiddingToXY(placement,state.rects,offset);return acc;},{});var _data$state$placement=data[state.placement],x=_data$state$placement.x,y=_data$state$placement.y;if(state.modifiersData.popperOffsets!=null){state.modifiersData.popperOffsets.x+=x;state.modifiersData.popperOffsets.y+=y;}state.modifiersData[name]=data;}var offset$1={name:'offset',enabled:true,phase:'main',requires:['popperOffsets'],fn:offset};function popperOffsets(_ref){var state=_ref.state,name=_ref.name;state.modifiersData[name]=computeOffsets({reference:state.rects.reference,element:state.rects.popper,strategy:'absolute',placement:state.placement});}var popperOffsets$1={name:'popperOffsets',enabled:true,phase:'read',fn:popperOffsets,data:{}};function getAltAxis(axis){return axis==='x'?'y':'x';}function preventOverflow(_ref){var state=_ref.state,options=_ref.options,name=_ref.name;var _options$mainAxis=options.mainAxis,checkMainAxis=_options$mainAxis===void 0?true:_options$mainAxis,_options$altAxis=options.altAxis,checkAltAxis=_options$altAxis===void 0?false:_options$altAxis,boundary=options.boundary,rootBoundary=options.rootBoundary,altBoundary=options.altBoundary,padding=options.padding,_options$tether=options.tether,tether=_options$tether===void 0?true:_options$tether,_options$tetherOffset=options.tetherOffset,tetherOffset=_options$tetherOffset===void 0?0:_options$tetherOffset;var overflow=detectOverflow(state,{boundary,rootBoundary,padding,altBoundary});var basePlacement=getBasePlacement(state.placement);var variation=getVariation(state.placement);var isBasePlacement=!variation;var mainAxis=getMainAxisFromPlacement(basePlacement);var altAxis=getAltAxis(mainAxis);var popperOffsets=state.modifiersData.popperOffsets;var referenceRect=state.rects.reference;var popperRect=state.rects.popper;var tetherOffsetValue=typeof tetherOffset==='function'?tetherOffset(Object.assign({},state.rects,{placement:state.placement})):tetherOffset;var normalizedTetherOffsetValue=typeof tetherOffsetValue==='number'?{mainAxis:tetherOffsetValue,altAxis:tetherOffsetValue}:Object.assign({mainAxis:0,altAxis:0},tetherOffsetValue);var offsetModifierState=state.modifiersData.offset?state.modifiersData.offset[state.placement]:null;var data={x:0,y:0};if(!popperOffsets)return;if(checkMainAxis){var _offsetModifierState$;var mainSide=mainAxis==='y'?top:left;var altSide=mainAxis==='y'?bottom:right;var len=mainAxis==='y'?'height':'width';var offset=popperOffsets[mainAxis];var min$1=offset+overflow[mainSide];var max$1=offset-overflow[altSide];var additive=tether?-popperRect[len]/2:0;var minLen=variation===start?referenceRect[len]:popperRect[len];var maxLen=variation===start?-popperRect[len]:-referenceRect[len];var arrowElement=state.elements.arrow;var arrowRect=tether&&arrowElement?getLayoutRect(arrowElement):{width:0,height:0};var arrowPaddingObject=state.modifiersData['arrow#persistent']?state.modifiersData['arrow#persistent'].padding:getFreshSideObject();var arrowPaddingMin=arrowPaddingObject[mainSide];var arrowPaddingMax=arrowPaddingObject[altSide];var arrowLen=within(0,referenceRect[len],arrowRect[len]);var minOffset=isBasePlacement?referenceRect[len]/2-additive-arrowLen-arrowPaddingMin-normalizedTetherOffsetValue.mainAxis:minLen-arrowLen-arrowPaddingMin-normalizedTetherOffsetValue.mainAxis;var maxOffset=isBasePlacement?-referenceRect[len]/2+additive+arrowLen+arrowPaddingMax+normalizedTetherOffsetValue.mainAxis:maxLen+arrowLen+arrowPaddingMax+normalizedTetherOffsetValue.mainAxis;var arrowOffsetParent=state.elements.arrow&&getOffsetParent(state.elements.arrow);var clientOffset=arrowOffsetParent?mainAxis==='y'?arrowOffsetParent.clientTop||0:arrowOffsetParent.clientLeft||0:0;var offsetModifierValue=(_offsetModifierState$=offsetModifierState==null?void 0:offsetModifierState[mainAxis])!=null?_offsetModifierState$:0;var tetherMin=offset+minOffset-offsetModifierValue-clientOffset;var tetherMax=offset+maxOffset-offsetModifierValue;var preventedOffset=within(tether?min(min$1,tetherMin):min$1,offset,tether?max(max$1,tetherMax):max$1);popperOffsets[mainAxis]=preventedOffset;data[mainAxis]=preventedOffset-offset;}if(checkAltAxis){var _offsetModifierState$2;var _mainSide=mainAxis==='x'?top:left;var _altSide=mainAxis==='x'?bottom:right;var _offset=popperOffsets[altAxis];var _len=altAxis==='y'?'height':'width';var _min=_offset+overflow[_mainSide];var _max=_offset-overflow[_altSide];var isOriginSide=[top,left].indexOf(basePlacement)!==-1;var _offsetModifierValue=(_offsetModifierState$2=offsetModifierState==null?void 0:offsetModifierState[altAxis])!=null?_offsetModifierState$2:0;var _tetherMin=isOriginSide?_min:_offset-referenceRect[_len]-popperRect[_len]-_offsetModifierValue+normalizedTetherOffsetValue.altAxis;var _tetherMax=isOriginSide?_offset+referenceRect[_len]+popperRect[_len]-_offsetModifierValue-normalizedTetherOffsetValue.altAxis:_max;var _preventedOffset=tether&&isOriginSide?withinMaxClamp(_tetherMin,_offset,_tetherMax):within(tether?_tetherMin:_min,_offset,tether?_tetherMax:_max);popperOffsets[altAxis]=_preventedOffset;data[altAxis]=_preventedOffset-_offset;}state.modifiersData[name]=data;}var preventOverflow$1={name:'preventOverflow',enabled:true,phase:'main',fn:preventOverflow,requiresIfExists:['offset']};function getHTMLElementScroll(element){return {scrollLeft:element.scrollLeft,scrollTop:element.scrollTop};}function getNodeScroll(node){if(node===getWindow(node)||!isHTMLElement(node))return getWindowScroll(node);else return getHTMLElementScroll(node);}function isElementScaled(element){var rect=element.getBoundingClientRect();var scaleX=round(rect.width)/element.offsetWidth||1;var scaleY=round(rect.height)/element.offsetHeight||1;return scaleX!==1||scaleY!==1;}function getCompositeRect(elementOrVirtualElement,offsetParent,isFixed){if(isFixed===void 0)isFixed=false;var isOffsetParentAnElement=isHTMLElement(offsetParent);var offsetParentIsScaled=isHTMLElement(offsetParent)&&isElementScaled(offsetParent);var documentElement=getDocumentElement(offsetParent);var rect=getBoundingClientRect(elementOrVirtualElement,offsetParentIsScaled,isFixed);var scroll={scrollLeft:0,scrollTop:0};var offsets={x:0,y:0};if(isOffsetParentAnElement||!isOffsetParentAnElement&&!isFixed){if(getNodeName(offsetParent)!=='body'||isScrollParent(documentElement))scroll=getNodeScroll(offsetParent);if(isHTMLElement(offsetParent)){offsets=getBoundingClientRect(offsetParent,true);offsets.x+=offsetParent.clientLeft;offsets.y+=offsetParent.clientTop;}else{if(documentElement)offsets.x=getWindowScrollBarX(documentElement);}}return {x:rect.left+scroll.scrollLeft-offsets.x,y:rect.top+scroll.scrollTop-offsets.y,width:rect.width,height:rect.height};}function order(modifiers){var map=new Map();var visited=new Set();var result=[];modifiers.forEach(function(modifier){map.set(modifier.name,modifier);});function sort(modifier){visited.add(modifier.name);var requires=[].concat(modifier.requires||[],modifier.requiresIfExists||[]);requires.forEach(function(dep){if(!visited.has(dep)){var depModifier=map.get(dep);if(depModifier)sort(depModifier);}});result.push(modifier);}modifiers.forEach(function(modifier){if(!visited.has(modifier.name))sort(modifier);});return result;}function orderModifiers(modifiers){var orderedModifiers=order(modifiers);return modifierPhases.reduce(function(acc,phase){return acc.concat(orderedModifiers.filter(function(modifier){return modifier.phase===phase;}));},[]);}function debounce(fn){var pending;return function(){if(!pending)pending=new Promise(function(resolve){Promise.resolve().then(function(){pending=undefined;resolve(fn());});});return pending;};}function mergeByName(modifiers){var merged=modifiers.reduce(function(merged,current){var existing=merged[current.name];merged[current.name]=existing?Object.assign({},existing,current,{options:Object.assign({},existing.options,current.options),data:Object.assign({},existing.data,current.data)}):current;return merged;},{});return Object.keys(merged).map(function(key){return merged[key];});}var DEFAULT_OPTIONS={placement:'bottom',modifiers:[],strategy:'absolute'};function areValidElements(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return !args.some(function(element){return !(element&&typeof element.getBoundingClientRect==='function');});}function popperGenerator(generatorOptions){if(generatorOptions===void 0)generatorOptions={};var _generatorOptions=generatorOptions,_generatorOptions$def=_generatorOptions.defaultModifiers,defaultModifiers=_generatorOptions$def===void 0?[]:_generatorOptions$def,_generatorOptions$def2=_generatorOptions.defaultOptions,defaultOptions=_generatorOptions$def2===void 0?DEFAULT_OPTIONS:_generatorOptions$def2;return function createPopper(reference,popper,options){if(options===void 0)options=defaultOptions;var state={placement:'bottom',orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,defaultOptions),modifiersData:{},elements:{reference,popper},attributes:{},styles:{}};var effectCleanupFns=[];var isDestroyed=false;var instance={state,setOptions:function setOptions(setOptionsAction){var options=typeof setOptionsAction==='function'?setOptionsAction(state.options):setOptionsAction;cleanupModifierEffects();state.options=Object.assign({},defaultOptions,state.options,options);state.scrollParents={reference:isElement(reference)?listScrollParents(reference):reference.contextElement?listScrollParents(reference.contextElement):[],popper:listScrollParents(popper)};var orderedModifiers=orderModifiers(mergeByName([].concat(defaultModifiers,state.options.modifiers)));state.orderedModifiers=orderedModifiers.filter(function(m){return m.enabled;});runModifierEffects();return instance.update();},forceUpdate:function forceUpdate(){if(isDestroyed)return;var _state$elements=state.elements,reference=_state$elements.reference,popper=_state$elements.popper;if(!areValidElements(reference,popper))return;state.rects={reference:getCompositeRect(reference,getOffsetParent(popper),state.options.strategy==='fixed'),popper:getLayoutRect(popper)};state.reset=false;state.placement=state.options.placement;state.orderedModifiers.forEach(function(modifier){return state.modifiersData[modifier.name]=Object.assign({},modifier.data);});for(var index=0;index<state.orderedModifiers.length;index++){if(state.reset===true){state.reset=false;index=-1;continue;}var _state$orderedModifie=state.orderedModifiers[index],fn=_state$orderedModifie.fn,_state$orderedModifie2=_state$orderedModifie.options,_options=_state$orderedModifie2===void 0?{}:_state$orderedModifie2,name=_state$orderedModifie.name;if(typeof fn==='function')state=fn({state,options:_options,name,instance})||state;}},update:debounce(function(){return new Promise(function(resolve){instance.forceUpdate();resolve(state);});}),destroy:function destroy(){cleanupModifierEffects();isDestroyed=true;}};if(!areValidElements(reference,popper))return instance;instance.setOptions(options).then(function(state){if(!isDestroyed&&options.onFirstUpdate)options.onFirstUpdate(state);});function runModifierEffects(){state.orderedModifiers.forEach(function(_ref){var name=_ref.name,_ref$options=_ref.options,options=_ref$options===void 0?{}:_ref$options,effect=_ref.effect;if(typeof effect==='function'){var cleanupFn=effect({state,name,instance,options});var noopFn=function noopFn(){};effectCleanupFns.push(cleanupFn||noopFn);}});}function cleanupModifierEffects(){effectCleanupFns.forEach(function(fn){return fn();});effectCleanupFns=[];}return instance;};}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1];var createPopper=popperGenerator({defaultModifiers});window.CommonKit=window.CommonKit||{};window.CommonKit.Popper={createPopper};}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('@popperjs/core'),require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['@popperjs/core','../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Popper,global.window.CommonKit.Util));})(this,(function(core,Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);var BOX_CLASS="tippy-box";var CONTENT_CLASS="tippy-content";var BACKDROP_CLASS="tippy-backdrop";var ARROW_CLASS="tippy-arrow";var SVG_ARROW_CLASS="tippy-svg-arrow";var TOUCH_OPTIONS={passive:true,capture:true};var TIPPY_DEFAULT_APPEND_TO=function TIPPY_DEFAULT_APPEND_TO(){return document.body;};function hasOwnProperty(obj,key){return {}.hasOwnProperty.call(obj,key);}function getValueAtIndexOrReturn(value,index,defaultValue){if(Array.isArray(value)){var v=value[index];return v==null?Array.isArray(defaultValue)?defaultValue[index]:defaultValue:v;}return value;}function isType(value,type){var str={}.toString.call(value);return str.indexOf('[object')===0&&str.indexOf(type+"]")>-1;}function invokeWithArgsOrReturn(value,args){return typeof value==='function'?value.apply(void 0,args):value;}function debounce(fn,ms){if(ms===0)return fn;var timeout;return function(arg){clearTimeout(timeout);timeout=setTimeout(function(){fn(arg);},ms);};}function removeProperties(obj,keys){var clone=Object.assign({},obj);keys.forEach(function(key){delete clone[key];});return clone;}function splitBySpaces(value){return value.split(/\s+/).filter(Boolean);}function normalizeToArray(value){return [].concat(value);}function pushIfUnique(arr,value){if(arr.indexOf(value)===-1)arr.push(value);}function unique(arr){return arr.filter(function(item,index){return arr.indexOf(item)===index;});}function getBasePlacement(placement){return placement.split('-')[0];}function arrayFrom(value){return [].slice.call(value);}function removeUndefinedProps(obj){return Object.keys(obj).reduce(function(acc,key){if(obj[key]!==undefined)acc[key]=obj[key];return acc;},{});}function div(){return document.createElement('div');}function isElement(value){return ['Element','Fragment'].some(function(type){return isType(value,type);});}function isNodeList(value){return isType(value,'NodeList');}function isMouseEvent(value){return isType(value,'MouseEvent');}function isReferenceElement(value){return !!(value&&value._tippy&&value._tippy.reference===value);}function getArrayOfElements(value){if(isElement(value))return [value];if(isNodeList(value))return arrayFrom(value);if(Array.isArray(value))return value;return arrayFrom(document.querySelectorAll(value));}function setTransitionDuration(els,value){els.forEach(function(el){if(el)el.style.transitionDuration=value+"ms";});}function setVisibilityState(els,state){els.forEach(function(el){if(el)el.setAttribute('data-state',state);});}function getOwnerDocument(elementOrElements){var _element$ownerDocumen;var _normalizeToArray=normalizeToArray(elementOrElements),element=_normalizeToArray[0];return element!=null&&(_element$ownerDocumen=element.ownerDocument)!=null&&_element$ownerDocumen.body?element.ownerDocument:document;}function isCursorOutsideInteractiveBorder(popperTreeData,event){var clientX=event.clientX,clientY=event.clientY;return popperTreeData.every(function(_ref){var popperRect=_ref.popperRect,popperState=_ref.popperState,props=_ref.props;var interactiveBorder=props.interactiveBorder;var basePlacement=getBasePlacement(popperState.placement);var offsetData=popperState.modifiersData.offset;if(!offsetData)return true;var topDistance=basePlacement==='bottom'?offsetData.top.y:0;var bottomDistance=basePlacement==='top'?offsetData.bottom.y:0;var leftDistance=basePlacement==='right'?offsetData.left.x:0;var rightDistance=basePlacement==='left'?offsetData.right.x:0;var exceedsTop=popperRect.top-clientY+topDistance>interactiveBorder;var exceedsBottom=clientY-popperRect.bottom-bottomDistance>interactiveBorder;var exceedsLeft=popperRect.left-clientX+leftDistance>interactiveBorder;var exceedsRight=clientX-popperRect.right-rightDistance>interactiveBorder;return exceedsTop||exceedsBottom||exceedsLeft||exceedsRight;});}function updateTransitionEndListener(box,action,listener){var method=action+"EventListener";['transitionend','webkitTransitionEnd'].forEach(function(event){box[method](event,listener);});}function actualContains(parent,child){var target=child;while(target){var _target$getRootNode;if(parent.contains(target))return true;target=target.getRootNode==null?void 0:(_target$getRootNode=target.getRootNode())==null?void 0:_target$getRootNode.host;}return false;}var currentInput={isTouch:false};var lastMouseMoveTime=0;function onDocumentTouchStart(){if(currentInput.isTouch)return;currentInput.isTouch=true;if(window.performance)document.addEventListener('mousemove',onDocumentMouseMove);}function onDocumentMouseMove(){var now=performance.now();if(now-lastMouseMoveTime<20){currentInput.isTouch=false;document.removeEventListener('mousemove',onDocumentMouseMove);}lastMouseMoveTime=now;}function onWindowBlur(){var activeElement=document.activeElement;if(isReferenceElement(activeElement)){var instance=activeElement._tippy;if(activeElement.blur&&!instance.state.isVisible)activeElement.blur();}}function bindGlobalEventListeners(){document.addEventListener('touchstart',onDocumentTouchStart,TOUCH_OPTIONS);window.addEventListener('blur',onWindowBlur);}var isBrowser=typeof window!=='undefined'&&typeof document!=='undefined';var isIE11=isBrowser?!!window.msCrypto:false;function createMemoryLeakWarning(method){var txt=method==='destroy'?'n already-':' ';return [method+"() was called on a"+txt+"destroyed instance. This is a no-op but",'indicates a potential memory leak.'].join(' ');}function clean(value){var spacesAndTabs=/[ \t]{2,}/g;var lineStartWithSpaces=/^[ \t]*/gm;return value.replace(spacesAndTabs,' ').replace(lineStartWithSpaces,'').trim();}function getDevMessage(message){return clean("\n  %ctippy.js\n\n  %c"+clean(message)+"\n\n  %c\uD83D\uDC77\u200D This is a development-only message. It will be removed in production.\n  ");}function getFormattedMessage(message){return [getDevMessage(message),'color: #00C584; font-size: 1.3em; font-weight: bold;','line-height: 1.5','color: #a6a095;'];}var visitedMessages;resetVisitedMessages();;function resetVisitedMessages(){visitedMessages=new Set();}function warnWhen(condition,message){if(condition&&!visitedMessages.has(message)){var _console;visitedMessages.add(message);(_console=console).warn.apply(_console,getFormattedMessage(message));}}function errorWhen(condition,message){if(condition&&!visitedMessages.has(message)){var _console2;visitedMessages.add(message);(_console2=console).error.apply(_console2,getFormattedMessage(message));}}function validateTargets(targets){var didPassFalsyValue=!targets;var didPassPlainObject=Object.prototype.toString.call(targets)==='[object Object]'&&!targets.addEventListener;errorWhen(didPassFalsyValue,['tippy() was passed','`'+String(targets)+'`','as its targets (first) argument. Valid types are: String, Element,','Element[], or NodeList.'].join(' '));errorWhen(didPassPlainObject,['tippy() was passed a plain object which is not supported as an argument','for virtual positioning. Use props.getReferenceClientRect instead.'].join(' '));}var pluginProps={animateFill:false,followCursor:false,inlinePositioning:false,sticky:false};var renderProps={allowHTML:false,animation:'fade',arrow:true,content:'',inertia:false,maxWidth:350,role:'tooltip',theme:'',zIndex:9999};var defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:'auto',expanded:'auto'},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:true,ignoreAttributes:false,interactive:false,interactiveBorder:2,interactiveDebounce:0,moveTransition:'',offset:[0,10],onAfterUpdate:function onAfterUpdate(){},onBeforeUpdate:function onBeforeUpdate(){},onCreate:function onCreate(){},onDestroy:function onDestroy(){},onHidden:function onHidden(){},onHide:function onHide(){},onMount:function onMount(){},onShow:function onShow(){},onShown:function onShown(){},onTrigger:function onTrigger(){},onUntrigger:function onUntrigger(){},onClickOutside:function onClickOutside(){},placement:'top',plugins:[],popperOptions:{},render:null,showOnCreate:false,touch:true,trigger:'mouseenter focus',triggerTarget:null},pluginProps,renderProps);var defaultKeys=Object.keys(defaultProps);var setDefaultProps=function setDefaultProps(partialProps){validateProps(partialProps,[]);;var keys=Object.keys(partialProps);keys.forEach(function(key){defaultProps[key]=partialProps[key];});};function getExtendedPassedProps(passedProps){var plugins=passedProps.plugins||[];var pluginProps=plugins.reduce(function(acc,plugin){var name=plugin.name,defaultValue=plugin.defaultValue;if(name){var _name;acc[name]=passedProps[name]!==undefined?passedProps[name]:(_name=defaultProps[name])!=null?_name:defaultValue;}return acc;},{});return Object.assign({},passedProps,pluginProps);}function getDataAttributeProps(reference,plugins){var propKeys=plugins?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins}))):defaultKeys;var props=propKeys.reduce(function(acc,key){var valueAsString=(reference.getAttribute("data-tippy-"+key)||'').trim();if(!valueAsString)return acc;if(key==='content')acc[key]=valueAsString;else try{acc[key]=JSON.parse(valueAsString);}catch(e){acc[key]=valueAsString;}return acc;},{});return props;}function evaluateProps(reference,props){var out=Object.assign({},props,{content:invokeWithArgsOrReturn(props.content,[reference])},props.ignoreAttributes?{}:getDataAttributeProps(reference,props.plugins));out.aria=Object.assign({},defaultProps.aria,out.aria);out.aria={expanded:out.aria.expanded==='auto'?props.interactive:out.aria.expanded,content:out.aria.content==='auto'?props.interactive?null:'describedby':out.aria.content};return out;}function validateProps(partialProps,plugins){if(partialProps===void 0)partialProps={};if(plugins===void 0)plugins=[];var keys=Object.keys(partialProps);keys.forEach(function(prop){var nonPluginProps=removeProperties(defaultProps,Object.keys(pluginProps));var didPassUnknownProp=!hasOwnProperty(nonPluginProps,prop);if(didPassUnknownProp)didPassUnknownProp=plugins.filter(function(plugin){return plugin.name===prop;}).length===0;warnWhen(didPassUnknownProp,["`"+prop+"`","is not a valid prop. You may have spelled it incorrectly, or if it's",'a plugin, forgot to pass it in an array as props.plugins.','\n\n','All props: https://atomiks.github.io/tippyjs/v6/all-props/\n','Plugins: https://atomiks.github.io/tippyjs/v6/plugins/'].join(' '));});}var innerHTML=function innerHTML(){return 'innerHTML';};function dangerouslySetInnerHTML(element,html){element[innerHTML()]=html;}function createArrowElement(value){var arrow=div();if(value===true)arrow.className=ARROW_CLASS;else{arrow.className=SVG_ARROW_CLASS;if(isElement(value))arrow.appendChild(value);else dangerouslySetInnerHTML(arrow,value);}return arrow;}function setContent(content,props){if(isElement(props.content)){dangerouslySetInnerHTML(content,'');content.appendChild(props.content);}else{if(typeof props.content!=='function')if(props.allowHTML)dangerouslySetInnerHTML(content,props.content);else content.textContent=props.content;}}function getChildren(popper){var box=popper.firstElementChild;var boxChildren=arrayFrom(box.children);return {box,content:boxChildren.find(function(node){return node.classList.contains(CONTENT_CLASS);}),arrow:boxChildren.find(function(node){return node.classList.contains(ARROW_CLASS)||node.classList.contains(SVG_ARROW_CLASS);}),backdrop:boxChildren.find(function(node){return node.classList.contains(BACKDROP_CLASS);})};}function render(instance){var popper=div();var box=div();box.className=BOX_CLASS;box.setAttribute('data-state','hidden');box.setAttribute('tabindex','-1');var content=div();content.className=CONTENT_CLASS;content.setAttribute('data-state','hidden');setContent(content,instance.props);popper.appendChild(box);box.appendChild(content);onUpdate(instance.props,instance.props);function onUpdate(prevProps,nextProps){var _getChildren=getChildren(popper),box=_getChildren.box,content=_getChildren.content,arrow=_getChildren.arrow;if(nextProps.theme)box.setAttribute('data-theme',nextProps.theme);else box.removeAttribute('data-theme');if(typeof nextProps.animation==='string')box.setAttribute('data-animation',nextProps.animation);else box.removeAttribute('data-animation');if(nextProps.inertia)box.setAttribute('data-inertia','');else box.removeAttribute('data-inertia');box.style.maxWidth=typeof nextProps.maxWidth==='number'?nextProps.maxWidth+"px":nextProps.maxWidth;if(nextProps.role)box.setAttribute('role',nextProps.role);else box.removeAttribute('role');if(prevProps.content!==nextProps.content||prevProps.allowHTML!==nextProps.allowHTML)setContent(content,instance.props);if(nextProps.arrow)if(!arrow)box.appendChild(createArrowElement(nextProps.arrow));else{if(prevProps.arrow!==nextProps.arrow){box.removeChild(arrow);box.appendChild(createArrowElement(nextProps.arrow));}}else{if(arrow)box.removeChild(arrow);}}return {popper,onUpdate};}render.$$tippy=true;var idCounter=1;var mouseMoveListeners=[];var mountedInstances=[];function createTippy(reference,passedProps){var props=evaluateProps(reference,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(passedProps))));var showTimeout;var hideTimeout;var scheduleHideAnimationFrame;var isVisibleFromClick=false;var didHideDueToDocumentMouseDown=false;var didTouchMove=false;var ignoreOnFirstUpdate=false;var lastTriggerEvent;var currentTransitionEndListener;var onFirstUpdate;var listeners=[];var debouncedOnMouseMove=debounce(onMouseMove,props.interactiveDebounce);var currentTarget;var id=idCounter++;var popperInstance=null;var plugins=unique(props.plugins);var state={isEnabled:true,isVisible:false,isDestroyed:false,isMounted:false,isShown:false};var instance={id,reference,popper:div(),popperInstance,props,state,plugins,clearDelayTimeouts,setProps,setContent,show,hide,hideWithInteractivity,enable,disable,unmount,destroy};if(!props.render){errorWhen(true,'render() function has not been supplied.');;return instance;}var _props$render=props.render(instance),popper=_props$render.popper,onUpdate=_props$render.onUpdate;popper.setAttribute('data-tippy-root','');popper.id="tippy-"+instance.id;instance.popper=popper;reference._tippy=instance;popper._tippy=instance;var pluginsHooks=plugins.map(function(plugin){return plugin.fn(instance);});var hasAriaExpanded=reference.hasAttribute('aria-expanded');addListeners();handleAriaExpandedAttribute();handleStyles();invokeHook('onCreate',[instance]);if(props.showOnCreate)scheduleShow();popper.addEventListener('mouseenter',function(){if(instance.props.interactive&&instance.state.isVisible)instance.clearDelayTimeouts();});popper.addEventListener('mouseleave',function(){if(instance.props.interactive&&instance.props.trigger.indexOf('mouseenter')>=0)getDocument().addEventListener('mousemove',debouncedOnMouseMove);});return instance;function getNormalizedTouchSettings(){var touch=instance.props.touch;return Array.isArray(touch)?touch:[touch,0];}function getIsCustomTouchBehavior(){return getNormalizedTouchSettings()[0]==='hold';}function getIsDefaultRenderFn(){var _instance$props$rende;return !!((_instance$props$rende=instance.props.render)!=null&&_instance$props$rende.$$tippy);}function getCurrentTarget(){return currentTarget||reference;}function getDocument(){var parent=getCurrentTarget().parentNode;return parent?getOwnerDocument(parent):document;}function getDefaultTemplateChildren(){return getChildren(popper);}function getDelay(isShow){if(instance.state.isMounted&&!instance.state.isVisible||currentInput.isTouch||lastTriggerEvent&&lastTriggerEvent.type==='focus')return 0;return getValueAtIndexOrReturn(instance.props.delay,isShow?0:1,defaultProps.delay);}function handleStyles(fromHide){if(fromHide===void 0)fromHide=false;popper.style.pointerEvents=instance.props.interactive&&!fromHide?'':'none';popper.style.zIndex=""+instance.props.zIndex;}function invokeHook(hook,args,shouldInvokePropsHook){if(shouldInvokePropsHook===void 0)shouldInvokePropsHook=true;pluginsHooks.forEach(function(pluginHooks){if(pluginHooks[hook])pluginHooks[hook].apply(pluginHooks,args);});if(shouldInvokePropsHook){var _instance$props;(_instance$props=instance.props)[hook].apply(_instance$props,args);}}function handleAriaContentAttribute(){var aria=instance.props.aria;if(!aria.content)return;var attr="aria-"+aria.content;var id=popper.id;var nodes=normalizeToArray(instance.props.triggerTarget||reference);nodes.forEach(function(node){var currentValue=node.getAttribute(attr);if(instance.state.isVisible)node.setAttribute(attr,currentValue?currentValue+" "+id:id);else{var nextValue=currentValue&&currentValue.replace(id,'').trim();if(nextValue)node.setAttribute(attr,nextValue);else node.removeAttribute(attr);}});}function handleAriaExpandedAttribute(){if(hasAriaExpanded||!instance.props.aria.expanded)return;var nodes=normalizeToArray(instance.props.triggerTarget||reference);nodes.forEach(function(node){if(instance.props.interactive)node.setAttribute('aria-expanded',instance.state.isVisible&&node===getCurrentTarget()?'true':'false');else node.removeAttribute('aria-expanded');});}function cleanupInteractiveMouseListeners(){getDocument().removeEventListener('mousemove',debouncedOnMouseMove);mouseMoveListeners=mouseMoveListeners.filter(function(listener){return listener!==debouncedOnMouseMove;});}function onDocumentPress(event){if(currentInput.isTouch)if(didTouchMove||event.type==='mousedown')return;var actualTarget=event.composedPath&&event.composedPath()[0]||event.target;if(instance.props.interactive&&actualContains(popper,actualTarget))return;if(normalizeToArray(instance.props.triggerTarget||reference).some(function(el){return actualContains(el,actualTarget);})){if(currentInput.isTouch)return;if(instance.state.isVisible&&instance.props.trigger.indexOf('click')>=0)return;}else invokeHook('onClickOutside',[instance,event]);if(instance.props.hideOnClick===true){instance.clearDelayTimeouts();instance.hide();didHideDueToDocumentMouseDown=true;setTimeout(function(){didHideDueToDocumentMouseDown=false;});if(!instance.state.isMounted)removeDocumentPress();}}function onTouchMove(){didTouchMove=true;}function onTouchStart(){didTouchMove=false;}function addDocumentPress(){var doc=getDocument();doc.addEventListener('mousedown',onDocumentPress,true);doc.addEventListener('touchend',onDocumentPress,TOUCH_OPTIONS);doc.addEventListener('touchstart',onTouchStart,TOUCH_OPTIONS);doc.addEventListener('touchmove',onTouchMove,TOUCH_OPTIONS);}function removeDocumentPress(){var doc=getDocument();doc.removeEventListener('mousedown',onDocumentPress,true);doc.removeEventListener('touchend',onDocumentPress,TOUCH_OPTIONS);doc.removeEventListener('touchstart',onTouchStart,TOUCH_OPTIONS);doc.removeEventListener('touchmove',onTouchMove,TOUCH_OPTIONS);}function onTransitionedOut(duration,callback){onTransitionEnd(duration,function(){if(!instance.state.isVisible&&popper.parentNode&&popper.parentNode.contains(popper))callback();});}function onTransitionedIn(duration,callback){onTransitionEnd(duration,callback);}function onTransitionEnd(duration,callback){var box=getDefaultTemplateChildren().box;function listener(event){if(event.target===box){updateTransitionEndListener(box,'remove',listener);callback();}}if(duration===0)return callback();updateTransitionEndListener(box,'remove',currentTransitionEndListener);updateTransitionEndListener(box,'add',listener);currentTransitionEndListener=listener;}function on(eventType,handler,options){if(options===void 0)options=false;var nodes=normalizeToArray(instance.props.triggerTarget||reference);nodes.forEach(function(node){node.addEventListener(eventType,handler,options);listeners.push({node,eventType,handler,options});});}function addListeners(){if(getIsCustomTouchBehavior()){on('touchstart',onTrigger,{passive:true});on('touchend',onMouseLeave,{passive:true});}splitBySpaces(instance.props.trigger).forEach(function(eventType){if(eventType==='manual')return;on(eventType,onTrigger);switch(eventType){case 'mouseenter':on('mouseleave',onMouseLeave);break;case 'focus':on(isIE11?'focusout':'blur',onBlurOrFocusOut);break;case 'focusin':on('focusout',onBlurOrFocusOut);break;}});}function removeListeners(){listeners.forEach(function(_ref){var node=_ref.node,eventType=_ref.eventType,handler=_ref.handler,options=_ref.options;node.removeEventListener(eventType,handler,options);});listeners=[];}function onTrigger(event){var _lastTriggerEvent;var shouldScheduleClickHide=false;if(!instance.state.isEnabled||isEventListenerStopped(event)||didHideDueToDocumentMouseDown)return;var wasFocused=((_lastTriggerEvent=lastTriggerEvent)==null?void 0:_lastTriggerEvent.type)==='focus';lastTriggerEvent=event;currentTarget=event.currentTarget;handleAriaExpandedAttribute();if(!instance.state.isVisible&&isMouseEvent(event))mouseMoveListeners.forEach(function(listener){return listener(event);});if(event.type==='click'&&(instance.props.trigger.indexOf('mouseenter')<0||isVisibleFromClick)&&instance.props.hideOnClick!==false&&instance.state.isVisible)shouldScheduleClickHide=true;else scheduleShow(event);if(event.type==='click')isVisibleFromClick=!shouldScheduleClickHide;if(shouldScheduleClickHide&&!wasFocused)scheduleHide(event);}function onMouseMove(event){var target=event.target;var isCursorOverReferenceOrPopper=getCurrentTarget().contains(target)||popper.contains(target);if(event.type==='mousemove'&&isCursorOverReferenceOrPopper)return;var popperTreeData=getNestedPopperTree().concat(popper).map(function(popper){var _instance$popperInsta;var instance=popper._tippy;var state=(_instance$popperInsta=instance.popperInstance)==null?void 0:_instance$popperInsta.state;if(state)return {popperRect:popper.getBoundingClientRect(),popperState:state,props};return null;}).filter(Boolean);if(isCursorOutsideInteractiveBorder(popperTreeData,event)){cleanupInteractiveMouseListeners();scheduleHide(event);}}function onMouseLeave(event){var shouldBail=isEventListenerStopped(event)||instance.props.trigger.indexOf('click')>=0&&isVisibleFromClick;if(shouldBail)return;if(instance.props.interactive){instance.hideWithInteractivity(event);return;}scheduleHide(event);}function onBlurOrFocusOut(event){if(instance.props.trigger.indexOf('focusin')<0&&event.target!==getCurrentTarget())return;if(instance.props.interactive&&event.relatedTarget&&popper.contains(event.relatedTarget))return;scheduleHide(event);}function isEventListenerStopped(event){return currentInput.isTouch?getIsCustomTouchBehavior()!==event.type.indexOf('touch')>=0:false;}function createPopperInstance(){destroyPopperInstance();var _instance$props2=instance.props,popperOptions=_instance$props2.popperOptions,placement=_instance$props2.placement,offset=_instance$props2.offset,getReferenceClientRect=_instance$props2.getReferenceClientRect,moveTransition=_instance$props2.moveTransition;var arrow=getIsDefaultRenderFn()?getChildren(popper).arrow:null;var computedReference=getReferenceClientRect?{getBoundingClientRect:getReferenceClientRect,contextElement:getReferenceClientRect.contextElement||getCurrentTarget()}:reference;var tippyModifier={name:'$$tippy',enabled:true,phase:'beforeWrite',requires:['computeStyles'],fn:function fn(_ref2){var state=_ref2.state;if(getIsDefaultRenderFn()){var _getDefaultTemplateCh=getDefaultTemplateChildren(),box=_getDefaultTemplateCh.box;['placement','reference-hidden','escaped'].forEach(function(attr){if(attr==='placement')box.setAttribute('data-placement',state.placement);else if(state.attributes.popper["data-popper-"+attr])box.setAttribute("data-"+attr,'');else box.removeAttribute("data-"+attr);});state.attributes.popper={};}}};var modifiers=[{name:'offset',options:{offset}},{name:'preventOverflow',options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:'flip',options:{padding:5}},{name:'computeStyles',options:{adaptive:!moveTransition}},tippyModifier];if(getIsDefaultRenderFn()&&arrow)modifiers.push({name:'arrow',options:{element:arrow,padding:3}});modifiers.push.apply(modifiers,(popperOptions==null?void 0:popperOptions.modifiers)||[]);instance.popperInstance=core.createPopper(computedReference,popper,Object.assign({},popperOptions,{placement,onFirstUpdate,modifiers}));}function destroyPopperInstance(){if(instance.popperInstance){instance.popperInstance.destroy();instance.popperInstance=null;}}function mount(){var appendTo=instance.props.appendTo;var parentNode;var node=getCurrentTarget();if(instance.props.interactive&&appendTo===TIPPY_DEFAULT_APPEND_TO||appendTo==='parent')parentNode=node.parentNode;else parentNode=invokeWithArgsOrReturn(appendTo,[node]);if(!parentNode.contains(popper))parentNode.appendChild(popper);instance.state.isMounted=true;createPopperInstance();warnWhen(instance.props.interactive&&appendTo===defaultProps.appendTo&&node.nextElementSibling!==popper,['Interactive tippy element may not be accessible via keyboard','navigation because it is not directly after the reference element','in the DOM source order.','\n\n','Using a wrapper <div> or <span> tag around the reference element','solves this by creating a new parentNode context.','\n\n','Specifying `appendTo: document.body` silences this warning, but it','assumes you are using a focus management solution to handle','keyboard navigation.','\n\n','See: https://atomiks.github.io/tippyjs/v6/accessibility/#interactivity'].join(' '));;}function getNestedPopperTree(){return arrayFrom(popper.querySelectorAll('[data-tippy-root]'));}function scheduleShow(event){instance.clearDelayTimeouts();if(event)invokeHook('onTrigger',[instance,event]);addDocumentPress();var delay=getDelay(true);var _getNormalizedTouchSe=getNormalizedTouchSettings(),touchValue=_getNormalizedTouchSe[0],touchDelay=_getNormalizedTouchSe[1];if(currentInput.isTouch&&touchValue==='hold'&&touchDelay)delay=touchDelay;if(delay)showTimeout=setTimeout(function(){instance.show();},delay);else instance.show();}function scheduleHide(event){instance.clearDelayTimeouts();invokeHook('onUntrigger',[instance,event]);if(!instance.state.isVisible){removeDocumentPress();return;}if(instance.props.trigger.indexOf('mouseenter')>=0&&instance.props.trigger.indexOf('click')>=0&&['mouseleave','mousemove'].indexOf(event.type)>=0&&isVisibleFromClick)return;var delay=getDelay(false);if(delay)hideTimeout=setTimeout(function(){if(instance.state.isVisible)instance.hide();},delay);else scheduleHideAnimationFrame=requestAnimationFrame(function(){instance.hide();});}function enable(){instance.state.isEnabled=true;}function disable(){instance.hide();instance.state.isEnabled=false;}function clearDelayTimeouts(){clearTimeout(showTimeout);clearTimeout(hideTimeout);cancelAnimationFrame(scheduleHideAnimationFrame);}function setProps(partialProps){warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('setProps'));;if(instance.state.isDestroyed)return;invokeHook('onBeforeUpdate',[instance,partialProps]);removeListeners();var prevProps=instance.props;var nextProps=evaluateProps(reference,Object.assign({},prevProps,removeUndefinedProps(partialProps),{ignoreAttributes:true}));instance.props=nextProps;addListeners();if(prevProps.interactiveDebounce!==nextProps.interactiveDebounce){cleanupInteractiveMouseListeners();debouncedOnMouseMove=debounce(onMouseMove,nextProps.interactiveDebounce);}if(prevProps.triggerTarget&&!nextProps.triggerTarget)normalizeToArray(prevProps.triggerTarget).forEach(function(node){node.removeAttribute('aria-expanded');});else{if(nextProps.triggerTarget)reference.removeAttribute('aria-expanded');}handleAriaExpandedAttribute();handleStyles();if(onUpdate)onUpdate(prevProps,nextProps);if(instance.popperInstance){createPopperInstance();getNestedPopperTree().forEach(function(nestedPopper){requestAnimationFrame(nestedPopper._tippy.popperInstance.forceUpdate);});}invokeHook('onAfterUpdate',[instance,partialProps]);}function setContent(content){instance.setProps({content});}function show(){warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('show'));;var isAlreadyVisible=instance.state.isVisible;var isDestroyed=instance.state.isDestroyed;var isDisabled=!instance.state.isEnabled;var isTouchAndTouchDisabled=currentInput.isTouch&&!instance.props.touch;var duration=getValueAtIndexOrReturn(instance.props.duration,0,defaultProps.duration);if(isAlreadyVisible||isDestroyed||isDisabled||isTouchAndTouchDisabled)return;if(getCurrentTarget().hasAttribute('disabled'))return;invokeHook('onShow',[instance],false);if(instance.props.onShow(instance)===false)return;instance.state.isVisible=true;if(getIsDefaultRenderFn())popper.style.visibility='visible';handleStyles();addDocumentPress();if(!instance.state.isMounted)popper.style.transition='none';if(getIsDefaultRenderFn()){var _getDefaultTemplateCh2=getDefaultTemplateChildren(),box=_getDefaultTemplateCh2.box,content=_getDefaultTemplateCh2.content;setTransitionDuration([box,content],0);}onFirstUpdate=function onFirstUpdate(){var _instance$popperInsta2;if(!instance.state.isVisible||ignoreOnFirstUpdate)return;ignoreOnFirstUpdate=true;void popper.offsetHeight;popper.style.transition=instance.props.moveTransition;if(getIsDefaultRenderFn()&&instance.props.animation){var _getDefaultTemplateCh3=getDefaultTemplateChildren(),_box=_getDefaultTemplateCh3.box,_content=_getDefaultTemplateCh3.content;setTransitionDuration([_box,_content],duration);setVisibilityState([_box,_content],'visible');}handleAriaContentAttribute();handleAriaExpandedAttribute();pushIfUnique(mountedInstances,instance);(_instance$popperInsta2=instance.popperInstance)==null?void 0:_instance$popperInsta2.forceUpdate();invokeHook('onMount',[instance]);if(instance.props.animation&&getIsDefaultRenderFn())onTransitionedIn(duration,function(){instance.state.isShown=true;invokeHook('onShown',[instance]);});};mount();}function hide(){warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('hide'));;var isAlreadyHidden=!instance.state.isVisible;var isDestroyed=instance.state.isDestroyed;var isDisabled=!instance.state.isEnabled;var duration=getValueAtIndexOrReturn(instance.props.duration,1,defaultProps.duration);if(isAlreadyHidden||isDestroyed||isDisabled)return;invokeHook('onHide',[instance],false);if(instance.props.onHide(instance)===false)return;instance.state.isVisible=false;instance.state.isShown=false;ignoreOnFirstUpdate=false;isVisibleFromClick=false;if(getIsDefaultRenderFn())popper.style.visibility='hidden';cleanupInteractiveMouseListeners();removeDocumentPress();handleStyles(true);if(getIsDefaultRenderFn()){var _getDefaultTemplateCh4=getDefaultTemplateChildren(),box=_getDefaultTemplateCh4.box,content=_getDefaultTemplateCh4.content;if(instance.props.animation){setTransitionDuration([box,content],duration);setVisibilityState([box,content],'hidden');}}handleAriaContentAttribute();handleAriaExpandedAttribute();if(instance.props.animation){if(getIsDefaultRenderFn())onTransitionedOut(duration,instance.unmount);}else instance.unmount();}function hideWithInteractivity(event){warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('hideWithInteractivity'));;getDocument().addEventListener('mousemove',debouncedOnMouseMove);pushIfUnique(mouseMoveListeners,debouncedOnMouseMove);debouncedOnMouseMove(event);}function unmount(){warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('unmount'));;if(instance.state.isVisible)instance.hide();if(!instance.state.isMounted)return;destroyPopperInstance();getNestedPopperTree().forEach(function(nestedPopper){nestedPopper._tippy.unmount();});if(popper.parentNode)popper.parentNode.removeChild(popper);mountedInstances=mountedInstances.filter(function(i){return i!==instance;});instance.state.isMounted=false;invokeHook('onHidden',[instance]);}function destroy(){warnWhen(instance.state.isDestroyed,createMemoryLeakWarning('destroy'));;if(instance.state.isDestroyed)return;instance.clearDelayTimeouts();instance.unmount();removeListeners();delete reference._tippy;instance.state.isDestroyed=true;invokeHook('onDestroy',[instance]);}}function tippy(targets,optionalProps){if(optionalProps===void 0)optionalProps={};var plugins=defaultProps.plugins.concat(optionalProps.plugins||[]);validateTargets(targets);validateProps(optionalProps,plugins);;bindGlobalEventListeners();var passedProps=Object.assign({},optionalProps,{plugins});var elements=getArrayOfElements(targets);var isSingleContentElement=isElement(passedProps.content);var isMoreThanOneReferenceElement=elements.length>1;warnWhen(isSingleContentElement&&isMoreThanOneReferenceElement,['tippy() was passed an Element as the `content` prop, but more than','one tippy instance was created by this invocation. This means the','content element will only be appended to the last tippy instance.','\n\n','Instead, pass the .innerHTML of the element, or use a function that','returns a cloned version of the element instead.','\n\n','1) content: element.innerHTML\n','2) content: () => element.cloneNode(true)'].join(' '));;var instances=elements.reduce(function(acc,reference){var instance=reference&&createTippy(reference,passedProps);if(instance)acc.push(instance);return acc;},[]);return isElement(targets)?instances[0]:instances;}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},core.applyStyles,{effect:function effect(_ref){var state=_ref.state;var initialStyles={popper:{position:state.options.strategy,left:'0',top:'0',margin:'0'},arrow:{position:'absolute'},reference:{}};Object.assign(state.elements.popper.style,initialStyles.popper);state.styles=initialStyles;if(state.elements.arrow)Object.assign(state.elements.arrow.style,initialStyles.arrow);}});tippy.setDefaultProps({render});class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}tippy.setDefaultProps({});const DATA_KEY='cs.popover';const EVENT_KEY=`.${DATA_KEY}`;const Selector={DATA_TOGGLE:'[data-toggle="popover"]'};const ESCAPE_KEYCODE=27;const Event={KEYDOWN_DISMISS:`keydown.dismiss${EVENT_KEY}`};const TippyDefault={animation:false,allowHTML:false,appendTo:'parent',content:'',interactiveBorder:3,interactiveDebounce:10,maxWidth:'18rem',placement:'bottom',delay:0,duration:[50,20],onShow:(instance)=>{instance.popper.setAttribute('tabindex',0);Util__namespace.listen.on(Event.KEYDOWN_DISMISS,instance.popper,(event)=>{if(event.which===ESCAPE_KEYCODE){event.preventDefault();instance.hide();}});},onHidden:(instance)=>{instance.popper.removeAttribute('tabindex');Util__namespace.listen.off(Event.KEYDOWN_DISMISS,instance.popper);}};class Popover extends ElementBase{load(){if(!this._loaded){this._loaded=true;this._loadTippy();}}show(){this.tippy.show();}hide(){this.tippy.hide();}dispose(){this.tippy.destroy();}updateContent(data){this.tippy.setContent(data);}static get Selector(){return Selector;}_loadTippy(){const tippyConfig=this._getTippyConfig();this.tippy=tippy(this._element,tippyConfig);}_getTippyConfig(){const tippyConfig={...TippyDefault};[['html','allowHTML'],['animation'],['duration'],['interactive'],['placement'],['trigger'],['theme'],['appendTo'],['boundary'],['popperOptions']].forEach((property)=>{const dataProperty=property[0];const tippyProperty=property[1]?property[1]:property[0];if(this._config[dataProperty])tippyConfig[tippyProperty]=this._config[dataProperty];});const content=this._config.content;if(/^#/.test(content)){tippyConfig.content=(document.getElementById(content.substr(1))||{}).innerHTML;tippyConfig.allowHTML=true;}else if(/^\./.test(content)){tippyConfig.content=(document.getElementsByClassName(content.substr(1))||{}).innerHTML;tippyConfig.allowHTML=true;}else if(Util__namespace.isElement(content))tippyConfig.allowHTML=true;else tippyConfig.content=content;if(tippyConfig.trigger&&tippyConfig.trigger.includes('click'))tippyConfig.interactive=true;return tippyConfig;}}window.CommonKit=window.CommonKit||{};window.CommonKit.Popover=Popover;const popoverSubscribe=()=>{const settings=drupalSettings.commonKit&&drupalSettings.commonKit.popover;if(settings&&settings.selectors)Popover.subscribe(Object.keys(settings.selectors));};popoverSubscribe();const config={elements:[]};window.CS.PageState.addStateType('popover-subscribe',config);window.CS.PageState.subscribeUpdateState('popover-subscribe',()=>{popoverSubscribe();});}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DAY_IN_SECONDS=86400000;class CsCookie{get(name){const parts=`; ${document.cookie}`.split(`; ${name}=`);if(parts.length===2){const cookie=parts.pop().split(';').shift();return cookie;}return null;}add(name,value,expires='session',path='/',domain=''){let expiresDate=expires;const match=expires.match(/\+(\d+)/);if(match){const expiresIncrement=match[1]*DAY_IN_SECONDS;expiresDate=new Date(Date.now()+expiresIncrement);}document.cookie=`${name}=${value};expires=${expiresDate};path=${path};domain=${domain}`;}remove(name,path='/',domain=''){const expires=new Date(0);this.add(name,'',expires,path,domain);}getItem(name){return this.get(name);}setItem(name,value){return this.add(name,value);}removeItem(name){return this.remove(name);}}window.CS=window.CS||{};window.CS.CsCookie=new CsCookie();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class CsStorage{constructor(){if(typeof Storage!=='undefined')this.localStorage=window.localStorage;else this.localStorage=window.CS.CsCookie;this.cookieSync=false;}setConfig(config={}){this.cookieSync=config.cookieSync||this.cookieSync;}get(name){let value=this.localStorage.getItem(name);if(!value&&this.cookieSync)value=window.CS.CsCookie.get(name);try{value=JSON.parse(value);}catch(e){}return value;}add(name,value){const stringifyedValue=JSON.stringify(value);this.localStorage.setItem(name,stringifyedValue);if(this.cookieSync)window.CS.CsCookie.add(name,stringifyedValue);}remove(name){this.localStorage.removeItem(name);if(this.cookieSync)window.CS.CsCookie.remove(name);}}window.CS=window.CS||{};window.CS.CsStorage=new CsStorage();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DATA_KEY='csm.user-review';const TOTAL_REPORTS=5;const STORAGE_NAME='STYXKEY-reports-gate';const STORAGE_NAME_COUNTER='STYXKEY-reports-gating-counter';const DAYINSECS=86400000;const WEEKINSECS=604800000;const CURRENTDATE=Date.now();const EXPIRESDATE_DAY=CURRENTDATE+DAYINSECS;const EXPIRESDATE_WEEK=CURRENTDATE+WEEKINSECS;class UserReviewsUgc{constructor(element){this.element=element;}load(){if(!this.loaded){this.loaded=true;this.setupElements();this.setupState();this.setupTypeState();this.setupStateSubscriber();this.setupLazy();this.setupHelpful();this.setupReport();this.setupReportButtons();this.setupDelete();}}reported(userReviewId){if(userReviewId===this.userReviewId){const content=Drupal.t("We've received your report, and our editors will review it shortly. In the meantime, the comment has been hidden from the site.");this.updateStateNotify(content);if(!drupalSettings.csm.userReviewsUgc.is_internal)this.setupCookies();window.CS.PageState.triggerUpdate('user-reviews-ugc-reported-disable',{},userReviewId);}}disable(){this.setupReportButtons();}setupElements(){this.userReviewId=this.element.dataset.id;this.userGeneratedContentElement=this.element.querySelector('.user-generated-content');this.userGeneratedContentReactions=this.userGeneratedContentElement.querySelector('.user-generated-content__reactions');this.userGeneratedContentHelfpul=this.userGeneratedContentElement.querySelector('.user-generated-content__action-helpful');this.userGeneratedContentReportButton=this.userGeneratedContentElement.querySelector('.user-generated-content__action-report');this.userGeneratedContentReport=this.userGeneratedContentElement.querySelector('.user-generated-content-report');this.userGeneratedContentDelete=this.userGeneratedContentElement.querySelector('.user-generated-content-delete');this.userGeneratedContent=window.CommonKit.UserGeneratedContent.get(this.userGeneratedContentElement);}setupState(){const state={reviewId:this.element.dataset.entityId};window.CS.PageState.updateState(state);}setupTypeState(){const helpfulConfig={url:'/ajax/user-review/{userReviewId}/helpful/{user}',elements:[this.userGeneratedContentHelfpul],state:{userReviewId:this.userReviewId,user:window.drupalSettings.user.uid},progress:{options:{size:'sm',centered:true,cover:true}}};window.CS.PageState.addStateType('user-review-helpful',helpfulConfig,this.userReviewId);const helpfulSaveConfig={url:'/ajax/user-review/{userReviewId}/helpful/save',method:'POST',elements:[this.userGeneratedContentReactions],state:{userReviewId:this.userReviewId}};window.CS.PageState.addStateType('user-review-helpful-save',helpfulSaveConfig,this.userReviewId);const reportConfig={url:'/ajax/user-review/{userReviewId}/report',method:'POST',elements:[this.userGeneratedContentReport],state:{userReviewId:this.userReviewId}};window.CS.PageState.addStateType('user-reviews-ugc-report',reportConfig,this.userReviewId);const reportedConfig={elements:[]};window.CS.PageState.addStateType('user-reviews-ugc-reported',reportedConfig,this.userReviewId);const reportedDisableConfig={elements:[]};window.CS.PageState.addStateType('user-reviews-ugc-reported-disable',reportedDisableConfig,this.userReviewId);if(this.userGeneratedContentDelete){const deleteConfig={url:'/ajax/user-review/{userReviewId}/delete',method:'POST',elements:[this.userGeneratedContentDelete],state:{userReviewId:this.userReviewId}};window.CS.PageState.addStateType('user-review-ugc-delete',deleteConfig,this.userReviewId);const deletedConfig={elements:[]};window.CS.PageState.addStateType('user-reviews-ugc-delete-deleted',deletedConfig,this.userReviewId);}}setupStateSubscriber(){const deletedUpdateState=(userReviewId)=>{if(userReviewId!==this.userReviewId)return;const content=Drupal.t('Your review has been successfully deleted.');this.updateStateNotify(content);};window.CS.PageState.subscribeUpdateState('user-reviews-ugc-delete-deleted',deletedUpdateState);}setupLazy(){if(this.userGeneratedContentHelfpul&&window.drupalSettings.user.uid!==0)window.CS.PageState.triggerUpdate('user-review-helpful',{},this.userReviewId).then((data)=>{data.forEach((command)=>{if(command.command==='data')if(command.value.voted)this.userGeneratedContentHelfpul.classList.add('icon-thumbs-up-solid','active');else this.userGeneratedContentHelfpul.classList.add('icon-thumbs-up');});});}updateStateNotify(content){this.userGeneratedContentElement.remove();const config={type:'success',noIcon:true,content};const notification=window.CommonKit.Notification.build(config);this.element.appendChild(notification);}setupHelpful(){this.userGeneratedContent.subscribeHelpful(()=>{window.CS.PageState.triggerUpdate('user-review-helpful-save',{},this.userReviewId).then(()=>{this.userGeneratedContent.triggerHelpfulResolve();});});}setupReport(){let modalContentLoaded=false;this.userGeneratedContent.subscribeReport(()=>{if(modalContentLoaded)return;window.CS.PageState.triggerUpdate('user-reviews-ugc-report',{},this.userReviewId).then(()=>{modalContentLoaded=true;});});}setupCookies(){this.setNamedCookie();this.updateCookieCounter();}setupReportButtons(){const counterCookie=window.CS.CsStorage.get(STORAGE_NAME_COUNTER);let limit=counterCookie&&counterCookie.reportViews>=TOTAL_REPORTS;limit=limit&&counterCookie.expirationDate-Date.now()>0;if(limit)this.disableReportButton(Drupal.t('Sorry, you can only report five reviews a day.'));else{const reviewCookie=window.CS.CsStorage.get(STORAGE_NAME);let rev=reviewCookie&&reviewCookie[this.userReviewId];rev=rev&&reviewCookie[this.userReviewId].expirationDate-Date.now()>0;if(rev)this.disableReportButton(Drupal.t("Sorry, you've already reported this review."));}}setupDelete(){let modalContentLoaded=false;this.userGeneratedContent.subscribeDelete(()=>{if(modalContentLoaded)return;window.CS.PageState.triggerUpdate('user-review-ugc-delete',{},this.userReviewId).then(()=>{modalContentLoaded=true;});});}disableReportButton(content){this.userGeneratedContentReportButton.classList.add('disabled');this.userGeneratedContentReportButton.setAttribute('data-toggle','popover');this.userGeneratedContentReportButton.setAttribute('data-content',content);window.CommonKit.Popover.get(this.userGeneratedContentReportButton).load();}setNamedCookie(){let data={};const newCookie={};newCookie.expirationDate=EXPIRESDATE_WEEK;const reviewCookie=window.CS.CsStorage.get(STORAGE_NAME);if(reviewCookie){const obj=reviewCookie;if(obj[this.userReviewId])if(obj[this.userReviewId].expirationDate-Date.now()<=0){const index=obj.indexOf(this.userReviewId);obj.splice(index,1);}data=obj;}data[this.userReviewId]=newCookie;window.CS.CsStorage.add(STORAGE_NAME,data);}updateCookieCounter(){let reportViews=1;let reportItems=[];const data={};data.expirationDate=EXPIRESDATE_DAY;const counterCookie=window.CS.CsStorage.get(STORAGE_NAME_COUNTER);if(counterCookie){const obj=counterCookie;reportItems=obj.report;reportViews=obj.reportViews;if(!reportItems.includes(this.userReviewId)){reportViews+=1;reportItems.push(this.userReviewId);}if(obj.expirationDate-Date.now()>0)data.expirationDate=obj.expirationDate;else{reportViews=1;reportItems=[this.userReviewId];window.CS.CsStorage.remove(STORAGE_NAME_COUNTER);}}else reportItems.push(this.userReviewId);data.reportViews=reportViews;data.report=reportItems;window.CS.CsStorage.add(STORAGE_NAME_COUNTER,data);}static load(){UserReviewsUgc.subscribe();}static reported(userReviewId){UserReviewsUgc.subscribe('reported',userReviewId);}static disable(){UserReviewsUgc.subscribe('disable');}static subscribe(){let action=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let param=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const selectors=Object.keys(drupalSettings.csm.userReviewsUgc.selectors);if(selectors)CommonKit.Util.intersectObserveSelectors(selectors,(element)=>{const instance=UserReviewsUgc.get(element);instance.load();if(action)instance[action](param);});}static get(element){let instance=element[DATA_KEY];if(!instance){instance=new UserReviewsUgc(element);element[DATA_KEY]=instance;}return instance;}}UserReviewsUgc.load();const userReviewsUpdateState=()=>{UserReviewsUgc.load();window.CS.PageState.triggerUpdate('user-generated-content-subscribe',{});};window.CS.PageState.subscribeUpdateState('review-view-user-reviews-tab',userReviewsUpdateState);window.CS.PageState.subscribeUpdateState('review-tab',userReviewsUpdateState);window.CS.PageState.subscribeUpdateState('list',userReviewsUpdateState);window.CS.PageState.subscribeUpdateState('list-pager',userReviewsUpdateState);const reportedUpdateState=(userReviewId)=>{UserReviewsUgc.reported(userReviewId);};window.CS.PageState.subscribeUpdateState('user-reviews-ugc-reported',reportedUpdateState);const reportedDisableUpdateState=()=>{UserReviewsUgc.disable();};window.CS.PageState.subscribeUpdateState('user-reviews-ugc-reported-disable',reportedDisableUpdateState);}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('../../../../node_modules/cs-commonkit/src/js/collapse'),require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['../../../../node_modules/cs-commonkit/src/js/collapse','../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Collapse,global.window.CommonKit.Util));})(this,(function(Collapse,Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);const DATA_KEY='cs.reveal';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const Event={CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`};const ClassName={INLINE:'reveal--inline',ITEMS:'reveal--items'};const Selector={CONTENT:'.reveal__content',TRIGGER:'.reveal__trigger',DATA_TOGGLE:'[data-toggle="reveal"]'};class Reveal extends Collapse{static get Selector(){return Selector;}load(){if(!this._loaded){this._loaded=true;this._setupElements();this._setupEnabled();this._setupTrigger();}}_getConfig(config){const _config=super._getConfig(config);_config.more=this._element.dataset.more||'Continue reading';_config.less=this._element.dataset.less||'Show less';_config.transitionDuration=this._element.getAttribute('data-transition-duration');const itemsShown=this._element.getAttribute('data-items-shown');_config.itemsShown=itemsShown?Number(itemsShown):0;return _config;}_setupElements(){this._reveal=this._element;this._element=this._reveal.querySelector(Selector.CONTENT);if(this._config.transitionDuration)this._element.setAttribute('data-transition-duration',this._config.transitionDuration);this._trigger=this._reveal.querySelector(Selector.TRIGGER);if(this._trigger&&Util__namespace.hasClass(this._reveal,ClassName.INLINE))this._element.insertBefore(this._trigger,this._element.firstChild);if(Util__namespace.hasClass(this._reveal,ClassName.ITEMS))this._items=this._element.querySelectorAll('.reveal--items__item');}_setupEnabled(){if(this._trigger&&!Util__namespace.hasClass(this._reveal,ClassName.ITEMS)){const checkEnabled=()=>{if(window.innerWidth!==this.windowWidth){this.windowWidth=window.innerWidth;this._element.style[`max-${this._config.dimension}`]='';Util__namespace.removeClass(this._reveal,Collapse.ClassName.SHOW);Util__namespace.removeClass(this._element,Collapse.ClassName.SHOW);Util__namespace.addClass(this._element,Collapse.ClassName.COLLAPSE);setTimeout(()=>{const visibleHeight=this._getDimensionValue('offset');const completeHeight=this._getDimensionValue();if(visibleHeight===completeHeight){Util__namespace.removeClass(this._element,Collapse.ClassName.COLLAPSE);if(this._trigger)this._trigger.style.display='none';}else{if(this._trigger){this._trigger.style.display='';this._trigger.innerHTML=this._config.more;}}},100);}};checkEnabled();window.CommonKit.Breakpoint.on(['xs','sm','md','lg','xl'],checkEnabled);}}_setupTrigger(){if(this._trigger)Util__namespace.listen.on(Event.CLICK_DATA_API,this._trigger,(event)=>{event.preventDefault();this.toggle();});}_beforeShow(){if(Util__namespace.hasClass(this._reveal,ClassName.ITEMS))this._items.forEach((element)=>{element.classList.remove('hidden');});Util__namespace.addClass(this._reveal,Collapse.ClassName.SHOW);}_beforeShown(){if(this._trigger)this._trigger.innerHTML=this._config.less;}_beforeHide(){if(Util__namespace.hasClass(this._reveal,ClassName.ITEMS))this._items.forEach((element,index)=>{if(index+1>this._config.itemsShown)element.classList.add('hidden');});Util__namespace.removeClass(this._reveal,Collapse.ClassName.SHOW);}_beforeHidden(){if(this._trigger)this._trigger.innerHTML=this._config.more;}}window.CommonKit=window.CommonKit||{};window.CommonKit.Reveal=Reveal;const RevealSubscribe=()=>{const settings=drupalSettings.commonKit&&drupalSettings.commonKit.reveal;if(settings&&settings.selectors)Reveal.subscribe(Object.keys(settings.selectors));};RevealSubscribe();const config={elements:[]};window.CS.PageState.addStateType('reveal-subscribe',config);window.CS.PageState.subscribeUpdateState('reveal-subscribe',()=>{RevealSubscribe();});}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DATA_KEY='csm.review-rate';class ReviewRate{constructor(element){this.element=element;}load(){if(!this.loaded){this.loaded=true;this.setup();}}setup(){this.setupConfig();this.setupTypeState();this.setupStateSubscriber();this.setupLazy();}setupConfig(){this.reviewId=this.element.dataset.id;this.delta=this.element.dataset.delta||1;this.text=this.element.dataset.text;this.stateTypeID=`${this.reviewId}${this.delta}`;}setupTypeState(){const config={url:'/ajax/review/{reviewId}/rate/{user}',elements:[this.element],state:{reviewId:this.reviewId,user:`${window.drupalSettings.user.uid}`},cache:true,progress:{options:{centered:true,cover:true}}};window.CS.PageState.addStateType('review-rate',config,this.stateTypeID);}setupStateSubscriber(){window.CS.PageState.subscribeUpdateState('user-reviews-ugc-delete-deleted',()=>{const config={cacheReset:true};window.CS.PageState.updateStateType('review-rate',config,this.stateTypeID);this.setupLazy();});}setupLazy(){window.CS.PageState.triggerUpdate('review-rate',{},this.stateTypeID).then((data)=>{data.forEach((command)=>{if(command.command==='data'){if(command.value.rated){this.element.innerText=Drupal.t('Edit your rating');this.element.classList.add('btn--secondary','icon-edit');}else{this.element.innerText=this.text;this.element.classList.add('btn--primary','icon-star');}this.element.href=command.value.url;}});});}static get(element){let instance=element[DATA_KEY];if(!instance){instance=new ReviewRate(element);element[DATA_KEY]=instance;}return instance;}static subscribe(selectors){CommonKit.Util.intersectObserveSelectors(selectors,(element)=>{ReviewRate.get(element).load();});}}const subscribe=()=>{const settings=drupalSettings.csm&&drupalSettings.csm.reviewRate;if(settings&&settings.selectors)ReviewRate.subscribe(Object.keys(settings.selectors));};subscribe();const config={elements:[]};window.CS.PageState.addStateType('review-rate-subscribe',config);window.CS.PageState.subscribeUpdateState('review-rate-subscribe',()=>{subscribe();});}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DATA_KEY='csm.user-reviews-view-content-main';class UserReviewsViewContentMain{constructor(element){this.element=element;this.reviewId=this.element.dataset.id;this.listType=this.element.dataset.list;this.ageGroup=this.element.dataset.age;}load(){if(!this.loaded){this.loaded=true;this.setupElements();this.setupUserReviewsListTypeState();this.setupUserReviewStateSubscriber();this.handleSort();this.handlePager();}}setupElements(){this.listElement=this.element.querySelector('.user-reviews-reviews-list');this.pagerLoadMoreElement=this.element.querySelector('.pager-load-more');}setupUserReviewsListTypeState(){const listConfig={url:'/ajax/review/{reviewId}/user-review/list/{listType}/{ageGroup}/{sort}/{page}',elements:[this.listElement],state:{reviewId:this.reviewId,listType:this.listType,ageGroup:this.ageGroup,sort:'default'}};window.CS.PageState.addStateType('list',listConfig,this.ageGroup);if(this.pagerLoadMoreElement){const listPagerConfig={url:'/ajax/review/{reviewId}/user-review/list/{listType}/{ageGroup}/{sort}/{page}',elements:[this.pagerLoadMoreElement],state:{reviewId:this.reviewId,listType:this.listType,ageGroup:this.ageGroup,sort:'default'},cache:true};window.CS.PageState.addStateType('list-pager',listPagerConfig,this.ageGroup);}}setupUserReviewStateSubscriber(){const updateState=(ageGroup)=>{if(ageGroup!==this.ageGroup)return;this.setupElements();this.setupUserReviewsListTypeState();this.handlePager();if(window.CS.PageState.getStateType('pager-load-more-subscribe'))window.CS.PageState.triggerUpdate('pager-load-more-subscribe');if(window.CS.PageState.getStateType('user-login-modal-subscribe'))window.CS.PageState.triggerUpdate('user-login-modal-subscribe');};window.CS.PageState.subscribeUpdateState('list',updateState);window.CS.PageState.subscribeUpdateState('list-pager',updateState);}handleSort(){const sortDropdown=this.element.querySelector('.user-reviews-view-content-main-sort .dropdown');if(sortDropdown)window.CommonKit.Util.waitFor(()=>{sortDropdown.addEventListener(window.CommonKit.Dropdown.Event.SELECT,(event)=>{const state={sort:event.relatedTargetValue,page:0};window.CS.PageState.triggerUpdate('list',state,this.ageGroup);});},()=>window.CommonKit.Dropdown);}handlePager(){if(this.pagerLoadMoreElement)window.CommonKit.Util.waitFor(()=>{const pagerLoadMore=window.CommonKit.PagerLoadMore.get(this.pagerLoadMoreElement);pagerLoadMore.subscribeLoadMore((event)=>{const state={page:event.page};window.CS.PageState.triggerUpdate('list-pager',state,this.ageGroup);});},()=>window.CommonKit.PagerLoadMore);}static subscribe(){UserReviewsViewContentMain.instances().forEach((instance)=>{instance.load();});}static instances(){const instances=[];if(drupalSettings.csm&&drupalSettings.csm.userReviewsViewContentMain){const selectors=Object.keys(drupalSettings.csm.userReviewsViewContentMain.selectors);selectors.forEach((selector)=>{const element=document.getElementById(selector);if(element)instances.push(UserReviewsViewContentMain.get(element));});}return instances;}static get(element){let instance=element[DATA_KEY];if(!instance){instance=new UserReviewsViewContentMain(element);element[DATA_KEY]=instance;}return instance;}}UserReviewsViewContentMain.subscribe();const userReviewsUpdateState=()=>{UserReviewsViewContentMain.subscribe();};window.CS.PageState.subscribeUpdateState('review-tab',userReviewsUpdateState);}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class ReviewViewTab{setup(){this.setupElements();this.handleTabs();}setupElements(){this.element=document.getElementById('review-view-tab');this.topIntro=document.getElementById('review-view-top-intro');}handleTabs(){const loaded={};let active;const tabElement=this.element.querySelector('.tab');const tabNavElement=tabElement.querySelector('.tab__nav');const tabs=tabNavElement.querySelectorAll('[data-toggle="tab"]');tabs.forEach((tab)=>{const type=tab.getAttribute('data-type');if(tab.classList.contains('active')){active=type;loaded[active]=true;}let element;let topIntro;if(type==='adult'){element=document.getElementById('user-reviews-view-content-main-adult');topIntro=Drupal.t('Parent Reviews of');}else if(type==='child'){element=document.getElementById('user-reviews-view-content-main-child');topIntro=Drupal.t('Kid Reviews of');}else{element=document.getElementById('review-view-content-main');topIntro=Drupal.t("Parents' Guide to");}const config={url:'/ajax/review/{reviewId}/tab/{type}',elements:[element],state:{reviewId:this.element.getAttribute('data-id'),type},cache:true};window.CS.PageState.addStateType('review-tab',config,type);tab.addEventListener('show.cs.tabs',()=>{if(type==='review')drupalSettings.csm.ga_dimension.content_group='Editorial Reviews';else{if(type==='adult'||type==='child')drupalSettings.csm.ga_dimension.content_group='User Reviews';}if(loaded[type]){this.topIntro.innerText=topIntro;return;}window.CS.PageState.triggerUpdate('review-tab',{},type).then(()=>{loaded[type]=true;this.topIntro.innerText=topIntro;if(window.CS.PageState.getStateType('pager-load-more-subscribe'))window.CS.PageState.triggerUpdate('pager-load-more-subscribe');if(window.CS.PageState.getStateType('slider-subscribe'))window.CS.PageState.triggerUpdate('slider-subscribe');if(window.CS.PageState.getStateType('user-login-modal-subscribe'))window.CS.PageState.triggerUpdate('user-login-modal-subscribe');if(window.CS.PageState.getStateType('review-rate-subscribe'))window.CS.PageState.triggerUpdate('review-rate-subscribe');});});});}static init(){const reviewViewTab=new ReviewViewTab();reviewViewTab.setup();}}ReviewViewTab.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const STORAGE_NAME='STYXKEY-content-gating-SR1';const DAYINSECS=86400000;const GATEWINDOW=30;const CURRENTDATE=Date.now();const EXPIRESDATE=CURRENTDATE+DAYINSECS*GATEWINDOW;let isGateFull=false;class UserPlusContentGate{setup(){this.setupElements();if(this.isVisible()){this.setupConfig();this.setupCookie();this.setupGate();}}isVisible(){const type=this.element.getAttribute('data-type');const queries=['cs8374','attscreenreadypartnership','coxresidentialpartnership','facetoolkit','googlefamiliespartnership','xfinitylearnpartnership','commsdistributionlink'];const hideQuery=queries.filter((query)=>window.location.search.includes(`gate=${query}`));if(hideQuery.length)return false;if(document.referrer){const referrerUrl=new URL(document.referrer);const referrerDomain=referrerUrl.hostname||'';const referrers=['families.google','screenready.att.com','www.cox.com','www.xfinity.com'];const hideReferrer=referrers.filter((referrer)=>referrer===referrerDomain);if(hideReferrer.length)return false;}const isEnglish=window.drupalSettings.path.currentLanguage==='en';if(!isEnglish)return false;const internalRoles=['administrator','bizdev','csm_blogger','csm_guest_blogger','editor','marcomm','reviewer','senior_editor','user_admin'];const hideRoles=['kid','teen','plus_member'].concat(internalRoles);const userHideRoles=window.drupalSettings.user.roles.filter((role)=>hideRoles.includes(role));if(userHideRoles.length)return false;const urls={csm_review:['/'],csm_blog:['/articles/parents-ultimate-guide']};const path=window.location.pathname;const hideUrl=urls[type].filter((url)=>path.startsWith(url));if(!hideUrl.length)return false;return true;}setupElements(){this.element=document.getElementById('user-plus-gate');}setupConfig(){this.type=this.element.getAttribute('data-type');this.content=JSON.parse(this.element.dataset.content);const config={csm_review:{start:2,total:3},csm_blog:{start:1,total:0}};this.contentViews=1;this.contentItems=[];this.storageName=`${STORAGE_NAME}-${this.type}`;this.totalViews=config[this.type].total;this.config=config[this.type];}setupCookie(){const data={};data.createDate=CURRENTDATE;data.expirationDate=EXPIRESDATE;this.cookie=window.CS.CsStorage.get(STORAGE_NAME);if(this.cookie){window.CS.CsStorage.remove(STORAGE_NAME);window.CS.CsStorage.add(`${STORAGE_NAME}-csm_review`,this.cookie);}this.cookie=window.CS.CsStorage.get(this.storageName);if(this.cookie){const obj=this.cookie;this.contentItems=obj.content;if(obj.contentViews<=this.totalViews){this.contentViews=obj.contentViews;if(!this.contentAlreadyViewed(this.cookie))this.contentViews+=1;}else this.contentViews=this.totalViews+1;if(obj.expirationDate-Date.now()>0){data.createDate=obj.createDate;data.expirationDate=obj.expirationDate;}else{this.contentViews=1;this.contentItems=[];window.CS.CsStorage.remove(this.storageName);}}data.contentViews=this.contentViews;data.content=this.contentItems;data.content.push(this.content);window.CS.CsStorage.add(this.storageName,data);}contentAlreadyViewed(cookie){const parsedCookie=cookie;const currentContent=this.content;return parsedCookie.content.some((contentItem)=>contentItem.id===currentContent.id);}setupGate(){this.setupGateMarkup();this.setupReqLink();}setupGateMarkup(){const data=drupalSettings.user_plus_gate_content;const nodeNID=this.content.id;const htmlWrapper=document.createElement('div');const wrapper=document.createElement('div');if(this.contentViews!==this.config.total+1){htmlWrapper.classList.add('notification-gate-wrapper');wrapper.classList.add('gate-wrapper');wrapper.classList.add('notification');wrapper.classList.add('notification--alert');wrapper.classList.add('notification--no-icon');}htmlWrapper.append(wrapper);const gate=document.createElement('div');gate.classList.add('gate');gate.classList.add(`step-${this.contentViews}`);drupalSettings.csm.ga_dimension.csm_gate_stage=this.contentViews;wrapper.append(gate);if(this.contentViews>this.totalViews){let gateState='condensed';let gateClass='condensed-gate';let contentIds=[];this.contentItems.forEach((i)=>contentIds.push(i.id));contentIds=contentIds.filter(this.onlyUnique);const excLimit=this.config.total;const exclIds=contentIds.slice(0,excLimit);const excludedNid=exclIds.find((contentId)=>contentId===nodeNID);if(!excludedNid){wrapper.classList.add('full-gate-wrapper');gateState='expanded';gateClass='full-gate';document.body.classList.add('csm-premium-gated');const overlay=document.createElement('div');overlay.classList.add('gate-overlay');wrapper.parentNode.insertBefore(overlay,wrapper);isGateFull=true;}else{htmlWrapper.classList.add('notification-gate-wrapper');wrapper.classList.add('gate-wrapper');wrapper.classList.add('notification');wrapper.classList.add('notification--alert');wrapper.classList.add('notification--no-icon');}const fullGate=document.createElement('div');fullGate.classList.add(gateClass);gate.append(fullGate);const fDesktopDisplay=document.createElement('div');fDesktopDisplay.innerHTML=data[this.contentViews][gateState].content;fullGate.append(fDesktopDisplay);}else{if(this.contentViews!==1){const condensedGate=document.createElement('div');condensedGate.classList.add('condensed');gate.append(condensedGate);const cDesktopDisplay=document.createElement('div');cDesktopDisplay.innerHTML=data[this.contentViews].condensed.content;condensedGate.append(cDesktopDisplay);}}if(this.contentViews>=this.config.start)this.element.append(htmlWrapper);}setupReqLink(){const reqLink=document.getElementById('checkout-request-link');if(reqLink){const todayDate=new Date().getTime();const tSecond=1000;const tMinute=60;const tHour=60;const tDay=24;const tomorrowDate=Math.round(todayDate/tSecond)+tMinute*tHour*tDay;const qMark=reqLink.href.indexOf('?');const qString=reqLink.href.slice(0,qMark);reqLink.href=`${qString}?request=${tomorrowDate}`;}}onlyUnique(value,index,self){return self.indexOf(value)===index;}static init(){const userPlusContentGate=new UserPlusContentGate();userPlusContentGate.setup();}static isGateFull(){return isGateFull;}}UserPlusContentGate.init();window.CSM=window.CSM||{};window.CSM.UserPlusContentGate=UserPlusContentGate;}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class UserPlusCheckoutPlan{setup(){this.setupElements();if(this.element)this.setupPlanSelect();}setupElements(){this.element=document.getElementById('user-plus-checkout-plan');}setupPlanSelect(){const actions=this.element.querySelector('.user-plus-checkout-plan-actions');if(!actions)return;const planOptions=this.element.querySelectorAll('input');const subscribe=actions.querySelector('.btn');planOptions.forEach((option)=>{if(option.checked)subscribe.href=this.getOptionUrl(option.getAttribute('data-url'));option.addEventListener('change',()=>{if(option.checked)subscribe.href=this.getOptionUrl(option.getAttribute('data-url'));});});}getOptionUrl(url){if(this.element.classList.contains('user-plus-checkout-plan--destination')){const {path}=window.drupalSettings;const destination=`destination=${path.pathPrefix}/${path.currentPath}`;const querySeparator=url.includes('?')?'&':'?';return `${url}${querySeparator}${destination}`;}return url;}static init(){const userPlusCheckoutPlan=new UserPlusCheckoutPlan();userPlusCheckoutPlan.setup();}}UserPlusCheckoutPlan.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class CsmHeaderMainMenu{setup(){this.setupElements();this.setupTypeStateSubscriber();this.setupActive();}setupElements(){this.element=document.getElementById('header-main-menu');}setupTypeStateSubscriber(){const updateState=()=>{if(window.drupalSettings.user.browseReviewsUrl){const links=this.element.querySelectorAll('.menu-link--browse-reviews');const browseReviewsUrl=window.drupalSettings.user.browseReviewsUrl.replace('%2B','+');let pattern=/\/(\w+)-reviews/;if(window.drupalSettings.path.currentLanguage==='es')pattern=/\/resenas-(\w+)/;links.forEach((link)=>{let url=link.getAttribute('href');const matches=url.match(pattern);url=browseReviewsUrl.replace('movie',matches[1]);url=url.replace('pelicula',matches[1]);link.setAttribute('href',url);});}};window.CS.PageState.subscribeUpdateState('user-data',updateState);}setupActive(){let active=this.getActiveItem('.menu-item--depth-3 > a');if(active)this.getActiveAncestor(active);else{active=this.getActiveItem('.menu-item--depth-1 > a');if(active)this.getActiveAncestor(active);}}getActiveItem(selector){const currentPath=window.location.href;const items=this.element.querySelectorAll(selector);let active;items.forEach((item)=>{if(!active&&currentPath===item.href)active=item;});return active;}getActiveAncestor(active){const itemLevelTwo=active.closest('.menu-item--depth-2');if(itemLevelTwo)itemLevelTwo.classList.add('menu-item--active-trail');const itemLevelOne=active.closest('.menu-item--depth-1');if(itemLevelOne)itemLevelOne.classList.add('menu-item--active-trail');}static init(){const csmHeaderMainMenu=new CsmHeaderMainMenu();csmHeaderMainMenu.setup();}}CsmHeaderMainMenu.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const DATA_KEY='cs.header-mobile-menu';const EVENT_KEY=`.${DATA_KEY}`;const Event={SHOW:`show${EVENT_KEY}`,HIDE:`hide${EVENT_KEY}`,SHOWN:`shown${EVENT_KEY}`,HIDDEN:`hidden${EVENT_KEY}`};class HeaderMobileMenu{constructor(){this.body=document.body;this.menuAmount=1;this.menuReady=[];}setup(){this.setupElements();this.setupTypeState();this.setupTypeStateSubscriber();this.setupMobileMenuButton();}setupElements(){this.mobileMenu=window.CS.MobileMenu.init('header-mobile-menu');window.CS.HeaderMobileMenu.MobileMenu=this.mobileMenu;this.mobileMenuWrapper=document.createElement('div');this.mobileMenuWrapper.classList.add('mobile-menu-wrapper');this.body.appendChild(this.mobileMenuWrapper);this.navOverlay=this.body.querySelector('#nav-overlay');this.menus=['main'];if(document.getElementById('header-user-menu')||document.getElementById('csm-header-user-menu')){this.menus.push('user');this.menuAmount=this.menus.length;}if(document.getElementById('header-language-switcher')){this.menus.push('language');this.menuAmount=this.menus.length;}}setupTypeState(){this.menus.forEach((menu)=>{const config={elements:[]};window.CS.PageState.addStateType('header-menu-mobile',config,menu);});}setupTypeStateSubscriber(){const updateState=(menu)=>{this.menuReady.push(menu);if(this.menuReady.length===this.menuAmount)this.setupMobileMenu();};window.CS.PageState.subscribeUpdateState('header-menu-mobile',updateState);}setupMobileMenu(){const mobileMenuElement=this.mobileMenu.setupMenu();this.mobileMenuWrapper.appendChild(mobileMenuElement);const wrapper=document.getElementById('header-mobile-menu-wrapper');const menuSiteItem=document.createElement('div');menuSiteItem.classList.add('mobile-menu-group','mobile-menu-site');const dataSiteName=wrapper.getAttribute('data-site-name');const menuSiteLink=document.createElement('a');menuSiteLink.href='/';menuSiteLink.classList.add('site-logo');if(dataSiteName==='cs_org'){menuSiteLink.href='https://www.commonsense.org/';menuSiteLink.classList.add('cs-org-site-logo');}menuSiteItem.appendChild(menuSiteLink);this.menuCloseIcon=document.createElement('i');this.menuCloseIcon.classList.add('icon-close');menuSiteItem.appendChild(this.menuCloseIcon);mobileMenuElement.appendChild(menuSiteItem);}setupMobileMenuButton(){const closeMenu=()=>{this.body.classList.remove('mobile-menu-open');this.mobileMenuTransitionEvents(Event.HIDE,Event.HIDDEN);};const bodyClick=(event)=>{const menuWrapper=this.mobileMenuWrapper;if(menuWrapper!==event.target&&!menuWrapper.contains(event.target)){closeMenu();this.body.removeEventListener('click',bodyClick);}};this.body.querySelector('.mobile-menu-button').addEventListener('click',(event)=>{event.stopPropagation();this.body.classList.add('mobile-menu-open');this.mobileMenuTransitionEvents(Event.SHOW,Event.SHOWN);this.body.addEventListener('click',bodyClick);this.menuCloseIcon.addEventListener('click',closeMenu);});}dispatchEvent(eventApiId,element=this.body){const eventObject=window.CommonKit.Util.createEvent(eventApiId);element.dispatchEvent(eventObject);}mobileMenuTransitionEvents(startEventID,transitionEndID){const complete=()=>{this.dispatchEvent(transitionEndID);};this.dispatchEvent(startEventID);const transitionDuration=window.CommonKit.Util.getTransitionDurationFromElement(this.mobileMenuWrapper);window.CommonKit.Util.once(this.mobileMenuWrapper,window.CommonKit.Util.TRANSITION_END,complete);window.CommonKit.Util.emulateTransitionEnd(this.mobileMenuWrapper,transitionDuration);}static init(){const headerMobileMenu=new HeaderMobileMenu();headerMobileMenu.setup();}}window.CS=window.CS||{};window.CS.HeaderMobileMenu={};HeaderMobileMenu.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class HeaderMainMenu{setup(){const menu=document.getElementById('header-main-menu');CS.HeaderMobileMenu.MobileMenu.addMenu(menu);window.CS.PageState.triggerUpdate('header-menu-mobile',{},'main');CS.MenuHierarchical.init(menu);}static init(){const headerMainMenu=new HeaderMainMenu();headerMainMenu.setup();}}HeaderMainMenu.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class CsmHeaderUserMenu{setup(){this.setupElements();this.setupTypeState();this.setupTypeStateSubscriber();this.setupLazy();}setupElements(){this.element=document.getElementById('csm-header-user-menu');}setupTypeState(){const config={url:'/ajax/user/{user}/menu',elements:[this.element],state:{user:window.drupalSettings.user.uid},insertDelay:500,progress:{options:{centered:true,cover:true}}};window.CS.PageState.addStateType('header-user-menu',config);const configAnon={url:'/ajax/user/0/menu',elements:[this.element],insertDelay:500,progress:{options:{centered:true,cover:true}}};window.CS.PageState.addStateType('header-user-menu-anon',configAnon);const configData={elements:[]};window.CS.PageState.addStateType('user-data',configData);}setupLazy(){const stateType=window.drupalSettings.user.uid===0?'header-user-menu-anon':'header-user-menu';window.CS.PageState.triggerUpdate(stateType,{}).then(()=>{window.CS.PageState.triggerUpdate('user-data',{});});}setupTypeStateSubscriber(){const updateState=(menuId)=>{this.addKidsHeader(menuId);};window.CS.PageState.subscribeUpdateState('mobile-menu-items-ready',updateState);}addKidsHeader(menuId){if(menuId==='header-mobile-menu'){const mobileMenu=document.getElementById('header-mobile-menu');const firstChildItem=mobileMenu.querySelector('.menu-item--child-1');if(firstChildItem){const accordionKidsGroupTitleBold=document.createElement('strong');accordionKidsGroupTitleBold.innerHTML=Drupal.t('My Kids');const accordionKidsGroupTitle=document.createElement('p');accordionKidsGroupTitle.appendChild(accordionKidsGroupTitleBold);firstChildItem.parentNode.insertBefore(accordionKidsGroupTitle,firstChildItem);}}}static init(){const csmHeaderUserMenu=new CsmHeaderUserMenu();csmHeaderUserMenu.setup();}}CsmHeaderUserMenu.init();}));;
(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(require('@popperjs/core'),require('../../../../node_modules/cs-commonkit/src/js/util')):typeof define==='function'&&define.amd?define(['@popperjs/core','../../../../node_modules/cs-commonkit/src/js/util'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.window.CommonKit.Popper,global.window.CommonKit.Util));})(this,(function(core,Util){'use strict';function _interopNamespaceDefault(e){var n=Object.create(null);if(e)Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});n.default=e;return Object.freeze(n);}var Util__namespace=_interopNamespaceDefault(Util);class ElementBase{constructor(element,config={}){this._element=element;this._config=this._getConfig(config);}load(){if(!this._loaded)this._loaded=true;}static create(attributes={},tag='div',config={}){const element=Util__namespace.element.create(tag,attributes);return this.get(element,config);}build(){return this;}static get(element,config={}){let instance=element[this.DATA_KEY];if(!instance){instance=new this(element,config);element[this.DATA_KEY]=instance;}return instance;}static subscribe(selectors=[],observer='intersector'){const observeSelectors=observer==='intersector'?'intersectObserveSelectors':'mutateObserveSelectors';Util__namespace[observeSelectors](selectors,(element)=>{this.get(element).load();});}static autoLoad(selector=this.Selector.DATA_TOGGLE){Util__namespace.mutateObserve(selector,(elements)=>{elements.forEach((element)=>{this.get(element).load();});});}static get DATA_KEY(){return `cs.${this.name.toLowerCase()}`;}static get Selector(){return {};}static get Default(){return {};}static get Event(){return {};}_getConfig(config){const _config={...this.constructor.Default,...this._element.dataset,...config};return _config;}}const DATA_KEY='cs.dropdown';const EVENT_KEY=`.${DATA_KEY}`;const DATA_API_KEY='.data-api';const ESCAPE_KEYCODE=27;const SPACE_KEYCODE=32;const TAB_KEYCODE=9;const ARROW_UP_KEYCODE=38;const ARROW_DOWN_KEYCODE=40;const RIGHT_MOUSE_BUTTON_WHICH=3;const REGEXP_KEYDOWN=new RegExp(`${ARROW_UP_KEYCODE}|${ARROW_DOWN_KEYCODE}|${ESCAPE_KEYCODE}`);const Event={HIDE:`hide${EVENT_KEY}`,HIDDEN:`hidden${EVENT_KEY}`,SHOW:`show${EVENT_KEY}`,SHOWN:`shown${EVENT_KEY}`,CLICK:`click${EVENT_KEY}`,CLICK_DATA_API:`click${EVENT_KEY}${DATA_API_KEY}`,KEYDOWN_DATA_API:`keydown${EVENT_KEY}${DATA_API_KEY}`,KEYUP_DATA_API:`keyup${EVENT_KEY}${DATA_API_KEY}`,SELECT:`select${EVENT_KEY}`,SELECTED:`selected${EVENT_KEY}`};const ClassName={SHOW:'show',ACTIVE:'active',DISABLED:'disabled',DROPDOWN:'dropdown',MENU:'dropdown__menu',ITEM:'dropdown__item'};const Selector={DATA_TOGGLE:'[data-toggle="dropdown"]',MENU:`.${ClassName.MENU}`,ITEM:`.${ClassName.ITEM}`,VISIBLE_ITEMS:'.dropdown__menu .dropdown__item:not(.disabled):not(:disabled)'};const Default={selectable:false,flip:true,placement:'bottom-start',offset:8,preventOverflow:true};const Attachment=['top','top-start','top-end','bottom','bottom-start','bottom-end'];const dropdowns=[];class Dropdown extends ElementBase{constructor(element,config={}){super(element,config);this._menu=this._getMenuElement();this._items=[].slice.call(this._menu.querySelectorAll(Selector.ITEM));this._popper=null;this.loaded=false;this._originalElementValue=this._element.innerHTML.trim();this._addEventListeners();}static get DATA_KEY(){return DATA_KEY;}static get Event(){return Event;}static get ClassName(){return ClassName;}static get Selector(){return Selector;}static get Default(){return Default;}toggle(){if(this._element.disabled||Util__namespace.hasClass(this._element,ClassName.DISABLED))return;if(!this.loaded){dropdowns.push(this._element);this.loaded=true;}const isActive=Util__namespace.hasClass(this._element,ClassName.ACTIVE);Dropdown._clearMenus();if(isActive)return;const parent=Dropdown._getParentFromElement(this._element);const showEvent=Util__namespace.createEvent(Dropdown.Event.SHOW);showEvent.relatedTarget=this._element;parent.dispatchEvent(showEvent);if(showEvent.defaultPrevented)return;this._element.focus();this._element.setAttribute('aria-expanded',true);this._element.classList.toggle(ClassName.ACTIVE);this._menu.classList.toggle(ClassName.SHOW);parent.classList.toggle(ClassName.SHOW);this._popper=core.createPopper(this._element,this._menu,{placement:this._config.placement,modifiers:[{name:'flip',enabled:Boolean(this._config.flip),options:{padding:this._config.offset,...(typeof this._config.flip==='object'&&this._config.flip)}},{name:'preventOverflow',enabled:Boolean(this._config.preventOverflow),options:{padding:this._config.offset,...(typeof this._config.flip==='object'&&this._config.flip)}},{name:'hide',enabled:Boolean(this._config.flip)},{name:'offset',options:{offset:[0,this._config.offset]}}]});const shownEvent=Util__namespace.createEvent(Dropdown.Event.SHOWN);shownEvent.relatedTarget=this._element;parent.dispatchEvent(shownEvent);}_addEventListeners(){if(this._config.selectable)this._items.forEach((item)=>{item.addEventListener('click',(event)=>{event.preventDefault();event.stopPropagation();this._handleSelectable(item);});});}_handleSelectable(item){if(Util__namespace.hasClass(item,ClassName.DISABLED))return;const parent=Dropdown._getParentFromElement(this._element);const selectEvent=Util__namespace.createEvent(Dropdown.Event.SELECT);selectEvent.relatedTarget=item;selectEvent.relatedTargetValue=item.getAttribute('data-value');parent.dispatchEvent(selectEvent);if(Util__namespace.hasClass(item,ClassName.ACTIVE)){this._element.innerHTML=this._originalElementValue;Util__namespace.removeClass(item,ClassName.ACTIVE);}else{Util__namespace.removeClass(this._items,ClassName.ACTIVE);Util__namespace.addClass(item,ClassName.ACTIVE);this._element.innerHTML=item.innerHTML;}Dropdown._clearMenus();const selectedEvent=Util__namespace.createEvent(Dropdown.Event.SELECTED);selectedEvent.relatedTarget=item;parent.dispatchEvent(selectedEvent);}_getConfig(config){const _config=super._getConfig(config);_config.placement=Attachment.indexOf(_config.placement)>-1?_config.placement:Default.placement;_config.flip=_config.flip==='disabled'?false:Default.flip;return _config;}_getMenuElement(){if(!this._menu){const parent=Dropdown._getParentFromElement(this._element);if(parent)this._menu=parent.querySelector(Dropdown.Selector.MENU);}return this._menu;}static _clearMenus(event){if(event){let invalidEvent=event.which===RIGHT_MOUSE_BUTTON_WHICH;invalidEvent=invalidEvent||event.type==='keyup'&&event.which!==TAB_KEYCODE;if(invalidEvent)return;}dropdowns.forEach((dropdown)=>{const parent=Dropdown._getParentFromElement(dropdown);if(Util__namespace.hasClass(parent,ClassName.SHOW)){if(event&&parent.contains(event.target))if(event.type==='keyup'&&event.which===TAB_KEYCODE)return;Dropdown._clearMenusHelper(dropdown);}});}static _clearMenusHelper(element){const context=element[DATA_KEY];const dropdownMenu=context._menu;const hideEvent=Util__namespace.createEvent(Dropdown.Event.HIDE);const parent=Dropdown._getParentFromElement(element);parent.dispatchEvent(hideEvent);if(hideEvent.defaultPrevented)return false;element.setAttribute('aria-expanded','false');Util__namespace.removeClass(dropdownMenu,ClassName.SHOW);Util__namespace.removeClass(parent,ClassName.SHOW);Util__namespace.removeClass(element,ClassName.ACTIVE);parent.dispatchEvent(Util__namespace.createEvent(Dropdown.Event.HIDDEN));context._popper.destroy();context._popper=null;return true;}static _getParentFromElement(element){let parent;const selector=Util__namespace.getSelectorFromElement(element);if(selector)parent=document.querySelector(selector);return parent||element.parentNode;}static _dataApiKeydownHandler(event){let target=event.target;if(target.parentNode)if(Util__namespace.hasClass(target.parentNode,ClassName.ITEM))target=target.parentNode;if(/input|textarea|label/i.test(target.tagName)?event.which===SPACE_KEYCODE||event.which!==ESCAPE_KEYCODE&&(event.which!==ARROW_DOWN_KEYCODE&&event.which!==ARROW_UP_KEYCODE||target.closest(Dropdown.Selector.MENU).length):!REGEXP_KEYDOWN.test(event.which))return;event.preventDefault();event.stopPropagation();if(target.disabled||Util__namespace.hasClass(target,ClassName.DISABLED))return;let parent=Util__namespace.getSelectorFromElement(target);if(!parent){parent=target.closest(Dropdown.Selector.MENU);if(!parent)parent=target.parentNode.querySelector(Dropdown.Selector.MENU);}else parent=document.querySelector(parent);const isActive=Util__namespace.hasClass(parent,ClassName.SHOW);if(event.which!==ARROW_DOWN_KEYCODE&&event.which!==ARROW_UP_KEYCODE)if(!isActive||isActive&&(event.which===ESCAPE_KEYCODE||event.which===SPACE_KEYCODE)){if(event.which===ESCAPE_KEYCODE){const toggle=parent.querySelector(Dropdown.Selector.DATA_TOGGLE);if(toggle)toggle.focus();}parent.click();return;}const items=[].slice.call(parent.querySelectorAll(Dropdown.Selector.VISIBLE_ITEMS));if(items.length===0)return;let index=items.indexOf(target);if(event.which===ARROW_UP_KEYCODE&&index>0)index--;if(event.which===ARROW_DOWN_KEYCODE&&index<items.length-1)index++;if(index<0)index=0;let dataTargeTrigger=items[index];if(dataTargeTrigger.hasAttribute('data-target')||dataTargeTrigger.hasAttribute('href'))dataTargeTrigger.focus();else if(dataTargeTrigger.querySelector('[data-target]')){dataTargeTrigger=dataTargeTrigger.querySelector('[data-target]');dataTargeTrigger.focus();}else{if(dataTargeTrigger.querySelector('[href]')){dataTargeTrigger=dataTargeTrigger.querySelector('[href]');dataTargeTrigger.focus();}}}}Util__namespace.on(Event.KEYDOWN_DATA_API,Selector.DATA_TOGGLE,Dropdown._dataApiKeydownHandler,{preventDefault:false,stopPropagation:false});Util__namespace.on(Event.KEYDOWN_DATA_API,Selector.MENU,Dropdown._dataApiKeydownHandler);Util__namespace.on(`${Event.CLICK_DATA_API} ${Event.KEYUP_DATA_API}`,document,Dropdown._clearMenus);Util__namespace.on(Event.CLICK_DATA_API,Selector.DATA_TOGGLE,(event)=>{const element=event.target.closest(Selector.DATA_TOGGLE);Dropdown.get(element).toggle();});window.CommonKit=window.CommonKit||{};window.CommonKit.Dropdown=Dropdown;}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const SEARCH_SHOW_DELAY=100;const SEARCH_REQUEST_DELAY=500;const KEYS={tab:9,enter:13,shift:16,arrowLeft:37,arrowRight:39};const SEARCH_KEY_PREVENT=[KEYS.tab,KEYS.shift,KEYS.arrowLeft,KEYS.arrowRight];class HeaderSearch{setup(){this.setupElements();this.setupTypeState();this.setupStateSubscriber();this.setupMobileSearch();this.setupDesktopSearch();this.setupSearchAutocomplete();}update(){this.searchResult=this.search.querySelector('.header-search-result');}setupElements(){this.search=document.getElementById('header-search');this.searchInput=this.search.querySelector('input');this.searchResult=this.search.querySelector('.header-search-result');}setupTypeState(){const config={url:'/ajax/autocomplete/search/{search}',elements:[this.searchResult],cache:true,progress:{parent:this.search,options:{size:'sm'}}};window.CS.PageState.addStateType('header-search',config);}setupStateSubscriber(){window.CS.PageState.subscribeUpdateState('header-search',()=>{this.update();});}setupMobileSearch(){const setupSearch=CommonKit.Util.debounce(()=>{if(CommonKit.Breakpoint.isLessThan('lg')){this.searchWrapper=document.querySelector('.header-wrapper .header-search-wrapper');this.setupSearchOpen();this.setupSearchButton();window.removeEventListener('resize',setupSearch);window.removeEventListener('orientationchange',setupSearch);}},CommonKit.Util.DEBOUNCE_DELAY);window.addEventListener('resize',setupSearch);window.addEventListener('orientationchange',setupSearch);setupSearch();}setupSearchOpen(){const navOverlay=document.getElementById('nav-overlay');const closeSearch=()=>{document.body.classList.remove('mobile-search-open');navOverlay.classList.remove('show');this.searchWrapper.classList.remove('mobile-open');};const searchButtonIcon=document.querySelector('.mobile-search-button');searchButtonIcon.addEventListener('click',(event)=>{event.stopPropagation();if(!this.searchWrapper.classList.contains('mobile-open'))document.body.addEventListener('click',closeSearch,{once:true});document.body.classList.add('mobile-search-open');navOverlay.classList.toggle('show');this.searchWrapper.classList.toggle('mobile-open');});this.search.addEventListener('click',(event)=>{event.stopPropagation();});}setupSearchButton(){const searchButton=this.search.querySelector('.btn-mobile-search');searchButton.addEventListener('click',()=>{this.doSearch();});}setupDesktopSearch(){const setupSearch=CommonKit.Util.debounce(()=>{if(CommonKit.Breakpoint.isBiggerThan('md')){this.setupSearchIcon();this.setupSearchInput();window.removeEventListener('resize',setupSearch);window.removeEventListener('orientationchange',setupSearch);}},CommonKit.Util.DEBOUNCE_DELAY);window.addEventListener('resize',setupSearch);window.addEventListener('orientationchange',setupSearch);setupSearch();}setupSearchIcon(){const iconSearch=this.search.querySelector('.icon-search');iconSearch.addEventListener('click',()=>{if(this.search.classList.contains('show'))this.doSearch();else this.searchInput.click();});}setupSearchInput(){this.searchInput.addEventListener('focusin',()=>{this.search.classList.add('show');});this.searchInput.addEventListener('focusout',()=>{setTimeout(()=>{this.search.classList.remove('show');},SEARCH_SHOW_DELAY);});}setupSearchAutocomplete(){this.searchInput.addEventListener('keyup',CommonKit.Util.debounce((event)=>{if(SEARCH_KEY_PREVENT.indexOf(event.keyCode)>-1)return;if(event.keyCode===KEYS.enter){this.doSearch();return;}if(!this.searchInput.value){while(this.searchResult.firstChild)this.searchResult.firstChild.remove();this.search.classList.remove('search-loaded');return;}this.search.classList.add('loading');const state={search:this.getSearchValue()};window.CS.PageState.triggerUpdate('header-search',state).then(()=>{this.search.classList.remove('loading');this.search.classList.add('search-loaded');});},SEARCH_REQUEST_DELAY));}doSearch(){const search=this.getSearchValue();if(search)window.location=`/${drupalSettings.path.pathPrefix}search/${search}`;}getSearchValue(){return this.searchInput.value.replace('/','|');}static init(){const headerSearch=new HeaderSearch();headerSearch.setup();}}HeaderSearch.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';class CsHeaderLanguageSwitcher{setup(){this.setupElements();this.setupMobileMenu();}setupElements(){this.menu=document.getElementById('header-language-switcher');}setupMobileMenu(){const options={weight:-50,callback:(menu)=>{const clonedMenu=this.menu.cloneNode(true);clonedMenu.id='mobile-header-language-switcher';const languageSwitcherMenu=menu.querySelector('.mobile-header-language-switcher');languageSwitcherMenu.appendChild(clonedMenu);}};CS.HeaderMobileMenu.MobileMenu.addMenu(this.menu,options);window.CS.PageState.triggerUpdate('header-menu-mobile',{},'language');}static init(){const csHeaderLanguageSwitcher=new CsHeaderLanguageSwitcher();csHeaderLanguageSwitcher.setup();}}CsHeaderLanguageSwitcher.init();}));;
(function(factory){typeof define==='function'&&define.amd?define(factory):factory();})((function(){'use strict';const STORAGE_NAME='CsmHeaderGetAppBanner';const DAYINSECS=86400000;const DAYS=1;const CURRENTDATE=Date.now();const EXPIRESDATE=CURRENTDATE+DAYINSECS*DAYS;class CsmHeaderGetAppBanner{setup(){this.setupElements();this.setupStorage();this.setupBanner();}setupElements(){this.element=document.getElementById('csm-header-get-app-banner');}setupStorage(){this.data=window.CS.CsStorage.get(STORAGE_NAME);}setupBanner(){if(!this.data||this.data.expirationDate<CURRENTDATE)this.element.classList.add('open');this.setupCloseButton();}setupCloseButton(){const closeXButton=this.element.querySelector('.close');closeXButton.addEventListener('click',()=>{this.element.classList.remove('open');const data={expirationDate:EXPIRESDATE};window.CS.CsStorage.add(STORAGE_NAME,data);});}static init(){const csmHeaderGetAppBanner=new CsmHeaderGetAppBanner();csmHeaderGetAppBanner.setup();}}CsmHeaderGetAppBanner.init();}));;
